<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>RRRRR, I’m stuck!: Minimal reproducible code</title><meta name="viewport" content="width=device-width, initial-scale=1"><script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css"><script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="favicons/incubator/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="favicons/incubator/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="favicons/incubator/favicon-16x16.png"><link rel="manifest" href="favicons/incubator/site.webmanifest"><link rel="mask-icon" href="favicons/incubator/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="black"></head><body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="incubator-logo" alt="Carpentries Incubator" src="assets/images/incubator-logo.svg"><span class="badge text-bg-danger">
          <abbr title="This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.">
            <a href="https://docs.carpentries.org/resources/curriculum/lesson-life-cycle.html" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
              Pre-Alpha
            </a>
            <span class="visually-hidden">This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text"><li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul></li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/3-minimal-reproducible-code.html';">Instructor View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Carpentries Incubator" src="assets/images/incubator-logo-sm.svg"></div>
    <div class="lesson-title-md">
      RRRRR, I’m stuck!
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            RRRRR, I’m stuck!
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><li><a class="dropdown-item" href="reference.html">Reference</a></li>
          </ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  RRRRR, I’m stuck!
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 34%" class="percentage">
    34%
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: 34%" aria-valuenow="34" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text"><li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul></li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/3-minimal-reproducible-code.html">Instructor View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->

            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="1-intro-reproducible-examples.html">1. What is a reprex and why is it useful?</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="2-identify-the-problem.html">2. Identify the problem and make a plan</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        3. Minimal reproducible code
        </span>
      
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="4-minimal-reproducible-data.html">4. Minimal reproducible data</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="5-asking-your-question.html">5. Asking your question</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="reference.html">Reference</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources"><a href="aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">

            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="2-identify-the-problem.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="4-minimal-reproducible-data.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="2-identify-the-problem.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Identify the problem
        </a>
        <a class="chapter-link float-end" href="4-minimal-reproducible-data.html" rel="next">
          Next: Minimal reproducible...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Minimal reproducible code</h1>
        <p>Last updated on 2025-09-02 |

        <a href="https://github.com/carpentries-incubator/R-help-reprexes/edit/main/episodes/3-minimal-reproducible-code.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>



        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>Why is it important to make a minimal code example?</li>
<li>Which part of my code is causing the problem?</li>
<li>Which parts of my code should I include in a minimal example?</li>
<li>How can I tell whether a code snippet is reproducible or not?</li>
<li>How can I make my code reproducible?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul><li>Explain the value of a minimal code snippet.</li>
<li>Identify packages or other dependencies needed to run the code.</li>
<li>Simplify a script down to a minimal code example.</li>
<li>Evaluate whether a piece of code is reproducible as is or not. If
not, identify what is missing.</li>
<li>Edit a piece of code to make it reproducible</li>
</ul></div>
</div>
</div>
</div>
</div>
<p>When we left off in the previous episode, Mickey had discovered a
problem with their code–many kangaroo rat observations were missing from
a subset of the data after they filtered the dataset down to the
kangaroo rat species of interest.</p>
<p>Mickey tried some code first aid steps but wasn’t able to solve the
problem. They consulted Remy’s road map and saw that the next step is to
make a reprex.</p>
<div class="section level1">
<h1 id="making-a-reprex">Making a reprex<a class="anchor" aria-label="anchor" href="#making-a-reprex"></a></h1>
<figure><img src="fig/02_minimize_code.png" class="figure mx-auto d-block"></figure><div class="section level2">
<h2 id="step-1-minimize-the-code">Step 1: Minimize the code<a class="anchor" aria-label="anchor" href="#step-1-minimize-the-code"></a></h2>
<p>Mickey has written a lot of code so far. The code is also a little
messy–for example, after fixing the previous errors, they sometimes
commented out the old code and kept it for future reference.</p>
<p>Let’s take a look at the script as it stands so far.</p>

<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Minimal reproducible example script</span></span>
<span><span class="co"># Loading the tidyverse package</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span>
<span><span class="co"># Uploading the dataset that is currently saved in the project's data folder</span></span>
<span><span class="va">surveys</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"data/surveys_complete_77_89.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Take a look at the data</span></span>
<span><span class="fu">glimpse</span><span class="op">(</span><span class="va">surveys</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># or you can use</span></span>
<span><span class="fu">str</span><span class="op">(</span><span class="va">surveys</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">taxa</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Barplot of rodent species by sex</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="va">rodents</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">species</span>, fill <span class="op">=</span> <span class="va">sex</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Filter to focal species and known sex</span></span>
<span><span class="va">rodents_subset</span> <span class="op">&lt;-</span> <span class="va">surveys</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">species</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"ordii"</span>, <span class="st">"spectabilis"</span><span class="op">)</span>,</span>
<span>         <span class="va">sex</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"F"</span>, <span class="st">"M"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add common names</span></span>
<span><span class="co"># common_names &lt;- data.frame(species = unique(rodents_subset$species), common_name = c("Ord's", "Banner-tailed"))</span></span>
<span><span class="co"># common_names</span></span>
<span></span>
<span><span class="co"># Try again, re-ordering the common names</span></span>
<span><span class="va">common_names</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span>species <span class="op">=</span> <span class="fu">sort</span><span class="op">(</span><span class="fu">unique</span><span class="op">(</span><span class="va">rodents_subset</span><span class="op">$</span><span class="va">species</span><span class="op">)</span><span class="op">)</span>, common_name <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"Ord's"</span>, <span class="st">"Banner-Tailed"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">rodents_subset</span> <span class="op">&lt;-</span> <span class="fu">left_join</span><span class="op">(</span><span class="va">rodents_subset</span>, <span class="va">common_names</span>, by <span class="op">=</span> <span class="st">"species"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Explore k-rat weights</span></span>
<span><span class="va">weight_model</span> <span class="op">&lt;-</span> <span class="fu">lm</span><span class="op">(</span><span class="va">weight</span> <span class="op">~</span> <span class="va">species</span> <span class="op">+</span> <span class="va">sex</span>, data <span class="op">=</span> <span class="va">rodents_subset</span><span class="op">)</span></span>
<span><span class="fu">summary</span><span class="op">(</span><span class="va">weight_model</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Weight by species and sex</span></span>
<span><span class="va">rodents_subset</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">weight</span>, x <span class="op">=</span> <span class="va">species</span>, fill <span class="op">=</span> <span class="va">sex</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_boxplot</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Subsetted dataset</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">rodents_subset</span><span class="op">$</span><span class="va">sex</span>, <span class="va">rodents_subset</span><span class="op">$</span><span class="va">species</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Original dataset</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">sex</span>, <span class="va">surveys</span><span class="op">$</span><span class="va">species</span><span class="op">)</span></span></code></pre>
</div>
<div id="exercise-1-reflection" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="exercise-1-reflection" class="callout-inner">
<h3 class="callout-title">Exercise 1: Reflection</h3>
<div class="callout-content">
<ol style="list-style-type: decimal"><li><p>As you look at this script and think through trying to debug it,
how do you feel?</p></li>
<li><p>Mickey’s first instinct is to send the script to Remy and tell
them about the error. Imagine that you are Remy, an advanced graduate
student whose priority is finishing your dissertation. Your new labmate
Mickey has just sent you this script, asking for help debugging it. How
do you feel when you get Mickey’s email? What advice might you give
Mickey?</p></li>
</ol></div>
</div>
</div>
<p>When asking someone else for help, it is important to simplify your
code as much as possible to make it easier for the helper to understand
what is wrong. Simplifying code helps to reduce frustration and
overwhelm when debugging an error in a complicated script. The more that
we can make the process of helping easy and painless for the helper, the
more likely it is that they will take the time to help.</p>
<div class="section level3">
<h3 id="create-a-new-script">Create a new script<a class="anchor" aria-label="anchor" href="#create-a-new-script"></a></h3>
<p>Why do you think it’s a good idea to create a new script?</p>
<p>To make the task of simplifying the code less overwhelming, let’s
create a separate script for our reprex. This will let us experiment
with simplifying our code while keeping the original script intact.</p>
<p>Let’s create and save a new, blank R script and give it a name, such
as “reprex-script.R”</p>
<div id="making-an-r-script" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="making-an-r-script" class="callout-inner">
<h3 class="callout-title">Making an R script</h3>
<div class="callout-content">
<p>There are several ways to make an R script:</p>
<ul><li>File &gt; New File &gt; R Script</li>
<li>Click the white square with a green plus sign at the top left corner
of your RStudio window</li>
<li>Use a keyboard shortcut: Cmd + Shift + N (on a Mac) or Ctrl + Shift
+ N (on Windows)</li>
</ul></div>
</div>
</div>
<p>Let’s go ahead and copy over all of our code so we have an exact copy
of the full analysis script. This way, we can make as many changes to it
as we want and still keep the original code untouched.</p>
<p>Now, we will follow an iterative process to simplify our script.</p>
<p>A. Identify the symptom of the problem. <em>What are you observing
that shows you something is wrong?</em></p>
<p>B. Remove some code that is not central to demonstrating the
problem.</p>
<p>C. Run the simplified code and make sure that the symptom is still
present. <em>Does your example still reproduce the problem?</em></p>
</div>
<div class="section level3">
<h3 id="a--identify-a-symptom-of-the-problem">A. Identify a symptom of the problem<a class="anchor" aria-label="anchor" href="#a--identify-a-symptom-of-the-problem"></a></h3>
<p>Let’s figure out which line of code, when you run it, <em>clearly
shows that something is wrong</em>. For a syntax error, this is
straightforward: it’s the line of code that generates the error message.
But our error here is a semantic error. The code runs, but it returns
the wrong result. So let’s think instead about what line of code created
a result that we could clearly see was incorrect.</p>
<p>This is a little tricky in our case, because we first noticed
something was wrong when we looked at the output of the linear model.
That model output could be a perfectly reasonable symptom to use!</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">summary</span><span class="op">(</span><span class="va">weight_model</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'weight_model' not found</code></pre>
</div>
<p>But let’s not discount the work we’ve already done to diagnose this
problem! Something looked strange about this model, so we made a plot.
Something looked strange about the plot, so we double checked the
dataset used to create both the model and the plot. By comparing that
dataset with the original, un-subsetted data, we were able to determine
that something was wrong.</p>
<p>To summarize, we have already determined:</p>
<p><strong>The problem:</strong> There are many observations missing
from <code>rodents_subset</code> that should not have been removed.</p>
<p><strong>The symptom (lines that show that something is
wrong):</strong> Comparison between the species and sex counts in the
original and subsetted datasets.</p>
<p>In particular, this comparison shows us that there are no
observations of female <em>spectabilis</em> or male <em>ordii</em> in
<code>rodents_subset</code>, but there <em>were</em> plenty in the
original dataset, and that in general, there were many fewer rows for
both species in the subset than the original.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Subsetted dataset</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">rodents_subset</span><span class="op">$</span><span class="va">sex</span>, <span class="va">rodents_subset</span><span class="op">$</span><span class="va">species</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'rodents_subset' not found</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Original dataset</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">sex</span>, <span class="va">surveys</span><span class="op">$</span><span class="va">species</span><span class="op">)</span> <span class="co"># there are no observations of female spectabilis or male ordii in `rodents_subset`, even though there were in the original dataset.</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
    albigula audubonii bilineata brunneicapillus chlorurus clarki eremicus
  F      474         0         0               0         0      0      372
  M      368         0         0               0         0      0      468

    flavus fulvescens fulviventer fuscus gramineus harrisi hispidus leucogaster
  F    222         46           3      0         0       0       68         373
  M    302         16           2      0         0       0       42         397

    leucophrys maniculatus megalotis melanocorys merriami ordii penicillatus
  F          0         160       637           0     2522   690          221
  M          0         248       680           0     3108   792          155

    scutalatus  sp. spectabilis spilosoma squamata taylori torridus viridis
  F          0    4        1135         1        0       0      390       0
  M          0    5        1232         1        0       3      441       0</code></pre>
</div>
<p>These two lines of code, and the observation we made about them, will
be our guide as we simplify the script further.</p>
<p>We can now start removing pieces of code that we believe are not
central to our problem. After each removal, we can re-run the code and
make sure that our symptom persists. If the symptom changes, we have
either solved our problem (yay for rubber duck debugging!) or we removed
a line of code that was actually essential to reproducing our
problem.</p>
</div>
<div class="section level3">
<h3 id="b--remove-some-code-that-is-not-central-to-demonstrating-the-problem-">B. Remove some code that is not central to demonstrating the
problem.<a class="anchor" aria-label="anchor" href="#b--remove-some-code-that-is-not-central-to-demonstrating-the-problem-"></a></h3>
<p>Let’s start identifying pieces of code to remove. In general, we can
remove code that does not create variables for later use (for example,
exploratory plots, models, or descriptive functions such as
<code>head()</code> or <code>summary()</code>). We can also get rid of
code that adds complexity to the analysis that is not relevant to the
problem at hand.</p>
<p>Let’s start by removing the broken code that we commented out
earlier, back when we tried to join the common names and it didn’t work
because they were in the wrong order.</p>
<p>Code to remove:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add common names</span></span>
<span><span class="co"># common_names &lt;- data.frame(species = unique(rodents_subset$species), common_name = c("Ord's", "Banner-tailed"))</span></span>
<span><span class="co"># common_names</span></span></code></pre>
</div>
<p>Actually, now that we think about it, those common names are not
directly related to the problem at all! The “common_name” column might
be useful later on, but for our reprex we can probably remove that part
of the code without changing the outcome.</p>
<p>Code to remove:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Try again, re-ordering the common names</span></span>
<span><span class="va">common_names</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span>species <span class="op">=</span> <span class="fu">sort</span><span class="op">(</span><span class="fu">unique</span><span class="op">(</span><span class="va">rodents_subset</span><span class="op">$</span><span class="va">species</span><span class="op">)</span><span class="op">)</span>, common_name <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"Ord's"</span>, <span class="st">"Banner-Tailed"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">rodents_subset</span> <span class="op">&lt;-</span> <span class="fu">left_join</span><span class="op">(</span><span class="va">rodents_subset</span>, <span class="va">common_names</span>, by <span class="op">=</span> <span class="st">"species"</span><span class="op">)</span></span></code></pre>
</div>
<p>After removing both of those pieces of code, our script is a little
shorter:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Minimal reproducible example script</span></span>
<span><span class="co"># Loading the tidyverse package</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span>
<span><span class="co"># Uploading the dataset that is currently saved in the project's data folder</span></span>
<span><span class="va">surveys</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"data/surveys_complete_77_89.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Take a look at the data</span></span>
<span><span class="fu">glimpse</span><span class="op">(</span><span class="va">surveys</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># or you can use</span></span>
<span><span class="fu">str</span><span class="op">(</span><span class="va">surveys</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">taxa</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Barplot of rodent species by sex</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="va">surveys</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">species</span>, fill <span class="op">=</span> <span class="va">sex</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Filter to focal species and known sex</span></span>
<span><span class="va">rodents_subset</span> <span class="op">&lt;-</span> <span class="va">surveys</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">species</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"ordii"</span>, <span class="st">"spectabilis"</span><span class="op">)</span>,</span>
<span>         <span class="va">sex</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"F"</span>, <span class="st">"M"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Explore k-rat weights</span></span>
<span><span class="va">weight_model</span> <span class="op">&lt;-</span> <span class="fu">lm</span><span class="op">(</span><span class="va">weight</span> <span class="op">~</span> <span class="va">species</span> <span class="op">+</span> <span class="va">sex</span>, data <span class="op">=</span> <span class="va">rodents_subset</span><span class="op">)</span></span>
<span><span class="fu">summary</span><span class="op">(</span><span class="va">weight_model</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Weight by species and sex</span></span>
<span><span class="va">rodents_subset</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">weight</span>, x <span class="op">=</span> <span class="va">species</span>, fill <span class="op">=</span> <span class="va">sex</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_boxplot</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Subsetted dataset</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">rodents_subset</span><span class="op">$</span><span class="va">sex</span>, <span class="va">rodents_subset</span><span class="op">$</span><span class="va">species</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Original dataset</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">sex</span>, <span class="va">surveys</span><span class="op">$</span><span class="va">species</span><span class="op">)</span>  <span class="co"># there are no observations of female spectabilis or male ordii in `rodents_subset`, even though there were in the original dataset.</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="c--run-the-simplified-code-and-make-sure-that-the-symptom-is-still-present--does-your-example-still-reproduce-the-problem">C. Run the simplified code and make sure that the symptom is still
present. <em>Does your example still reproduce the problem?</em>
<a class="anchor" aria-label="anchor" href="#c--run-the-simplified-code-and-make-sure-that-the-symptom-is-still-present--does-your-example-still-reproduce-the-problem"></a></h3>
<p>Now it’s time to re-run the script to make sure we haven’t removed
anything essential. Remember to pay attention to the symptom of the
problem at the end and make sure that the essential observation hasn’t
changed. Sure enough, those observations are still missing. We have
succeeded in simplifying our code while still demonstrating the
problem!</p>
<p>Great progress, but this script is still pretty long and complicated.
Can we remove more things?</p>
<div id="exercise-2-minimizing-code" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-2-minimizing-code" class="callout-inner">
<h3 class="callout-title">Exercise 2: Minimizing code</h3>
<div class="callout-content">
<p>Minimizing code is an iterative process. Repeat steps B and C above
several more times. Which other lines of code can you remove to make
this script more minimal? After removing each part, be sure to re-run
the code to make sure that it still reproduces the error.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<ul><li>The barplot of species and sex (ggplot) can be removed because it
generates a plot but does not create any variables that are used
later.</li>
<li>Similarly, our end visualization of weight by species and sex
(boxplot) can be removed.</li>
<li>The weight model and the summary can be removed</li>
<li>Any other informational functions that could have been run in the
console, such as <code>table()</code> or <code>print()</code>,
<code>head()</code>, or <code>str()</code> can be removed.</li>
<li>The essential parts to keep are the lines that access the dataset in
the first place, subset it down to rodents_subset, and then diagnose the
problem (the <code>table()</code> calls at the end).</li>
</ul></div>
</div>
</div>
</div>
<p>After repeating steps B and C over and over again, we arrive at a
much more minimal script.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Loading the tidyverse package</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span>
<span></span>
<span><span class="va">surveys</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"data/surveys_complete_77_89.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Filter to focal species and known sex</span></span>
<span><span class="va">rodents_subset</span> <span class="op">&lt;-</span> <span class="va">surveys</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">species</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"ordii"</span>, <span class="st">"spectabilis"</span><span class="op">)</span>,</span>
<span>         <span class="va">sex</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"F"</span>, <span class="st">"M"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Subsetted dataset</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">rodents_subset</span><span class="op">$</span><span class="va">sex</span>, <span class="va">rodents_subset</span><span class="op">$</span><span class="va">species</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Original dataset</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">sex</span>, <span class="va">surveys</span><span class="op">$</span><span class="va">species</span><span class="op">)</span> <span class="co"># there are no observations of female spectabilis or male ordii in `rodents_subset`, even though there were in the original dataset.</span></span></code></pre>
</div>
<p>Mickey is really getting the hang of this! They scrutinize the
example to see if there’s anything else that can be cut. They realize
that the code still runs perfectly fine if they remove
<code><a href="https://tidyverse.tidyverse.org" class="external-link">library(tidyverse)</a></code>–since they already loaded the
{tidyverse} package, there should be no need to load it again!</p>
<p>Mickey realizes that they might be able to narrow the example down
eeeeeeven more. They try removing the species filter and only filtering
by sex. Now the minimal example looks like this:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">surveys</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"data/surveys_complete_77_89.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Filter to known sex</span></span>
<span><span class="va">rodents_subset</span> <span class="op">&lt;-</span> <span class="va">surveys</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">sex</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"F"</span>, <span class="st">"M"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Subsetted dataset</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">rodents_subset</span><span class="op">$</span><span class="va">sex</span>, <span class="va">rodents_subset</span><span class="op">$</span><span class="va">species</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Original dataset</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">sex</span>, <span class="va">surveys</span><span class="op">$</span><span class="va">species</span><span class="op">)</span> <span class="co"># still missing a lot of rows!</span></span></code></pre>
</div>
<p>Something is different–we no longer have zero rows for two of the
species/sex combos. But this example still demonstrates our problem.
Remember, we previously stated the problem as “There are many
observations missing from <code>rodents_subset</code> that should not
have been removed.” And sure enough, if we look closely here, we can see
that our species/sex counts have changed from 690 F ordii/792 M ordii
and 1135 F spectabilis/1232 M spectabilis to 333/393 and 568/610,
respectively. The problem persists! We are still mysteriously missing
rows.</p>
<div id="callout2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div class="callout-inner">
<div class="callout-content">
<p>If you had chosen to remove the sex filter instead of removing the
species filter, the same point would be made. The numbers would be
different, but we would still see fewer rows in the subsetted data
frame. Either one works!</p>
</div>
</div>
</div>
<div id="callout3" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div class="callout-inner">
<div class="callout-content">
<p>If you hadn’t noticed that you could simplify this example even
further, that would still be okay! Minimizing code is an art, not an
exact science. The more minimal you can make your code, the better, but
a helper will still have a much easier time working on your problem if
you’ve removed some extraneous steps, even if you haven’t narrowed it
down 100%. Don’t let the perfect be the enemy of the good!</p>
</div>
</div>
</div>
<p>Okay, so our minimal snippet looks like this:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">surveys</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"data/surveys_complete_77_89.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Filter to known sex</span></span>
<span><span class="va">rodents_subset</span> <span class="op">&lt;-</span> <span class="va">surveys</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">sex</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"F"</span>, <span class="st">"M"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Subsetted dataset</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">rodents_subset</span><span class="op">$</span><span class="va">sex</span>, <span class="va">rodents_subset</span><span class="op">$</span><span class="va">species</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Original dataset</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">sex</span>, <span class="va">surveys</span><span class="op">$</span><span class="va">species</span><span class="op">)</span> <span class="co"># still missing a lot of rows!</span></span></code></pre>
</div>
<p>This is great progress! Remy will find this minimal code snippet much
more approachable than the long script that Mickey started with.</p>
<div id="exercise-3-have-we-made-a-reprex" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="exercise-3-have-we-made-a-reprex" class="callout-inner">
<h3 class="callout-title">Exercise 3: Have we made a reprex?</h3>
<div class="callout-content">
<p>Mickey is really proud of their efforts to minimize the code! They
email the minimal code snippet to Remy to ask for help. Remy notices
immediately that this code is much easier to read and understand. They
open up the script and try to run it in R.</p>
<ol style="list-style-type: decimal"><li><p>What do you think will happen when Remy tries to run the code
from this reprex script?</p></li>
<li><p>What should Mickey do next to improve the minimal reproducible
example?</p></li>
</ol></div>
</div>
</div>
<p>We haven’t yet included enough code to allow a helper, such as Remy,
to run the code on their own computer. If Remy tries to run the reprex
script in its current state, they will encounter errors because they
don’t have access to the same R environment that Mickey does.</p>
<p>That’s why it’s so important to include dependencies in your
reprex.</p>
</div>
<div class="section level3">
<h3 id="include-dependencies">Include dependencies<a class="anchor" aria-label="anchor" href="#include-dependencies"></a></h3>
<p>A <strong>dependency</strong> is a piece of code that other pieces of
code <strong>depend on</strong> in order to function properly.</p>
<p>R code consists primarily of <strong>functions</strong> and
<strong>variables</strong>. In order to make our minimal examples truly
<em>reproducible</em>, we have to give our helpers access to all the
functions and all the variables that are necessary to run our code.</p>
<p>First, let’s talk about <strong>functions</strong>. Functions in R
typically come from packages. You can access them by loading the package
into your environment.</p>
<p>To make sure that your helper has access to the packages necessary to
run your reprex, you will need to include calls to
<code>library()</code> for whichever packages are used in the code. For
example, if your code uses the function <code>lmer</code> from the
<a href="https://github.com/lme4/lme4/" class="external-link">lme4</a> package, you would have to include
<code><a href="https://github.com/lme4/lme4/" class="external-link">library(lme4)</a></code> at the top of your reprex script to make sure
your helper has the <a href="https://github.com/lme4/lme4/" class="external-link">lme4</a> package loaded and can run your
code.</p>
<div id="default-packages" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="default-packages" class="callout-inner">
<h3 class="callout-title">Default packages</h3>
<div class="callout-content">
<p>Some packages, such as <code>{base}</code> and <code>{stats}</code>,
are loaded in R by default, so you might not have realized that a lot of
commonly-used functions, such as <code>dim</code>, <code>colSums</code>,
<code>mean</code>, and <code>length</code> actually come from those
packages!</p>
<p>You can see a complete list of the functions that come from the
<code>{base}</code> and <code>{stats}</code> packages by running
<code>library(help = "base")</code> or
<code>library(help = "stats")</code> in your console.</p>
<p>But, you actually don’t need to worry too much about this because
your helpers’ RStudio versions will also have <code>{base}</code> and
<code>{stats}</code> preinstalled!</p>
</div>
</div>
</div>
<p>Let’s do this for our own reprex. We can start by identifying all the
functions used, and then we can figure out where each function comes
from to make sure that we tell our helper to load the right
packages.</p>
<div id="exercise-4-which-packages-should-we-load" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="exercise-4-which-packages-should-we-load" class="callout-inner">
<h3 class="callout-title">Exercise 4: Which packages should we
load?</h3>
<div class="callout-content">
<p>The functions used in our minimal example are
<code>read_csv()</code>, <code>filter()</code>, <code>c()</code>, and
<code>table()</code>.</p>
<p>Identify the package that each of the functions comes from and modify
the minimal example so that it explicitly loads those packages.
:::solution <code><a href="https://dplyr.tidyverse.org" class="external-link">library(dplyr)</a></code> <code><a href="https://readr.tidyverse.org" class="external-link">library(readr)</a></code></p>
<p><code>filter()</code> comes from <a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a>, and
read_csv()<code>comes from</code>{readr}<code>.</code>c()<code>and</code>table()<code>come from</code>{base}`,
which is loaded by default, so we don’t need to include a library() call
for this.</p>
<p>Bonus if you notice that we also use the <code>%&gt;%</code>
operator, which comes from <a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a> too, so we definitely
need to make sure that <a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a> is loaded!</p>
<p><em>Extra challenge: did we use any other operators? Where do they
come from?</em></p>
</div>
</div>
</div>
<p>:::</p>
<p>We can update our minimal code to include those
<code>library()</code> calls.</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">readr</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">dplyr</span><span class="op">)</span></span>
<span></span>
<span><span class="va">surveys</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"data/surveys_complete_77_89.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Filter to known sex</span></span>
<span><span class="va">rodents_subset</span> <span class="op">&lt;-</span> <span class="va">surveys</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">sex</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"F"</span>, <span class="st">"M"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Subsetted dataset</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">rodents_subset</span><span class="op">$</span><span class="va">sex</span>, <span class="va">rodents_subset</span><span class="op">$</span><span class="va">species</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Original dataset</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">sex</span>, <span class="va">surveys</span><span class="op">$</span><span class="va">species</span><span class="op">)</span> <span class="co"># still missing a lot of rows!</span></span></code></pre>
</div>
<div id="installing-vs.-loading-packages" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="installing-vs.-loading-packages" class="callout-inner">
<h3 class="callout-title">Installing vs. loading packages</h3>
<div class="callout-content">
<p>We included calls to <code>library()</code> to load the packages we
need. But what if our helper doesn’t have all of these packages
installed? Won’t the code not be reproducible?</p>
<p>Packages need to be installed one time before they can be loaded with
<code>library()</code>. Typically, we don’t include
<code>install.packages()</code> in our code for each of the packages
that we include in the <code>library()</code> calls, because
<code>install.packages()</code> doesn’t need to be repeated every time
the script is run. We can assume that our helper will see
<code>library(specialpackage)</code> and know that they need to go
install “specialpackage” on their own.</p>
<p>Technically, this does make that part of the code not reproducible!
But it’s also more “polite” than explicitly including
<code>install.packages()</code>. Our helper might have their own way of
managing package versions, and forcing them to install a package when
they run our reprex risks messing up their workflow. It is a common
convention to stick with <code>library()</code> and let the helper
figure it out from there.</p>
</div>
</div>
</div>
<div id="exercise-5-which-packages-are-essential" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="exercise-5-which-packages-are-essential" class="callout-inner">
<h3 class="callout-title">Exercise 5: Which packages are essential?</h3>
<div class="callout-content">
<p>In each of the following code snippets, identify the necessary
packages (or other code) to make the example reproducible.</p>
<ol style="list-style-type: lower-alpha"><li>
</li></ol><pre><code><span><span class="va">weight_model</span> <span class="op">&lt;-</span> <span class="fu">lm</span><span class="op">(</span><span class="va">weight</span> <span class="op">~</span> <span class="va">common_name</span> <span class="op">+</span> <span class="va">sex</span>, data <span class="op">=</span> <span class="va">rodents_subset</span><span class="op">)</span></span>
<span><span class="fu">tab_mod</span><span class="op">(</span><span class="va">weight_model</span><span class="op">)</span></span></code></pre>
<ol start="2" style="list-style-type: lower-alpha"><li>
</li></ol><pre><code><span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu">lmer</span><span class="op">(</span><span class="va">weight</span> <span class="op">~</span> <span class="va">hindfoot_length</span> <span class="op">+</span> <span class="op">(</span><span class="fl">1</span><span class="op">|</span><span class="va">plot_type</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">rodents</span><span class="op">)</span></span>
<span><span class="fu">summary</span><span class="op">(</span><span class="va">mod</span><span class="op">)</span></span></code></pre>
<ol start="3" style="list-style-type: lower-alpha"><li>
</li></ol><pre><code><span><span class="va">rodents_processed</span> <span class="op">&lt;-</span> <span class="fu">process_rodents_data</span><span class="op">(</span><span class="va">rodents</span><span class="op">)</span></span>
<span><span class="fu">glimpse</span><span class="op">(</span><span class="va">rodents_processed</span><span class="op">)</span></span></code></pre>
<p>This exercise should take about 10 minutes. :::solution a.
<code>lm</code> is part of base R, so there’s no package needed for
that. <code>tab_mod</code> comes from the package <code>sjPlot</code>.
You could add <code>libary(sjPlot)</code> to this code to make it
reproducible. b. <code>lmer</code> is a linear mixed modeling function
that comes from the package <code>lme4</code>. <code>summary</code> is
from base R. You could add <code><a href="https://github.com/lme4/lme4/" class="external-link">library(lme4)</a></code> to this code to
make it reproducible. c. <code>process_rodents_data</code> is not from
any package that we know of, so it was probably an originally-created
function. In order to make this example reproducible, you would have to
include the definition of <code>process_rodents_data</code>.
<code>glimpse</code> is probably from <code>dplyr</code>, but it’s worth
noting that there is also a <code>glimpse</code> function in the
<code>pillar</code> package, so this might be ambiguous. This is another
reason it’s important to specify your packages–if you leave your helper
guessing, they might load the wrong package and misunderstand your
error!</p>
</div>
</div>
</div>
<p>:::::::::::::::::::::::::::::::::::::::::::</p>
<p>Including <code>library()</code> calls will definitely help Remy run
the code. But this code still won’t work as written because Remy does
not have access to the same <em>objects</em> that Mickey used in the
code. Along with functions, objects are the second type of dependency we
need to watch out for when writing reprexes.</p>
<p>The code as written relies on <code>rodents_subset</code>, which Remy
will not have access to if they try to run the code. That means that
we’ve succeeded in making our example <em>minimal</em>, but it is not
<em>reproducible</em>: it does not allow someone else to reproduce the
problem!</p>
<p>In the next episode, we will learn how to handle perhaps the most
thorny part of creating reprexes: dealing with datasets.</p>
<div id="exercise-6-reflection" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="exercise-6-reflection" class="callout-inner">
<h3 class="callout-title">Exercise 6: Reflection</h3>
<div class="callout-content">
<p>Let’s take a moment to reflect on this process.</p>
<ul><li><p>What’s one thing you learned in this episode? An insight; a new
skill; a process?</p></li>
<li><p>What is one thing you’re still confused about? What questions do
you have?</p></li>
</ul><p>This exercise should take about 5 minutes.</p>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul><li>Making a reprex is the next step after trying code first aid.</li>
<li>In order to make a good reprex, it is important to simplify your
code</li>
<li>Simplify code by removing parts not directly related to the
question</li>
<li>Give helpers access to the functions used in your code by loading
all necessary packages</li>
</ul></div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</div>
</div>



      </div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="2-identify-the-problem.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="4-minimal-reproducible-data.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="2-identify-the-problem.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Identify the problem
        </a>
        <a class="chapter-link float-end" href="4-minimal-reproducible-data.html" rel="next">
          Next: Minimal reproducible...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/carpentries-incubator/R-help-reprexes/edit/main/episodes/3-minimal-reproducible-code.Rmd" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/carpentries-incubator/R-help-reprexes/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/carpentries-incubator/R-help-reprexes/" class="external-link">Source</a></p>
				<p><a href="https://github.com/carpentries-incubator/R-help-reprexes/blob/main/CITATION.cff" class="external-link">Cite</a> | <a href="mailto:kgahm@ucla.edu">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.17.1" class="external-link">sandpaper (0.17.1)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.9" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.7" class="external-link">varnish (1.0.7)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "@id": "https://carpentries-incubator.github.io/R-help-reprexes/3-minimal-reproducible-code.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/LearningResource/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "R, reprex, help, The Carpentries, error, debug, reproducible example",
  "name": "Minimal reproducible code",
  "creativeWorkStatus": "active",
  "url": "https://carpentries-incubator.github.io/R-help-reprexes/3-minimal-reproducible-code.html",
  "identifier": "https://carpentries-incubator.github.io/R-help-reprexes/3-minimal-reproducible-code.html",
  "dateCreated": "2024-05-14",
  "dateModified": "2025-09-02",
  "datePublished": "2025-09-02"
}

  </script><script>
		feather.replace();
	</script></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

