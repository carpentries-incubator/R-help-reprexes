<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>RRRRR, I’m stuck!: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="../assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="../assets/styles.css">
<script src="../assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../favicons/incubator/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicons/incubator/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../favicons/incubator/favicon-16x16.png">
<link rel="manifest" href="../favicons/incubator/site.webmanifest">
<link rel="mask-icon" href="../favicons/incubator/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="incubator-logo" alt="Carpentries Incubator" src="../assets/images/incubator-logo.svg"><span class="badge text-bg-danger">
          <abbr title="This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.">
            <a href="https://docs.carpentries.org/resources/curriculum/lesson-life-cycle.html" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
              Pre-Alpha
            </a>
            <span class="visually-hidden">This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='../aio.html';">Learner View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Carpentries Incubator" src="../assets/images/incubator-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      RRRRR, I’m stuck!
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            RRRRR, I’m stuck!
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Instructor Notes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extract All Images</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<hr>
<li><a class="dropdown-item" href="reference.html">Reference</a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="../instructor/aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  RRRRR, I’m stuck!
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../aio.html">Learner View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Schedule</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="1-intro-reproducible-examples.html">1. What is a reprex and why is it useful?</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="2-identify-the-problem.html">2. Identify the problem and make a plan</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="3-minimal-reproducible-code.html">3. Minimal reproducible code</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="4-minimal-reproducible-data.html">4. Minimal reproducible data</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="5-asking-your-question.html">5. Asking your question</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="../instructor/key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Instructor Notes</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extract All Images</a>
                      </li>
                      <hr>
<li><a class="dropdown-item" href="reference.html">Reference</a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources">
<a href="../instructor/aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-1-intro-reproducible-examples"><p>Content from <a href="1-intro-reproducible-examples.html">What is a reprex and why is it useful?</a></p>
<hr>
<p>Last updated on 2025-08-26 |

        <a href="https://github.com/carpentries-incubator/R-help-reprexes/edit/main/episodes/1-intro-reproducible-examples.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 25 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div id="accordionInstructor1" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor1" aria-expanded="false" aria-controls="collapseInstructor1">
  <h3 class="accordion-header" id="headingInstructor1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Welcome and introductions </h3>
</button>
<div id="collapseInstructor1" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor1" aria-labelledby="headingInstructor1">
<div class="accordion-body">
<p>Welcome to “RRRR, I’m Stuck!” We’re glad you’re here. Let’s first
take care of a few setup steps. You should all have followed the setup
instructions on the workshop website, and you should have both R and
RStudio installed. You should also have the following packages
installed: {reprex}, {tidyverse}, and {ggplot2}. If you haven’t
installed those packages, please take a moment to install them now. We
have a range of levels of experience here. This workshop assumes that
you are a researcher in ecology or biology who has some prior experience
working with R in RStudio.</p>
<p>This lesson will follow a fictional ecology grad student named Mickey
as they explore a new dataset, deal with various common coding problems,
and learn how to write a minimal reproducible example to ask for help in
community forums. We will not spend much time discussing the code
itself, as we will assume you have a basic background.</p>
<p>It’s okay if you’re not an R expert–-but even experienced coders may
not always know how to get unstuck, so we hope this workshop will be
useful to many levels of coding background.</p>
<p>[MAYBE ADD SOMETHING ABOUT WHAT THE OVERALL LESSON OBKECTIVES
ARE]</p>
<p>In this first episode we will introduce the concept of a <em>minimal
reproducible example</em> and how it can be useful for getting unstuck
while coding. We will provide you with a roadmap that highlights the key
steps to follow as we move through the lesson. And we will take a look
at the dataset that we’ll be using throughout the rest of the
lesson.</p>
</div>
</div>
</div>
</div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What steps can you take to solve problems in your code?</li>
<li>What is a minimal reproducible example?</li>
<li>Why are minimal reproducible examples important?</li>
<li>What is the Portal Project dataset?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Describe a minimal reproducible example and its requirements.</li>
<li>Recognize how creating a minimal reproducible example can help you
solve problems in your code.</li>
<li>List the key steps to creating a minimal reproducible example.</li>
<li>Explain the benefits of creating a minimal reproducible example both
for you and for others.</li>
<li>Load in the rodent survey data and briefly explain its
contents.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="accordionInstructor2" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor2" aria-expanded="false" aria-controls="collapseInstructor2">
  <h3 class="accordion-header" id="headingInstructor2">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor2" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor2" aria-labelledby="headingInstructor2">
<div class="accordion-body">
<p>The following exercises are optional, but they can are useful for
getting learners settled in. They could happen at the start of the
lesson, to break the ice:</p>
<p>“Before we begin, let’s take a moment to reflect on why we are
here”</p>
<p>Or they can happen after a first introduction to reprexes.</p>
</div>
</div>
</div>
</div>
<div id="exercise-1-think-pair-share-when-you-get-stuck" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="exercise-1-think-pair-share-when-you-get-stuck" class="callout-inner">
<h3 class="callout-title">Exercise 1 (think, pair, share): When you get
stuck</h3>
<div class="callout-content">
<p>When you’re coding in R and you get stuck, what are some things that
you do to get help or get unstuck?</p>
</div>
</div>
</div>
<div id="exercise-2-think-pair-share-helping-someone-else" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="exercise-2-think-pair-share-helping-someone-else" class="callout-inner">
<h3 class="callout-title">Exercise 2 (think, pair, share): Helping
someone else</h3>
<div class="callout-content">
<p>Think about a time that you helped someone else with their code. What
information did you need to know in order to help? (If you have never
helped someone else with their code, think about a time that someone
helped you–what information did they need to know in order to help?)</p>
</div>
</div>
</div>
<p>One of the most frustrating parts of learning to code is getting
stuck and not knowing what to do! Maybe R gives you an angry red error
message you don’t understand, or your code doesn’t seem to be doing what
you were expecting and you don’t know why. Maybe you try to use Google
to find answers but you can’t quite find the same problem out there.
What to do?</p>
<p>Luckily, there are many people in the R and data science communities
who are happy to help. However, in order for them to do so, you must
give them the right information. Figuring out how to ask a good question
can be hard.</p>
<p>Many helpers or forums may ask you to provide example data or a
<strong>minimal reproducible example</strong> (commonly abbreviated as a
“<strong>reprex</strong>”). What even is that? Wouldn’t it be nice if
you could just hand over your computer so a helper can see exactly what
is happening? That’s exactly what the reprex is for.</p>
<section><h2 class="section-heading" id="what-is-a-reprex">What is a reprex?<a class="anchor" aria-label="anchor" href="#what-is-a-reprex"></a>
</h2>
<hr class="half-width">
<p>A reprex is essentially a <strong>simplified</strong> version of your
problematic code that clearly demonstrates the problem you are facing
(includes <strong>only</strong> the necessary information to show the
problem, nothing more) and <strong>will run easily on anyone’s
computer</strong>.</p>
<p>The Tidyverse documentation puts it simply:</p>
<blockquote>
<p>“The goal of a reprex is to package your problematic code in such a
way that other people can run it and feel your pain. Then, hopefully,
they can provide a solution and put you out of your misery.” - <a href="https://www.tidyverse.org/help/" class="external-link">Get help! (Tidyverse)</a></p>
</blockquote>
<figure><img src="../fig/MinimalReproducibleExample.png" class="figure mx-auto d-block"></figure><div id="accordionInstructor3" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor3" aria-expanded="false" aria-controls="collapseInstructor3">
  <h3 class="accordion-header" id="headingInstructor3">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor3" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor3" aria-labelledby="headingInstructor3">
<div class="accordion-body">
<p>If you didn’t take time for the reflection exercises at the
beginning, you could also pause to do them here.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="why-use-a-reprex">Why use a reprex?<a class="anchor" aria-label="anchor" href="#why-use-a-reprex"></a>
</h2>
<hr class="half-width">
<p>Reprexes are very important tools to get help when you’re stuck on a
coding problem. You may be asked to provide a reprex when you’re working
with a statistical consultant (often available at universities) or when
posting a question to online help forums (such as StackOverflow or the
Posit Community).</p>
<p>As the name suggests, a minimal reproducible example needs to be
<strong>minimal</strong> and <strong>reproducible</strong>.</p>
<ul>
<li><p>Stripping the code and data down to their essential
(<strong>minimal</strong>) parts makes it easy for a helper to zero-in
on what might be going wrong.</p></li>
<li><p>Making your example <strong>reproducible</strong> allows a helper
to run your code on their own computer so they can easily “tinker” with
it to fix it. This makes them more likely to help you.</p></li>
</ul>
<div id="helpers" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="helpers" class="callout-inner">
<h3 class="callout-title">Helpers</h3>
<div class="callout-content">
<p>There are lots of people who might help you with your code: friends,
colleagues, mentors, or total strangers online. In this lesson, we will
use the term “helper” to refer to the person who is helping you to debug
your code. Helpers are the target audience for your minimal reproducible
example.</p>
</div>
</div>
</div>
<p>But there’s another hidden reason to make a reprex! The process of
making a reprex often leads to a better understanding of your own code.
Therefore, you might end up solving the problem yourself without asking
for help.</p>
<div id="rubber-duck-debugging" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="rubber-duck-debugging" class="callout-inner">
<h3 class="callout-title">Rubber duck debugging</h3>
<div class="callout-content">
<p>The phenomenon of solving one’s own problem during the process of
trying to explain it to someone else is often called “rubber duck
debugging.” This is a reference to a story about programmers who would
explain the problem they were having with their code to a rubber duck
they would keep on their desk. Jenny Bryan refers to reprexes as
“basically the rubber duck in disguise,” because they force you to
unpack your problem to explain it more clearly.</p>
<p>Jenny Bryan shares many other insights about reprexes in her 2018
talk <a href="https://www.youtube.com/watch?v=5gqksthQ0cM" class="external-link">“Help me help
you: Creating reproducible examples.”</a></p>
</div>
</div>
</div>
<figure><img src="../fig/jennybryan.png" class="figure mx-auto d-block"></figure><p>Making a reprex can be an excellent learning opportunity, but the
process can feel daunting when you are not sure where to begin. In this
lesson, we will walk through a <strong>step by step roadmap</strong> you
can use whenever you feel stuck, including some first steps for
debugging your code and the process of creating a reprex. We’ll talk
about each of the steps and provide a workflow that you can follow when
you get stuck in the future. At the end, we’ll introduce you to the <a href="https://reprex.tidyverse.org/" class="external-link">{reprex}</a> package, a useful tool
for creating good minimal reproducible examples. By the end of the
lesson you will have gained a better understanding of how to approach
error and warning messages, you will feel more confident in your ability
to make a reprex, and you will feel more comfortable asking for formal
help.</p>
</section><section><h2 class="section-heading" id="meet-mickey-your-learning-companion">Meet Mickey, your learning companion<a class="anchor" aria-label="anchor" href="#meet-mickey-your-learning-companion"></a>
</h2>
<hr class="half-width">
<p>Mickey is an ecology grad student who just joined a new lab. Mickey’s
lab has been working for many years with data from the <a href="https://portal.weecology.org/" class="external-link">Portal Project</a>, a long-term
research study of rodents in Portal, Arizona. Mickey would like to
explore this data for their research, so they reach out to Remy, a
fifth-year grad student who is very familiar with this project. To get
Mickey started, Remy sends Mickey an archival dataset of rodent surveys
from 1977-1989, and tells Mickey to “play around” with the data in
RStudio to get familiar with it.</p>
<p>Mickey has some past experience in R. They attended the “<a href="https://datacarpentry.github.io/R-ecology-lesson/" class="external-link">Data Analysis
and Visualization in R for Ecologists</a>” Carpentries workshop, and
they feel comfortable with the fundamentals of coding in R. Still,
Mickey is a little rusty and nervous about their skills and the
unfamiliar data.</p>
<div id="prerequisites-and-target-audience" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="prerequisites-and-target-audience" class="callout-inner">
<h3 class="callout-title">Prerequisites and target audience</h3>
<div class="callout-content">
<p>This workshop assumes some prior experience with working in R and
RStudio. We will assume you’ve taken the equivalent of the Data Analysis
and Visualization in R for Ecologists workshop and are comfortable with
basic commands, and we won’t necessarily explain every line of code in
detail.</p>
<p>If you’re much more experienced in R, this workshop is still for you!
Even expert coders may not always know how to get unstuck. We hope this
workshop will be useful to people with a variety of coding
backgrounds.</p>
</div>
</div>
</div>
<p>Mickey starts by loading the data so they can begin to explore it.
They also load the {tidyverse}, a set of packages that will be useful
for wrangling and visualizing the data.</p>
<div id="accordionInstructor4" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor4" aria-expanded="false" aria-controls="collapseInstructor4">
  <h3 class="accordion-header" id="headingInstructor4">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor4" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor4" aria-labelledby="headingInstructor4">
<div class="accordion-body">
<p>Loading the entire {tidyverse} here, rather than a few component
packages, is an intentional over-complication so that we can teach
learners to simplify their packages later. Learners should have
{tidyverse} installed, as per the setup instructions. They should also
already have a project and folders set up, with the data downloaded and
in the “data” folder of the project.</p>
<p>If necessary, here is the url for the data: <a href="https://raw.githubusercontent.com/carpentries-incubator/R-help-reprexes/refs/heads/main/episodes/data/surveys_complete_77_89.csv" class="external-link uri">https://raw.githubusercontent.com/carpentries-incubator/R-help-reprexes/refs/heads/main/episodes/data/surveys_complete_77_89.csv</a></p>
</div>
</div>
</div>
</div>
<p>Let’s go over to RStudio. Make sure that you’re in the RStudio
project that you created for this lesson, and that you’ve downloaded the
data as a csv and saved it in the “data/” folder.</p>
<div id="callout4" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div class="callout-inner">
<div class="callout-content">
<p>As a reminder: Make sure you’re coding in your RStudio project. You
can open the project you created by double-clicking the “.Rproj” file
from your Finder/File Explorer. Or, from inside of RStudio, navigate to
the upper right corner of the screen, click on the blue cube icon,
choose “Open Project”, and then select your project to open a new
session of RStudio.</p>
</div>
</div>
</div>
<p>Now, we can load in the dataset with the following code:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Loading the tidyverse package</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Uploading the dataset that is currently saved in the project's data folder</span></span>
<span><span class="va">surveys</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"data/surveys_complete_77_89.csv"</span><span class="op">)</span> </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Rows: 16878 Columns: 13
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (6): species_id, sex, genus, species, taxa, plot_type
dbl (7): record_id, month, day, year, plot_id, hindfoot_length, weight

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<p>Mickey loads in the dataset and takes a look at it to find out what
type of data was collected during these surveys.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Take a look at the data</span></span>
<span><span class="fu">glimpse</span><span class="op">(</span><span class="va">surveys</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># or you can use</span></span>
<span><span class="fu">str</span><span class="op">(</span><span class="va">surveys</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Rows: 16,878
Columns: 13
$ record_id       &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16,…
$ month           &lt;dbl&gt; 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, …
$ day             &lt;dbl&gt; 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16…
$ year            &lt;dbl&gt; 1977, 1977, 1977, 1977, 1977, 1977, 1977, 1977, 1977, …
$ plot_id         &lt;dbl&gt; 2, 3, 2, 7, 3, 1, 2, 1, 1, 6, 5, 7, 3, 8, 6, 4, 3, 2, …
$ species_id      &lt;chr&gt; "NL", "NL", "DM", "DM", "DM", "PF", "PE", "DM", "DM", …
$ sex             &lt;chr&gt; "M", "M", "F", "M", "M", "M", "F", "M", "F", "F", "F",…
$ hindfoot_length &lt;dbl&gt; 32, 33, 37, 36, 35, 14, NA, 37, 34, 20, 53, 38, 35, NA…
$ weight          &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ genus           &lt;chr&gt; "Neotoma", "Neotoma", "Dipodomys", "Dipodomys", "Dipod…
$ species         &lt;chr&gt; "albigula", "albigula", "merriami", "merriami", "merri…
$ taxa            &lt;chr&gt; "Rodent", "Rodent", "Rodent", "Rodent", "Rodent", "Rod…
$ plot_type       &lt;chr&gt; "Control", "Long-term Krat Exclosure", "Control", "Rod…
spc_tbl_ [16,878 × 13] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
 $ record_id      : num [1:16878] 1 2 3 4 5 6 7 8 9 10 ...
 $ month          : num [1:16878] 7 7 7 7 7 7 7 7 7 7 ...
 $ day            : num [1:16878] 16 16 16 16 16 16 16 16 16 16 ...
 $ year           : num [1:16878] 1977 1977 1977 1977 1977 ...
 $ plot_id        : num [1:16878] 2 3 2 7 3 1 2 1 1 6 ...
 $ species_id     : chr [1:16878] "NL" "NL" "DM" "DM" ...
 $ sex            : chr [1:16878] "M" "M" "F" "M" ...
 $ hindfoot_length: num [1:16878] 32 33 37 36 35 14 NA 37 34 20 ...
 $ weight         : num [1:16878] NA NA NA NA NA NA NA NA NA NA ...
 $ genus          : chr [1:16878] "Neotoma" "Neotoma" "Dipodomys" "Dipodomys" ...
 $ species        : chr [1:16878] "albigula" "albigula" "merriami" "merriami" ...
 $ taxa           : chr [1:16878] "Rodent" "Rodent" "Rodent" "Rodent" ...
 $ plot_type      : chr [1:16878] "Control" "Long-term Krat Exclosure" "Control" "Rodent Exclosure" ...
 - attr(*, "spec")=
  .. cols(
  ..   record_id = col_double(),
  ..   month = col_double(),
  ..   day = col_double(),
  ..   year = col_double(),
  ..   plot_id = col_double(),
  ..   species_id = col_character(),
  ..   sex = col_character(),
  ..   hindfoot_length = col_double(),
  ..   weight = col_double(),
  ..   genus = col_character(),
  ..   species = col_character(),
  ..   taxa = col_character(),
  ..   plot_type = col_character()
  .. )
 - attr(*, "problems")=&lt;externalptr&gt; </code></pre>
</div>
<p>Looking over Mickey’s shoulder, Remy explains that the dataset is
made up of many individual rodent records (<code>record_id</code>). The
date of each record is given by the <code>month</code>,
<code>day</code>, and <code>year</code> columns.</p>
<p>The dataset includes data from a number of different study plots that
had different treatments applied: plot IDs are given by the
<code>plot_id</code> column, and the type of treatment is specified in
<code>plot_type</code>.</p>
<p>There is information about the <code>genus</code> and
<code>species</code> of each individual caught. There is a
<code>species_id</code> column that identifies the species of each
individual caught.</p>
<p>In addition, there is a column called <code>taxa</code> that contains
higher-level taxonomic information. Most of the observations are
rodents, but there are also some birds, rabbits, and reptiles.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">table</span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">taxa</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
   Bird  Rabbit Reptile  Rodent
    300      69       4   16148 </code></pre>
</div>
<p>For each individual caught, the field crew took <code>weight</code>,
<code>sex</code> and <code>hindfoot_length</code> measurements <em>when
possible</em>, so values are sometimes missing.</p>
<p>Overall, the dataset contains 16,878 rodent observations ranging
across years from 1977 through 1989.</p>
<p>With a clear understanding of the data, Mickey is now free to explore
on their own. However, Remy notices that Mickey still looks nervous and
decides to share a tool they recently found useful: a roadmap to getting
unstuck in R by making a reprex.</p>
<figure><img src="../fig/Roadmap_Aug25.svg" class="figure mx-auto d-block"></figure><p>Remy’s roadmap outlines four key steps for making a reprex. It is
also intended to help the user better understand their problem and
potentially find a solution along the way. Remy follows these steps any
time they get stuck while coding. Indeed, the first portion of the
roadmap, which Remy likes to call “code first aid,” includes preliminary
steps to help identify and diagnose the problem, such as determining the
type of error, reading function documentation, interpreting error
messages, and running through the code line by line.</p>
<p>Remy explains that sometimes, these first aid steps are enough to
solve code problems. But if not, the rest of the roadmap will lead
Mickey through strategies to better understand the problem and
demonstrate it to others in a minimal reproducible example
(“reprex”).</p>
<p>Remy emphasizes to Mickey that they are happy to keep helping, but
they will be very busy trying to finish writing their dissertation. If
Mickey can first follow the steps outlined in this roadmap, then Remy
can more easily help with whatever Mickey is struggling to resolve.</p>
<p>With an introduction to the dataset and a roadmap to guide them if
they get stuck, Mickey feels ready to start coding!</p>
<div id="accordionInstructor5" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor5" aria-expanded="false" aria-controls="collapseInstructor5">
  <h3 class="accordion-header" id="headingInstructor5">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor5" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor5" aria-labelledby="headingInstructor5">
<div class="accordion-body">
<p>Mickey feels ready–do your learners also feel ready? This could be a
good place to ask what questions they have :)</p>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>Throughout this lesson, we will be walking through a “roadmap” to
getting unstuck in R by creating a minimal reproducible example
(“reprex”).</li>
<li>A reprex is a simplified version of your problematic code that
clearly demonstrates the problem you are facing and will run on anyone’s
computer.</li>
<li>A reprex should contain only the minimum required to replicate the
problem from any device so that helpers can more easily tinker and debug
your code.</li>
<li>The process of building a reprex helps you better understand your
code, your data, and your problem so that you will often find the
solution yourself!</li>
<li>The <code>surveys</code> dataset includes records of rodents
captured in a variety of experimental plots over a 12-year period,
including some data about each rodent’s sex and morphology.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-2-identify-the-problem"><p>Content from <a href="2-identify-the-problem.html">Identify the problem and make a plan</a></p>
<hr>
<p>Last updated on 2025-08-26 |

        <a href="https://github.com/carpentries-incubator/R-help-reprexes/edit/main/episodes/2-identify-the-problem.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 70 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What do I do when I encounter an error?</li>
<li>What do I do when my code outputs something I don’t expect?</li>
<li>Why do errors and warnings appear in R?</li>
<li>How can I find which areas of code are responsible for errors?</li>
<li>How can I fix my code? What other options exist if I can’t fix
it?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<p>After completing this episode, participants should be able to…</p>
<ul>
<li>Describe how the desired code output differs from the actual
output</li>
<li>Categorize an error message (e.g. syntax error, semantic errors,
package-specific errors, etc.)</li>
<li>Describe what an error message is trying to communicate</li>
<li>Identify specific lines and/or functions generating the error
message</li>
<li>Use R Documentation to look up function syntax and examples</li>
<li>Quickly fix commonly-encountered R errors using ‘code first
aid’</li>
<li>Identify when a problem is better suited for asking for further
help, including making a <code>reprex</code>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Let’s take a look in more detail at the first step of the
roadmap.</p>
<figure><img src="../fig/01_identify_problem.png" class="figure mx-auto d-block"></figure><p>In this episode, we’ll cover what to do when you first encounter an
error or undesired output from your code. We’ll cover the basics of
identifying errors, fixing them if possible, and determining when to
create a reprex. At the end of the lesson, we’ll return to Mickey’s
analysis.</p>
<p>The first step in solving a problem is understanding what is going
wrong. Sometimes R will help you out by displaying an error message when
it is unable to run your code. This is a helpful diagnostic tool that,
when interpreted correctly, can quickly lead you to a solution. Other
times, R doesn’t encounter any problems running your code, but the
output is not what you expected. These problems may require a few extra
steps to properly diagnose. We will start with easier scenarios and
provide helpful “code first aid” steps as we build up to harder
challenges.</p>
<section><h2 class="section-heading" id="strategy-1-interpret-error-messages-and-change-function-inputs">Strategy 1: Interpret error messages and change function inputs<a class="anchor" aria-label="anchor" href="#strategy-1-interpret-error-messages-and-change-function-inputs"></a>
</h2>
<hr class="half-width">
<p>R will often let us know there’s a problem by displaying an error
message. An error that generates an error message is called a
<strong>syntax error</strong>. Error messages happen when R is not able
to run your code (this is in contrast to a <strong>warning</strong>
message, which gives a hint that something could be wrong while the code
keeps running). Error messages are sometimes straightforward, but other
times they can be very tricky to decipher. In this lesson, will teach
some tools for interpreting syntax errors for yourself.</p>
<p>Here’s an example error message. In the last episode, we saw that the
<code>taxa</code> column contains information about the higher-level
taxon of each organism caught, such as “Rodent” or “Bird”. We decide to
look at the distribution of taxa by creating a frequency table.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">table</span><span class="op">(</span><span class="va">taxa</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'taxa' not found</code></pre>
</div>
<p>This code produces an error. What’s going on?</p>
<p>R is telling us that it can’t find <code>taxa</code> in the local
environment. That’s because we haven’t told it where to look–recall that
<code>taxa</code> is the name of a column in the <code>surveys</code>
dataset.</p>
<p>The information from the error message doesn’t specifically tell us
how to solve the error, but it can help us realize what went wrong. In
this case, we can look back at our previous code and see that we were
able to point R to the column using the <code>$</code> operator:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">table</span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">taxa</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
   Bird  Rabbit Reptile  Rodent
    300      69       4   16148 </code></pre>
</div>
<p>That’s better! Now, let’s make a barplot of this column to show this
same information.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Make a plot of the different taxa in the rodents dataset</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">surveys</span><span class="op">$</span><span class="va">taxa</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu">geom_bar</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in `fortify()`:
! `data` must be a &lt;data.frame&gt;, or an object coercible by `fortify()`,
  or a valid &lt;data.frame&gt;-like object coercible by `as.data.frame()`, not a
  &lt;uneval&gt; object.
ℹ Did you accidentally pass `aes()` to the `data` argument?</code></pre>
</div>
<p>It seems like that should have worked, but we got another error
message, and this one seems harder to interpret. Once again, let’s go
over each part of the error message and see if it provides any
clues.</p>
<p>First, we see an error from a function called <code>fortify</code>,
which we didn’t even use! Then, there’s a more helpful informational
message: “Did you accidentally pass <code>aes()</code> to the
<code>data</code> argument?” This does seem to relate to our line of
code, as we do pass <code>aes</code> into the <code>ggplot</code>
function. But what is this “<code>data</code> argument?”</p>
</section><section><h2 class="section-heading" id="strategy-2-read-function-documentation">Strategy 2: Read function documentation<a class="anchor" aria-label="anchor" href="#strategy-2-read-function-documentation"></a>
</h2>
<hr class="half-width">
<p>Reading the error message gave us some clues, but it wasn’t enough to
fix the problem. Let’s try another strategy. Reading the function
documentation can improve our understanding of how the function works,
and often that can reveal problems with our code.</p>
<p>Let’s access the documentation for the function
<code>ggplot</code>:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">ggplot</span></span></code></pre>
</div>
<p>A Help window pops up in RStudio. [Add discussion of the different
sections of function documentation, in general terms, here?] The “Usage”
and “Arguments” sections tell us that ggplot takes the argument
<code>data</code>, followed by <code>mapping</code>, which uses
<code>aes()</code>. The “Arguments” section tells us that if the object
passed to that first <code>data</code> argument isn’t already a data
frame, ggplot will try to convert it to a data frame using
<code>fortify</code>. That function, <code>fortify</code>, sounds
familiar from the error message! This gives us an important clue. It
looks like we accidentally passed the <code>mapping</code> argument into
the position where ggplot expected <code>data</code> in the form of a
data frame.</p>
<p>The “Examples” section of the function documentation can be
particularly helpful because it shows how functions are used in context.
The “Examples” section in the <code>ggplot</code> documentation, under
“Pattern 1”, shows exactly how <code>ggplot</code> expects the
<code>data</code> and <code>mapping</code> arguments to be written.</p>
<p>Using this information, we can change our code to put the arguments
in the right order–first the name of the dataset for the
<code>data</code> argument, and then the <code>aes()</code> call for the
<code>mapping</code> argument.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">surveys</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">taxa</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu">geom_bar</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/2-identify-the-problem-rendered-unnamed-chunk-6-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>The error message is gone, and it works! Here we see our desired
plot. What do you notice about the data?</p>
<p><em>- Lots of rodents</em> <em>- Some missing values (NAs)</em></p>
<p>Let’s take a moment to highlight some patterns we’re starting to see
in the course of tinkering with our code.</p>
<p>First, we <strong>noticed a problem</strong>. In this case, the
problem was a <em>syntax error</em>, in which the code failed to run and
we got an error message.</p>
<p>We carefully <strong>read the error message</strong> and took a guess
at what might be wrong. We <strong>changed the inputs to the
function</strong> accordingly and tried again.</p>
<p>When we encountered another error message, we <strong>looked through
the function documentation</strong> to find more clues about how to fix
the error. This helped us see that we were missing an argument.</p>
<p>Another strategy we could have tried would be to copy and paste the
error message into a <strong>search engine or a generative LLM</strong>
for more interpretable explanations. And, when all else fails, we can
prepare our code into a reproducible example for expert help.</p>
<p>Let’s see if we can use the strategies we’ve learned so far to
address a new problem. Here they are, for reference:</p>
<div id="code-first-aid-strategies" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="code-first-aid-strategies" class="callout-inner">
<h3 class="callout-title">Code first aid strategies</h3>
<div class="callout-content">
<ul>
<li>Interpret error messages and tweak inputs</li>
<li>Look at the function documentation</li>
<li>Put the error message into a search engine or a generative LLM</li>
</ul>
</div>
</div>
</div>
<div id="exercise-1-applying-code-first-aid" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-1-applying-code-first-aid" class="callout-inner">
<h3 class="callout-title">Exercise 1: Applying code first aid</h3>
<div class="callout-content">
<p>Below we see an error message pop up when trying to quantify the
counts of <code>genus</code> and <code>species</code> in our dataset.
Which of the following interpretations of the error message most aptly
describes the problem (hint: look at the <code>?tally</code>
documentation if you’re stuck!)</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">surveys</span> <span class="op">%&gt;%</span> <span class="fu">tally</span><span class="op">(</span><span class="va">genus</span>, <span class="va">species</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in `tally()`:
ℹ In argument: `n = sum(genus, na.rm = TRUE)`.
Caused by error in `sum()`:
! invalid 'type' (character) of argument</code></pre>
</div>
<ol style="list-style-type: lower-alpha">
<li><p><code>tally</code> does not accept
<code>'type' (character)</code> arguments. We should change genus and
species to factors or numbers and run this line again.</p></li>
<li><p><code>tally</code> does not accept
<code>'type' (character)</code> arguments. There is no way to quantify
these data with this function.</p></li>
<li><p><code>tally</code> does not accept
<code>'type' (character)</code> arguments. We need to assign a weight
(e.g. 1) to each row so it knows how much to numerically weigh each
observation.</p></li>
<li><p><code>tally</code> does not accept
<code>'type' (character)</code> arguments. This function is not intended
to <code>group_by</code> two variables and a different function
(<code>count</code>) is required instead.</p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>d is the correct answer!</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">surveys</span> <span class="op">%&gt;%</span> <span class="fu">count</span><span class="op">(</span><span class="va">genus</span>, <span class="va">species</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 36 × 3
   genus            species             n
   &lt;chr&gt;            &lt;chr&gt;           &lt;int&gt;
 1 Ammospermophilus harrisi           136
 2 Amphispiza       bilineata         223
 3 Baiomys          taylori             3
 4 Calamospiza      melanocorys        13
 5 Callipepla       squamata           16
 6 Campylorhynchus  brunneicapillus    23
 7 Chaetodipus      penicillatus      382
 8 Crotalus         scutalatus          1
 9 Crotalus         viridis             1
10 Dipodomys        merriami         5675
# ℹ 26 more rows</code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="semantic-errors">Semantic errors<a class="anchor" aria-label="anchor" href="#semantic-errors"></a>
</h2>
<hr class="half-width">
<p>Let’s go back to our rodent analysis. We would like to subset the
data to include only the <code>Rodent</code> taxon (as opposed to the
other taxa included in the dataset: Bird, Rabbit, Reptile or NA). Let’s
quickly check to see how much data we’d be throwing out by doing so:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">table</span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">taxa</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
   Bird  Rabbit Reptile  Rodent
    300      69       4   16148 </code></pre>
</div>
<p>We’re interested in the rodents, and thankfully it seems like a
majority of our observations will be maintained when subsetting to
rodents. But wait… In the barplot above, we could clearly see that there
were some NA values. Why don’t we see them here?</p>
<p>This is a new type of problem, called a <strong>semantic
error</strong>: the R code ran without any error messages, but it
produced an unexpected output. Because there is no error message,
semantic errors can be sneaky and hard to notice!</p>
<p>We can’t use our first code first aid strategy here, since there is
no error message to read. So let’s jump straight to strategy 2,
<strong>reading the function documentation.</strong></p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">table</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Help on topic 'table' was found in the following packages:

  Package               Library
  vctrs                 /home/runner/.local/share/renv/cache/v5/linux-ubuntu-jammy/R-4.5/x86_64-pc-linux-gnu/vctrs/0.6.5/c03fa420630029418f7e6da3667aac4a
  base                  /home/runner/.cache/R/renv/sandbox/linux-ubuntu-jammy/R-4.5/x86_64-pc-linux-gnu/9a444a72


Using the first match ...</code></pre>
</div>
<p>The documentation for <code>table</code> provides some clues. The
“Usage” and “Arguments” sections show us an argument called
<code>useNA</code> that accepts “no”, “ifany”, and “always”, but it’s
not immediately apparent which one we should use to show our NA values.
When we look at “Examples”, we find something else that looks
helpful:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">table</span><span class="op">(</span><span class="va">a</span><span class="op">)</span>                 <span class="co"># does not report NA's</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">a</span>, exclude <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="co"># reports NA's</span></span></code></pre>
</div>
<p>Aha! So it looks like we can use <code>exclude = NULL</code> to
report NAs in our table. Let’s try that.</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">table</span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">taxa</span>, exclude <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
   Bird  Rabbit Reptile  Rodent    &lt;NA&gt;
    300      69       4   16148     357 </code></pre>
</div>
<p>Problem solved! Now the NA values show up in the table. We see that
by subsetting to the “Rodent” taxa, we would losing about 357 NAs, which
themselves could be rodents! However, in this case, it seems a small
enough portion to safely omit. Let’s subset our data to the rodent
taxon.</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Just rodents</span></span>
<span><span class="va">rodents</span> <span class="op">&lt;-</span> <span class="va">surveys</span> <span class="op">%&gt;%</span> <span class="fu">filter</span><span class="op">(</span><span class="va">taxa</span> <span class="op">==</span> <span class="st">"Rodent"</span><span class="op">)</span></span></code></pre>
</div>
<div id="exercise-2-syntax-vs.-semantic-errors" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-2-syntax-vs.-semantic-errors" class="callout-inner">
<h3 class="callout-title">Exercise 2: Syntax vs. semantic errors</h3>
<div class="callout-content">
<p>There are 3 lines of code below, and each attempts to create the same
plot. Identify which produces a syntax error, which produces a semantic
error, and which correctly creates the plot (hint: this may require you
inferring what type of graph we’re trying to create!)</p>
<ol style="list-style-type: upper-alpha">
<li><p><code>ggplot(rodents) + geom_bin_2d(aes(month, plot_type))</code></p></li>
<li><p><code>ggplot(rodents) + geom_tile(aes(month, plot_type), stat = "count")</code></p></li>
<li><p><code>ggplot(rodents) + geom_tile(aes(month, plot_type))</code></p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>In this case, A correctly creates the graph, plotting as colors in
the tile the number of times an observation is seen. It essentially runs
the following lines of code:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rodents_summary</span> <span class="op">&lt;-</span> <span class="va">rodents</span> <span class="op">%&gt;%</span> <span class="fu">group_by</span><span class="op">(</span><span class="va">plot_type</span>, <span class="va">month</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">summarize</span><span class="op">(</span>count<span class="op">=</span><span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`summarise()` has grouped output by 'plot_type'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span><span class="va">rodents_summary</span><span class="op">)</span> <span class="op">+</span> <span class="fu">geom_tile</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">month</span>, <span class="va">plot_type</span>, fill<span class="op">=</span><span class="va">count</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/2-identify-the-problem-rendered-unnamed-chunk-13-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>B is a syntax error, and will produce the following error:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span><span class="va">rodents</span><span class="op">)</span> <span class="op">+</span> <span class="fu">geom_tile</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">month</span>, <span class="va">plot_type</span><span class="op">)</span>, stat <span class="op">=</span> <span class="st">"count"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in `geom_tile()`:
! Problem while computing stat.
ℹ Error occurred in the 1st layer.
Caused by error in `setup_params()`:
! `stat_count()` must only have an x or y aesthetic.</code></pre>
</div>
<p>Finally, C is a semantic error. It does produce a plot, which is
rather meaningless:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span><span class="va">rodents</span><span class="op">)</span> <span class="op">+</span> <span class="fu">geom_tile</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">month</span>, <span class="va">plot_type</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/2-identify-the-problem-rendered-unnamed-chunk-15-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<p>The steps to identifying the problem and in <strong>code first
aid</strong> matches what we’ve seen above. However, here seeing the
problem arise in our code may be much more subtle, and comes from us
recognizing output we don’t expect or know to be wrong. Even if the code
is run, R may give us <strong>warning</strong> or informational messages
which pop up when executing your code. Most of the time, however, it’s
up to the coder to be vigilant and be sure steps are running as they
should. Interpreting the problem may also be more difficult as R gives
us little or no indication about how it’s misinterpreting our
intent.</p>
<div id="callout2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div class="callout-inner">
<div class="callout-content">
<p>Generally, the more your code deviates from just using base R
functions, or the more you use specific packages, both the quality of
documentation and online help available from search engines and Googling
gets worse and worse. While base R errors will often be solvable in a
couple of minutes from a quick <code>?help</code> check or a long online
discussion and solutions on a website like Stack Overflow, errors
arising from little-used packages applied in bespoke analyses might
merit isolating your specific problem to a reproducible example for
online help, or even getting in touch with the developers! Such
community input and questions are often the way packages and
documentation improves over time.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="identifying-the-problem">Identifying the problem<a class="anchor" aria-label="anchor" href="#identifying-the-problem"></a>
</h2>
<hr class="half-width">
<p>In the previous section, it was evident which function was causing a
syntax or semantic error. But sometimes, identifying the problem may be
trickier. It may be difficult to determine which lines or sections of
code are producing the error.</p>
<p>Let’s take a look at another code example. Our goal: to see
<strong>which k-rat species appear in different plot types over the
years</strong>.</p>
<div id="accordionInstructor1" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor1" aria-expanded="false" aria-controls="collapseInstructor1">
  <h3 class="accordion-header" id="headingInstructor1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor1" class="accordion-collapse collapse" aria-labelledby="headingInstructor1" data-bs-parent="#accordionInstructor1">
<div class="accordion-body">
<p>The misspelling of “Dipodomys” below is deliberate!</p>
</div>
</div>
</div>
</div>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example: identifying a more complex error</span></span>
<span></span>
<span><span class="co"># Just k-rats</span></span>
<span><span class="va">krats</span> <span class="op">&lt;-</span> <span class="va">rodents</span> <span class="op">%&gt;%</span> <span class="fu">filter</span><span class="op">(</span><span class="va">genus</span> <span class="op">==</span> <span class="st">"Dipadomys"</span><span class="op">)</span> <span class="co">#filter the dataset to just include the kangaroo rat genus</span></span>
<span></span>
<span><span class="co"># plot a histogram of how many observations are seen in each plot type over an x axis of years.</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="va">krats</span>, <span class="fu">aes</span><span class="op">(</span><span class="va">year</span>, fill <span class="op">=</span> <span class="va">plot_type</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_histogram</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span><span class="va">species</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in `combine_vars()`:
! Faceting variables must have at least one value.</code></pre>
</div>
<p>Uh-oh. Another error here, when we try to make a ggplot. But what is
“combine_vars?” And then: “Faceting variables must have at least one
value” What does that mean?</p>
<p>This is not an easily interpretable error message from
<code>ggplot</code>, and our code looks like it <em>should</em> run.
This time we put the <code>data</code> argument in the right place, we
included <code>aes()</code>, and we didn’t misspell anything.</p>
<p>Considering this chunk of code, let’s take a step back. Is it
possible that we’re looking at the wrong code? What if the error isn’t
in the ggplot code itself? Let’s look at the <code>krats</code> dataset
to make sure it looks normal.</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">krats</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="co"># A tibble: 0 × 13</span></span>
<span><span class="co"># ℹ 13 variables: record_id &lt;dbl&gt;, month &lt;dbl&gt;, day &lt;dbl&gt;, year &lt;dbl&gt;,</span></span>
<span><span class="co">#   plot_id &lt;dbl&gt;, species_id &lt;chr&gt;, sex &lt;chr&gt;, hindfoot_length &lt;dbl&gt;,</span></span>
<span><span class="co">#   weight &lt;dbl&gt;, genus &lt;chr&gt;, species &lt;chr&gt;, taxa &lt;chr&gt;, plot_type &lt;chr&gt;</span></span></code></pre>
</div>
<p>It’s empty! Something must have gone wrong not with
<code>ggplot</code>, but with the code we used to create the
<code>krats</code> object.</p>
</section><section><h2 class="section-heading" id="strategy-4-using-print-to-show-information">Strategy 4: Using <code>print()</code> to show information<a class="anchor" aria-label="anchor" href="#strategy-4-using-print-to-show-information"></a>
</h2>
<hr class="half-width">
<p>We can use a <code>print</code> statement to see which genera are
included in the original <code>rodents</code> dataset.</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">print</span><span class="op">(</span><span class="va">rodents</span> <span class="op">%&gt;%</span> <span class="fu">count</span><span class="op">(</span><span class="va">genus</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 12 × 2
   genus                n
   &lt;chr&gt;            &lt;int&gt;
 1 Ammospermophilus   136
 2 Baiomys              3
 3 Chaetodipus        382
 4 Dipodomys         9573
 5 Neotoma            904
 6 Onychomys         1656
 7 Perognathus        553
 8 Peromyscus        1271
 9 Reithrodontomys   1412
10 Rodent               4
11 Sigmodon           103
12 Spermophilus       151</code></pre>
</div>
<p>This tells us two things. For one, we noticed that we have misspelled
<em>Dipodomys</em>, which we can now fix.</p>
<p>Our <code>print()</code> call also tells us that we should expect a
data frame with 9573 values after subsetting to the genus
<em>Dipodomys</em>. This will be useful to check our work after fixing
the misspelling.</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example: identifying a more complex error</span></span>
<span></span>
<span><span class="co"># Just k-rats</span></span>
<span><span class="va">krats</span> <span class="op">&lt;-</span> <span class="va">rodents</span> <span class="op">%&gt;%</span> <span class="fu">filter</span><span class="op">(</span><span class="va">genus</span> <span class="op">==</span> <span class="st">"Dipodomys"</span><span class="op">)</span> <span class="co">#filter the dataset to just include the kangaroo rat genus (fixed misspelling)</span></span>
<span></span>
<span><span class="co"># check dimensions of krats</span></span>
<span><span class="fu">dim</span><span class="op">(</span><span class="va">krats</span><span class="op">)</span> <span class="co"># 9573, as expected!</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 9573   13</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># plot a histogram of how many observations are seen in each plot type over an x axis of years.</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="va">krats</span>, <span class="fu">aes</span><span class="op">(</span><span class="va">year</span>, fill <span class="op">=</span> <span class="va">plot_type</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_histogram</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span><span class="va">species</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<figure><img src="../fig/2-identify-the-problem-rendered-unnamed-chunk-19-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Our improved code here looks good. Checking the dimensions of our
subsetted data frame using <code>dim()</code> function confirms we now
have all the <em>Dipodomys</em> observations, and our plot is looking
better.</p>
<p>Routinely printing out information about your dataset can be a good
way to check that your intermediate results make sense.</p>
</section><section><h2 class="section-heading" id="summary-code-first-aid">Summary: Code first aid<a class="anchor" aria-label="anchor" href="#summary-code-first-aid"></a>
</h2>
<hr class="half-width">
<p>Let’s update our list of code first aid strategies:</p>
<div id="code-first-aid-strategies-detailed-version" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="code-first-aid-strategies-detailed-version" class="callout-inner">
<h3 class="callout-title">Code first aid strategies, detailed
version</h3>
<div class="callout-content">
<ol start="0" style="list-style-type: decimal">
<li>Identify the problem area</li>
</ol>
<ul>
<li>add print statements immediately upstream or downstream of problem
areas</li>
<li>check the desired output from functions</li>
<li>see whether any intermediate output can be further isolated and
examined separately</li>
</ul>
<ol style="list-style-type: decimal">
<li>Act on parts of the error we can understand</li>
</ol>
<ul>
<li>interpreting error messages</li>
<li>changing input to a function</li>
<li>checking on the control flow of code (e.g. for loops, if/else)</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>Reading the R documentation for relevant functions</li>
</ol>
<ul>
<li>reading the documentation’s <strong>Description</strong>,
<strong>Usage</strong>, <strong>Arguments</strong>,
<strong>Details</strong>
</li>
<li>testing out code from the <strong>Examples</strong> section</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>Quick online help with a search engine / generative LLM</li>
</ol>
<ul>
<li>Copying error messages for more interpretable explanations</li>
<li>Describing your error in the hopes of an already-solved
solution</li>
<li>Seeing if an LLM generates equivalent error-free code solving the
same goal</li>
</ul>
</div>
</div>
</div>
<p>We can now understand these steps as a continuous cycle of zeroing in
on the problem more and more precisely. Whenever one of the first aid
steps helps us identify a part of the code that is failing, we can zoom
in on that piece of code and restart the checklist.</p>
<p>If the first aid steps are enough to solve the problem, great! If
not, we can stop trying once we get stuck or don’t understand anymore
how the code is failing. At that point, we can isolate the specific code
area and use it to create a reprex in order to get help from someone
else. <strong>We’ll delve more into the process of creating a reprex in
the next episode.</strong></p>
<div id="exercise-3-isolating-the-problem" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-3-isolating-the-problem" class="callout-inner">
<h3 class="callout-title">Exercise 3: Isolating the problem</h3>
<div class="callout-content">
<p>The following lines of code are not working correctly.</p>
<p>A. What type of error is this? B. Using the toolbox of code first aid
strategies, can you isolate the problem area?</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Goal: run a chi square test to see whether kangaroo rat observations in the `control` plot type differ significantly between different plot_ids (hopefully not!)</span></span>
<span></span>
<span><span class="va">control_plot_data</span> <span class="op">&lt;-</span>  <span class="va">krats</span> <span class="op">%&gt;%</span> <span class="fu">filter</span><span class="op">(</span><span class="va">plot_type</span> <span class="op">==</span> <span class="st">"Control"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">n_control_plots</span> <span class="op">&lt;-</span> <span class="fu">length</span><span class="op">(</span><span class="va">control_plot_data</span><span class="op">$</span><span class="va">plot_id</span><span class="op">)</span></span>
<span><span class="va">exp_proportions</span> <span class="op">&lt;-</span> <span class="fu">rep</span><span class="op">(</span><span class="fl">1</span><span class="op">/</span><span class="va">n_control_plots</span>, <span class="va">n_control_plots</span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot_counts</span> <span class="op">&lt;-</span> <span class="va">control_plot_data</span> <span class="op">%&gt;%</span> <span class="fu">group_by</span><span class="op">(</span><span class="va">plot_id</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">summarize</span><span class="op">(</span>n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Chisq test -- do count values vary significantly by plot id? </span></span>
<span></span>
<span><span class="fu">chisq.test</span><span class="op">(</span><span class="va">plot_counts</span><span class="op">$</span><span class="va">n</span>, p <span class="op">=</span> <span class="va">exp_proportions</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in chisq.test(plot_counts$n, p = exp_proportions): 'x' and 'p' must have the same number of elements</code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>An isolated version of the problem area might look like:</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">n_control_plots</span> <span class="op">&lt;-</span> <span class="fu">length</span><span class="op">(</span><span class="va">control_plot_data</span><span class="op">$</span><span class="va">plot_id</span><span class="op">)</span></span>
<span><span class="va">exp_proportions</span> <span class="op">&lt;-</span> <span class="fu">rep</span><span class="op">(</span><span class="fl">1</span><span class="op">/</span><span class="va">n_control_plots</span>, <span class="va">n_control_plots</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Chisq test -- do count values vary significantly by plot id? </span></span>
<span></span>
<span><span class="fu">chisq.test</span><span class="op">(</span><span class="va">plot_counts</span><span class="op">$</span><span class="va">n</span>, p <span class="op">=</span> <span class="va">exp_proportions</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in chisq.test(plot_counts$n, p = exp_proportions): 'x' and 'p' must have the same number of elements</code></pre>
</div>
<p>If we decide to move the plot_counts line right after the first
control_plot_data line, as plot_counts seems to be calculated correctly.
Here, we can see there’s probably something wrong with the
<code>p</code> argument: exp_proportions is very long, much longer than
the number of control plots! Let’s solve the problem.</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">n_control_plots</span> <span class="op">&lt;-</span> <span class="fu">length</span><span class="op">(</span><span class="fu">unique</span><span class="op">(</span><span class="va">control_plot_data</span><span class="op">$</span><span class="va">plot_id</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">exp_proportions</span> <span class="op">&lt;-</span> <span class="fu">rep</span><span class="op">(</span><span class="fl">1</span><span class="op">/</span><span class="va">n_control_plots</span>, <span class="va">n_control_plots</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Chisq test -- do count values vary significantly by plot id? </span></span>
<span></span>
<span><span class="fu">chisq.test</span><span class="op">(</span><span class="va">plot_counts</span><span class="op">$</span><span class="va">n</span>, p <span class="op">=</span> <span class="va">exp_proportions</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
	Chi-squared test for given probabilities

data:  plot_counts$n
X-squared = 79.977, df = 7, p-value = 1.392e-14</code></pre>
</div>
<p>We can see that some plots have significantly more or fewer counts
than others! Observations of kangaroo rats are not random – rather, some
plots seem to attract the kangaroo rats more than others.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="when-should-i-prepare-my-code-for-a-reprex">When should I prepare my code for a reprex?<a class="anchor" aria-label="anchor" href="#when-should-i-prepare-my-code-for-a-reprex"></a>
</h2>
<hr class="half-width">
<p>If you’ve isolated the problem area and tried using <strong>code
first aid</strong> strategies, but the error persists, it may be time to
get some help.</p>
<p>In a classroom setting, we may be used to raising our hand, pointing
at our code, and saying “I’m not sure what’s wrong.” But outside of the
classroom, helpers have limited time, bandwidth, and requisite knowledge
to help. That’s why reproducing the problem with a <strong>reproducible
example</strong> is an essential skill to getting unstuck: it allows you
to ask for expert help with a problem that’s clearly identified,
self-contained, and reproducible, and allows the expert to quickly see
whether they’ve got the requisite skills to answer your question!</p>
</section><section><h2 class="section-heading" id="back-to-our-analysis-mickey-tries-to-get-unstuck">Back to our analysis: Mickey tries to get unstuck<a class="anchor" aria-label="anchor" href="#back-to-our-analysis-mickey-tries-to-get-unstuck"></a>
</h2>
<hr class="half-width">
<p>Back in the lab, Mickey is happily coding along, exploring the data.
Let’s follow their analysis and see how they use code first aid and
prepare the code for a reprex.</p>
<p>Mickey is interested in understanding how kangaroo rat weights differ
across species and sexes, so they create a quick visualization.</p>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Barplot of rodent species by sex</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="va">surveys</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">species</span>, fill <span class="op">=</span> <span class="va">sex</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/2-identify-the-problem-rendered-unnamed-chunk-23-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Whoa, this is really overwhelming! Mickey forgot that the dataset
includes data for a lot of different species, not just kangaroo rats.
Mickey is only interested in two kangaroo rat species: <em>Dipodomys
ordii</em> (Ord’s kangaroo rat) and <em>Dipodomys spectabilis</em>
(Banner-tailed kangaroo rat).</p>
<p>Mickey also notices that there are three categories for sex: F, M,
and what looks like a blank field when there is no sex information
available. For the purposes of comparing weights, Mickey wants to focus
only rodents of known sex.</p>
<p>Mickey filters the data to include only the two focal species and
only rodents whose sex is F or M.</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Filter to focal species and known sex</span></span>
<span><span class="va">rodents_subset</span> <span class="op">&lt;-</span> <span class="va">surveys</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">species</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"ordii"</span>, <span class="st">"spectabilis"</span><span class="op">)</span>,</span>
<span>         <span class="va">sex</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"F"</span>, <span class="st">"M"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>Because these scientific names are long, Mickey also decides to add
common names to the dataset. They start by creating a data frame with
the common names, which they will then join to the
<code>rodents_subset</code> dataset:</p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add common names</span></span>
<span><span class="va">common_names</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span>species <span class="op">=</span> <span class="fu">unique</span><span class="op">(</span><span class="va">rodents_subset</span><span class="op">$</span><span class="va">species</span><span class="op">)</span>, common_name <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"Ord's"</span>, <span class="st">"Banner-tailed"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">common_names</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>      species   common_name
1 spectabilis         Ord's
2       ordii Banner-tailed</code></pre>
</div>
<p>But looking at the <code>common names</code> dataset reveals a
problem! The common names are not properly matched to the scientific
names. For example, the genus <em>Ordii</em> should correspond to Ord’s
kangaroo rat, but currently, it is matched with the Banner-tailed
kangaroo rat instead.</p>
<div id="discussion1" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div class="callout-inner">
<h3 class="callout-title">Challenge</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>Is this a syntax error or a semantic error? Explain why.</li>
<li>What “code first aid” steps might be appropriate here? Which ones
are unlikely to be helpful?</li>
</ol>
</div>
</div>
</div>
<p>Mickey re-orders the names and tries the code again. This time, it
works! The common names are joined to the correct scientific names.
Mickey joins the common names to <code>rodents_subset</code>.</p>
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Try again, re-ordering the common names</span></span>
<span><span class="va">common_names</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span>species <span class="op">=</span> <span class="fu">sort</span><span class="op">(</span><span class="fu">unique</span><span class="op">(</span><span class="va">rodents_subset</span><span class="op">$</span><span class="va">species</span><span class="op">)</span><span class="op">)</span>, common_name <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"Ord's"</span>, <span class="st">"Banner-Tailed"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">rodents_subset</span> <span class="op">&lt;-</span> <span class="fu">left_join</span><span class="op">(</span><span class="va">rodents_subset</span>, <span class="va">common_names</span>, by <span class="op">=</span> <span class="st">"species"</span><span class="op">)</span></span></code></pre>
</div>
<p>Now, Mickey is ready to start learning about kangaroo rat weights.
They start by running a quick linear regression to predict
<code>weight</code> based on <code>species</code> and
<code>sex</code>.</p>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Explore k-rat weights</span></span>
<span><span class="va">weight_model</span> <span class="op">&lt;-</span> <span class="fu">lm</span><span class="op">(</span><span class="va">weight</span> <span class="op">~</span> <span class="va">species</span> <span class="op">+</span> <span class="va">sex</span>, data <span class="op">=</span> <span class="va">rodents_subset</span><span class="op">)</span></span>
<span><span class="fu">summary</span><span class="op">(</span><span class="va">weight_model</span><span class="op">)</span> </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
Call:
lm(formula = weight ~ species + sex, data = rodents_subset)

Residuals:
     Min       1Q   Median       3Q      Max
-109.531   -7.991    3.239   11.469   48.469

Coefficients: (1 not defined because of singularities)
                   Estimate Std. Error t value Pr(&gt;|t|)
(Intercept)          47.991      1.136   42.23   &lt;2e-16 ***
speciesspectabilis   73.540      1.420   51.79   &lt;2e-16 ***
sexM                     NA         NA      NA       NA
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 20.58 on 910 degrees of freedom
  (31 observations deleted due to missingness)
Multiple R-squared:  0.7466,	Adjusted R-squared:  0.7464
F-statistic:  2682 on 1 and 910 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<p>The negative coefficient for <code>common_nameOrd's</code> tells
Mickey that Ord’s kangaroo rats are significantly less heavy than
Banner-tailed kangaroo rats.</p>
<p>But something is wrong with the coefficients for sex. Why are there
NA values for <code>sexM</code>? Let’s directly visualize weight by
species and sex to see.</p>
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Weight by species and sex</span></span>
<span><span class="va">rodents_subset</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">weight</span>, x <span class="op">=</span> <span class="va">species</span>, fill <span class="op">=</span> <span class="va">sex</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_boxplot</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">WARNING<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="warning" tabindex="0"><code>Warning: Removed 31 rows containing non-finite outside the scale range
(`stat_boxplot()`).</code></pre>
</div>
<figure><img src="../fig/2-identify-the-problem-rendered-unnamed-chunk-28-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>When Mickey visualizes the data, they see a problem in the graph,
too. As the model showed, Ord’s kangaroo rats are significantly smaller
than Banner-tailed kangaroo rats. But something is definitely wrong!
Because the boxes are colored by sex, we can see that all of the
Banner-tailed kangaroo rats are male and all of the Ord’s kangaroo rats
are female. That can’t be right! What are the chances of catching all
one sex for two different species?</p>
<p>To verify that the problem comes from the data, not from the plot
code, Mickey creates a two-way frequency table, which confirms that
there are no observations of female <em>spectabilis</em> or male
<em>ordii</em> in <code>rodents_subset</code>. Something definitely
seems wrong. Those rows should not be missing.</p>
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Subsetted dataset</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">rodents_subset</span><span class="op">$</span><span class="va">sex</span>, <span class="va">rodents_subset</span><span class="op">$</span><span class="va">species</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
    ordii spectabilis
  F   333           0
  M     0         610</code></pre>
</div>
<p>To double check, Mickey looks at the original dataset.</p>
<div class="codewrapper sourceCode" id="cb54">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Original dataset</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">rodents</span><span class="op">$</span><span class="va">sex</span>, <span class="va">rodents</span><span class="op">$</span><span class="va">species</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
    albigula eremicus flavus fulvescens fulviventer harrisi hispidus
  F      474      372    222         46           3       0       68
  M      368      468    302         16           2       0       42

    leucogaster maniculatus megalotis merriami ordii penicillatus  sp.
  F         373         160       637     2522   690          221    4
  M         397         248       680     3108   792          155    5

    spectabilis spilosoma taylori torridus
  F        1135         1       0      390
  M        1232         1       3      441</code></pre>
</div>
<p>Not only were there originally males and females present from both
<em>ordii</em> and <em>spectabilis</em>, but the original numbers were
way, way higher! It looks like somewhere along the way, Mickey lost a
lot of observations.</p>
<p>While we don’t have the time today, let’s assume Mickey worked their
way through the code first aid steps, but weren’t able to solve the
problem.</p>
<p>They decide to return to Remy’s road map to figure out what to do
next.</p>
<figure><img src="../fig/Roadmap_Aug25.svg" class="figure mx-auto d-block"></figure><p>Since code first aid was not enough to solve this problem, it looks
like it’s time to ask for help using a <em>reprex</em>.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>The first step to getting unstuck is identifying a problem,
isolating the problem area, and interpreting the problem</li>
<li>Often, using “code first aid” – acting on error messages, looking at
data, inputs, etc., pulling up documentation, asking a search engine or
LLM, can help us to quickly fix the error on our own.</li>
<li>If code first aid doesn’t work, we can ask for help and prepare a
reproducible example (reprex) with a defined problem and isolated
code</li>
<li>We’ll cover future steps to prepare a reproducible example (reprex)
in future episodes.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-3-minimal-reproducible-code"><p>Content from <a href="3-minimal-reproducible-code.html">Minimal reproducible code</a></p>
<hr>
<p>Last updated on 2025-08-26 |

        <a href="https://github.com/carpentries-incubator/R-help-reprexes/edit/main/episodes/3-minimal-reproducible-code.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 75 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>Why is it important to make a minimal code example?</li>
<li>Which part of my code is causing the problem?</li>
<li>Which parts of my code should I include in a minimal example?</li>
<li>How can I tell whether a code snippet is reproducible or not?</li>
<li>How can I make my code reproducible?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain the value of a minimal code snippet.</li>
<li>Identify packages or other dependencies needed to run the code.</li>
<li>Simplify a script down to a minimal code example.</li>
<li>Evaluate whether a piece of code is reproducible as is or not. If
not, identify what is missing.</li>
<li>Edit a piece of code to make it reproducible</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>When we left off in the previous episode, Mickey had discovered a
problem with their code–many kangaroo rat observations were missing from
a subset of the data after they filtered the dataset down to the
kangaroo rat species of interest.</p>
<p>Mickey tried some code first aid steps but wasn’t able to solve the
problem. They consulted Remy’s road map and saw that the next step is to
make a reprex.</p>
<div class="section level1">
<h1 id="making-a-reprex">Making a reprex<a class="anchor" aria-label="anchor" href="#making-a-reprex"></a>
</h1>
<figure><img src="../fig/02_minimize_code.png" class="figure mx-auto d-block"></figure><div class="section level2">
<h2 id="step-1-minimize-the-code">Step 1: Minimize the code<a class="anchor" aria-label="anchor" href="#step-1-minimize-the-code"></a>
</h2>
<p>Mickey has written a lot of code so far. The code is also a little
messy–for example, after fixing the previous errors, they sometimes
commented out the old code and kept it for future reference.</p>
<p>Let’s take a look at the script as it stands so far.</p>
<div id="accordionInstructor1" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor1" aria-expanded="false" aria-controls="collapseInstructor1">
  <h3 class="accordion-header" id="headingInstructor1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor1" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor1" aria-labelledby="headingInstructor1">
<div class="accordion-body">
<p>Share this file with learners and/or have them copy/paste it exactly
into their RStudio sessions–do not try to re-type all this code line by
line! There definitely will not be time.</p>
</div>
</div>
</div>
</div>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Minimal reproducible example script</span></span>
<span><span class="co"># Loading the tidyverse package</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span>
<span><span class="co"># Uploading the dataset that is currently saved in the project's data folder</span></span>
<span><span class="va">surveys</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"data/surveys_complete_77_89.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Take a look at the data</span></span>
<span><span class="fu">glimpse</span><span class="op">(</span><span class="va">surveys</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># or you can use</span></span>
<span><span class="fu">str</span><span class="op">(</span><span class="va">surveys</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">taxa</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Barplot of rodent species by sex</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="va">rodents</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">species</span>, fill <span class="op">=</span> <span class="va">sex</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Filter to focal species and known sex</span></span>
<span><span class="va">rodents_subset</span> <span class="op">&lt;-</span> <span class="va">surveys</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">species</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"ordii"</span>, <span class="st">"spectabilis"</span><span class="op">)</span>,</span>
<span>         <span class="va">sex</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"F"</span>, <span class="st">"M"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add common names</span></span>
<span><span class="co"># common_names &lt;- data.frame(species = unique(rodents_subset$species), common_name = c("Ord's", "Banner-tailed"))</span></span>
<span><span class="co"># common_names</span></span>
<span></span>
<span><span class="co"># Try again, re-ordering the common names</span></span>
<span><span class="va">common_names</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span>species <span class="op">=</span> <span class="fu">sort</span><span class="op">(</span><span class="fu">unique</span><span class="op">(</span><span class="va">rodents_subset</span><span class="op">$</span><span class="va">species</span><span class="op">)</span><span class="op">)</span>, common_name <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"Ord's"</span>, <span class="st">"Banner-Tailed"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">rodents_subset</span> <span class="op">&lt;-</span> <span class="fu">left_join</span><span class="op">(</span><span class="va">rodents_subset</span>, <span class="va">common_names</span>, by <span class="op">=</span> <span class="st">"species"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Explore k-rat weights</span></span>
<span><span class="va">weight_model</span> <span class="op">&lt;-</span> <span class="fu">lm</span><span class="op">(</span><span class="va">weight</span> <span class="op">~</span> <span class="va">species</span> <span class="op">+</span> <span class="va">sex</span>, data <span class="op">=</span> <span class="va">rodents_subset</span><span class="op">)</span></span>
<span><span class="fu">summary</span><span class="op">(</span><span class="va">weight_model</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Weight by species and sex</span></span>
<span><span class="va">rodents_subset</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">weight</span>, x <span class="op">=</span> <span class="va">species</span>, fill <span class="op">=</span> <span class="va">sex</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_boxplot</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Subsetted dataset</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">rodents_subset</span><span class="op">$</span><span class="va">sex</span>, <span class="va">rodents_subset</span><span class="op">$</span><span class="va">species</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Original dataset</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">sex</span>, <span class="va">surveys</span><span class="op">$</span><span class="va">species</span><span class="op">)</span></span></code></pre>
</div>
<div id="exercise-1-reflection" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="exercise-1-reflection" class="callout-inner">
<h3 class="callout-title">Exercise 1: Reflection</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li><p>As you look at this script and think through trying to debug it,
how do you feel?</p></li>
<li><p>Mickey’s first instinct is to send the script to Remy and tell
them about the error. Imagine that you are Remy, an advanced graduate
student whose priority is finishing your dissertation. Your new labmate
Mickey has just sent you this script, asking for help debugging it. How
do you feel when you get Mickey’s email? What advice might you give
Mickey?</p></li>
</ol>
</div>
</div>
</div>
<p>When asking someone else for help, it is important to simplify your
code as much as possible to make it easier for the helper to understand
what is wrong. Simplifying code helps to reduce frustration and
overwhelm when debugging an error in a complicated script. The more that
we can make the process of helping easy and painless for the helper, the
more likely it is that they will take the time to help.</p>
<div class="section level3">
<h3 id="create-a-new-script">Create a new script<a class="anchor" aria-label="anchor" href="#create-a-new-script"></a>
</h3>
<p>Why do you think it’s a good idea to create a new script?</p>
<p>To make the task of simplifying the code less overwhelming, let’s
create a separate script for our reprex. This will let us experiment
with simplifying our code while keeping the original script intact.</p>
<p>Let’s create and save a new, blank R script and give it a name, such
as “reprex-script.R”</p>
<div id="making-an-r-script" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="making-an-r-script" class="callout-inner">
<h3 class="callout-title">Making an R script</h3>
<div class="callout-content">
<p>There are several ways to make an R script:</p>
<ul>
<li>File &gt; New File &gt; R Script</li>
<li>Click the white square with a green plus sign at the top left corner
of your RStudio window</li>
<li>Use a keyboard shortcut: Cmd + Shift + N (on a Mac) or Ctrl + Shift
+ N (on Windows)</li>
</ul>
</div>
</div>
</div>
<p>Let’s go ahead and copy over all of our code so we have an exact copy
of the full analysis script. This way, we can make as many changes to it
as we want and still keep the original code untouched.</p>
<p>Now, we will follow an iterative process to simplify our script.</p>
<p>A. Identify the symptom of the problem. <em>What are you observing
that shows you something is wrong?</em></p>
<p>B. Remove some code that is not central to demonstrating the
problem.</p>
<p>C. Run the simplified code and make sure that the symptom is still
present. <em>Does your example still reproduce the problem?</em></p>
</div>
<div class="section level3">
<h3 id="a--identify-a-symptom-of-the-problem">A. Identify a symptom of the problem<a class="anchor" aria-label="anchor" href="#a--identify-a-symptom-of-the-problem"></a>
</h3>
<p>Let’s figure out which line of code, when you run it, <em>clearly
shows that something is wrong</em>. For a syntax error, this is
straightforward: it’s the line of code that generates the error message.
But our error here is a semantic error. The code runs, but it returns
the wrong result. So let’s think instead about what line of code created
a result that we could clearly see was incorrect.</p>
<p>This is a little tricky in our case, because we first noticed
something was wrong when we looked at the output of the linear model.
That model output could be a perfectly reasonable symptom to use!</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">summary</span><span class="op">(</span><span class="va">weight_model</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'weight_model' not found</code></pre>
</div>
<p>But let’s not discount the work we’ve already done to diagnose this
problem! Something looked strange about this model, so we made a plot.
Something looked strange about the plot, so we double checked the
dataset used to create both the model and the plot. By comparing that
dataset with the original, un-subsetted data, we were able to determine
that something was wrong.</p>
<p>To summarize, we have already determined:</p>
<p><strong>The problem:</strong> There are many observations missing
from <code>rodents_subset</code> that should not have been removed.</p>
<p><strong>The symptom (lines that show that something is
wrong):</strong> Comparison between the species and sex counts in the
original and subsetted datasets.</p>
<p>In particular, this comparison shows us that there are no
observations of female <em>spectabilis</em> or male <em>ordii</em> in
<code>rodents_subset</code>, but there <em>were</em> plenty in the
original dataset, and that in general, there were many fewer rows for
both species in the subset than the original.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Subsetted dataset</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">rodents_subset</span><span class="op">$</span><span class="va">sex</span>, <span class="va">rodents_subset</span><span class="op">$</span><span class="va">species</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'rodents_subset' not found</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Original dataset</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">sex</span>, <span class="va">surveys</span><span class="op">$</span><span class="va">species</span><span class="op">)</span> <span class="co"># there are no observations of female spectabilis or male ordii in `rodents_subset`, even though there were in the original dataset.</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
    albigula audubonii bilineata brunneicapillus chlorurus clarki eremicus
  F      474         0         0               0         0      0      372
  M      368         0         0               0         0      0      468

    flavus fulvescens fulviventer fuscus gramineus harrisi hispidus leucogaster
  F    222         46           3      0         0       0       68         373
  M    302         16           2      0         0       0       42         397

    leucophrys maniculatus megalotis melanocorys merriami ordii penicillatus
  F          0         160       637           0     2522   690          221
  M          0         248       680           0     3108   792          155

    scutalatus  sp. spectabilis spilosoma squamata taylori torridus viridis
  F          0    4        1135         1        0       0      390       0
  M          0    5        1232         1        0       3      441       0</code></pre>
</div>
<p>These two lines of code, and the observation we made about them, will
be our guide as we simplify the script further.</p>
<p>We can now start removing pieces of code that we believe are not
central to our problem. After each removal, we can re-run the code and
make sure that our symptom persists. If the symptom changes, we have
either solved our problem (yay for rubber duck debugging!) or we removed
a line of code that was actually essential to reproducing our
problem.</p>
</div>
<div class="section level3">
<h3 id="b--remove-some-code-that-is-not-central-to-demonstrating-the-problem-">B. Remove some code that is not central to demonstrating the
problem.<a class="anchor" aria-label="anchor" href="#b--remove-some-code-that-is-not-central-to-demonstrating-the-problem-"></a>
</h3>
<p>Let’s start identifying pieces of code to remove. In general, we can
remove code that does not create variables for later use (for example,
exploratory plots, models, or descriptive functions such as
<code>head()</code> or <code>summary()</code>). We can also get rid of
code that adds complexity to the analysis that is not relevant to the
problem at hand.</p>
<p>Let’s start by removing the broken code that we commented out
earlier, back when we tried to join the common names and it didn’t work
because they were in the wrong order.</p>
<p>Code to remove:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add common names</span></span>
<span><span class="co"># common_names &lt;- data.frame(species = unique(rodents_subset$species), common_name = c("Ord's", "Banner-tailed"))</span></span>
<span><span class="co"># common_names</span></span></code></pre>
</div>
<p>Actually, now that we think about it, those common names are not
directly related to the problem at all! The “common_name” column might
be useful later on, but for our reprex we can probably remove that part
of the code without changing the outcome.</p>
<p>Code to remove:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Try again, re-ordering the common names</span></span>
<span><span class="va">common_names</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span>species <span class="op">=</span> <span class="fu">sort</span><span class="op">(</span><span class="fu">unique</span><span class="op">(</span><span class="va">rodents_subset</span><span class="op">$</span><span class="va">species</span><span class="op">)</span><span class="op">)</span>, common_name <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"Ord's"</span>, <span class="st">"Banner-Tailed"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">rodents_subset</span> <span class="op">&lt;-</span> <span class="fu">left_join</span><span class="op">(</span><span class="va">rodents_subset</span>, <span class="va">common_names</span>, by <span class="op">=</span> <span class="st">"species"</span><span class="op">)</span></span></code></pre>
</div>
<p>After removing both of those pieces of code, our script is a little
shorter:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Minimal reproducible example script</span></span>
<span><span class="co"># Loading the tidyverse package</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span>
<span><span class="co"># Uploading the dataset that is currently saved in the project's data folder</span></span>
<span><span class="va">surveys</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"data/surveys_complete_77_89.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Take a look at the data</span></span>
<span><span class="fu">glimpse</span><span class="op">(</span><span class="va">surveys</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># or you can use</span></span>
<span><span class="fu">str</span><span class="op">(</span><span class="va">surveys</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">taxa</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Barplot of rodent species by sex</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="va">surveys</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">species</span>, fill <span class="op">=</span> <span class="va">sex</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Filter to focal species and known sex</span></span>
<span><span class="va">rodents_subset</span> <span class="op">&lt;-</span> <span class="va">surveys</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">species</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"ordii"</span>, <span class="st">"spectabilis"</span><span class="op">)</span>,</span>
<span>         <span class="va">sex</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"F"</span>, <span class="st">"M"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Explore k-rat weights</span></span>
<span><span class="va">weight_model</span> <span class="op">&lt;-</span> <span class="fu">lm</span><span class="op">(</span><span class="va">weight</span> <span class="op">~</span> <span class="va">species</span> <span class="op">+</span> <span class="va">sex</span>, data <span class="op">=</span> <span class="va">rodents_subset</span><span class="op">)</span></span>
<span><span class="fu">summary</span><span class="op">(</span><span class="va">weight_model</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Weight by species and sex</span></span>
<span><span class="va">rodents_subset</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">weight</span>, x <span class="op">=</span> <span class="va">species</span>, fill <span class="op">=</span> <span class="va">sex</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_boxplot</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Subsetted dataset</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">rodents_subset</span><span class="op">$</span><span class="va">sex</span>, <span class="va">rodents_subset</span><span class="op">$</span><span class="va">species</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Original dataset</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">sex</span>, <span class="va">surveys</span><span class="op">$</span><span class="va">species</span><span class="op">)</span>  <span class="co"># there are no observations of female spectabilis or male ordii in `rodents_subset`, even though there were in the original dataset.</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="c--run-the-simplified-code-and-make-sure-that-the-symptom-is-still-present--does-your-example-still-reproduce-the-problem">C. Run the simplified code and make sure that the symptom is still
present. <em>Does your example still reproduce the problem?</em>
<a class="anchor" aria-label="anchor" href="#c--run-the-simplified-code-and-make-sure-that-the-symptom-is-still-present--does-your-example-still-reproduce-the-problem"></a>
</h3>
<p>Now it’s time to re-run the script to make sure we haven’t removed
anything essential. Remember to pay attention to the symptom of the
problem at the end and make sure that the essential observation hasn’t
changed. Sure enough, those observations are still missing. We have
succeeded in simplifying our code while still demonstrating the
problem!</p>
<p>Great progress, but this script is still pretty long and complicated.
Can we remove more things?</p>
<div id="exercise-2-minimizing-code" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-2-minimizing-code" class="callout-inner">
<h3 class="callout-title">Exercise 2: Minimizing code</h3>
<div class="callout-content">
<p>Minimizing code is an iterative process. Repeat steps B and C above
several more times. Which other lines of code can you remove to make
this script more minimal? After removing each part, be sure to re-run
the code to make sure that it still reproduces the error.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<ul>
<li>The barplot of species and sex (ggplot) can be removed because it
generates a plot but does not create any variables that are used
later.</li>
<li>Similarly, our end visualization of weight by species and sex
(boxplot) can be removed.</li>
<li>The weight model and the summary can be removed</li>
<li>Any other informational functions that could have been run in the
console, such as <code>table()</code> or <code>print()</code>,
<code>head()</code>, or <code>str()</code> can be removed.</li>
<li>The essential parts to keep are the lines that access the dataset in
the first place, subset it down to rodents_subset, and then diagnose the
problem (the <code>table()</code> calls at the end).</li>
</ul>
</div>
</div>
</div>
</div>
<p>After repeating steps B and C over and over again, we arrive at a
much more minimal script.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Loading the tidyverse package</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span>
<span></span>
<span><span class="va">surveys</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"data/surveys_complete_77_89.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Filter to focal species and known sex</span></span>
<span><span class="va">rodents_subset</span> <span class="op">&lt;-</span> <span class="va">surveys</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">species</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"ordii"</span>, <span class="st">"spectabilis"</span><span class="op">)</span>,</span>
<span>         <span class="va">sex</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"F"</span>, <span class="st">"M"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Subsetted dataset</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">rodents_subset</span><span class="op">$</span><span class="va">sex</span>, <span class="va">rodents_subset</span><span class="op">$</span><span class="va">species</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Original dataset</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">sex</span>, <span class="va">surveys</span><span class="op">$</span><span class="va">species</span><span class="op">)</span> <span class="co"># there are no observations of female spectabilis or male ordii in `rodents_subset`, even though there were in the original dataset.</span></span></code></pre>
</div>
<p>Mickey is really getting the hang of this! They scrutinize the
example to see if there’s anything else that can be cut. They realize
that the code still runs perfectly fine if they remove
<code><a href="https://tidyverse.tidyverse.org" class="external-link">library(tidyverse)</a></code>–since they already loaded the
{tidyverse} package, there should be no need to load it again!</p>
<p>Mickey realizes that they might be able to narrow the example down
eeeeeeven more. They try removing the species filter and only filtering
by sex. Now the minimal example looks like this:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">surveys</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"data/surveys_complete_77_89.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Filter to known sex</span></span>
<span><span class="va">rodents_subset</span> <span class="op">&lt;-</span> <span class="va">surveys</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">sex</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"F"</span>, <span class="st">"M"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Subsetted dataset</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">rodents_subset</span><span class="op">$</span><span class="va">sex</span>, <span class="va">rodents_subset</span><span class="op">$</span><span class="va">species</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Original dataset</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">sex</span>, <span class="va">surveys</span><span class="op">$</span><span class="va">species</span><span class="op">)</span> <span class="co"># still missing a lot of rows!</span></span></code></pre>
</div>
<p>Something is different–we no longer have zero rows for two of the
species/sex combos. But this example still demonstrates our problem.
Remember, we previously stated the problem as “There are many
observations missing from <code>rodents_subset</code> that should not
have been removed.” And sure enough, if we look closely here, we can see
that our species/sex counts have changed from 690 F ordii/792 M ordii
and 1135 F spectabilis/1232 M spectabilis to 333/393 and 568/610,
respectively. The problem persists! We are still mysteriously missing
rows.</p>
<div id="callout2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div class="callout-inner">
<div class="callout-content">
<p>If you had chosen to remove the sex filter instead of removing the
species filter, the same point would be made. The numbers would be
different, but we would still see fewer rows in the subsetted data
frame. Either one works!</p>
</div>
</div>
</div>
<div id="callout3" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div class="callout-inner">
<div class="callout-content">
<p>If you hadn’t noticed that you could simplify this example even
further, that would still be okay! Minimizing code is an art, not an
exact science. The more minimal you can make your code, the better, but
a helper will still have a much easier time working on your problem if
you’ve removed some extraneous steps, even if you haven’t narrowed it
down 100%. Don’t let the perfect be the enemy of the good!</p>
</div>
</div>
</div>
<p>Okay, so our minimal snippet looks like this:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">surveys</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"data/surveys_complete_77_89.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Filter to known sex</span></span>
<span><span class="va">rodents_subset</span> <span class="op">&lt;-</span> <span class="va">surveys</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">sex</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"F"</span>, <span class="st">"M"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Subsetted dataset</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">rodents_subset</span><span class="op">$</span><span class="va">sex</span>, <span class="va">rodents_subset</span><span class="op">$</span><span class="va">species</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Original dataset</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">sex</span>, <span class="va">surveys</span><span class="op">$</span><span class="va">species</span><span class="op">)</span> <span class="co"># still missing a lot of rows!</span></span></code></pre>
</div>
<p>This is great progress! Remy will find this minimal code snippet much
more approachable than the long script that Mickey started with.</p>
<div id="exercise-3-have-we-made-a-reprex" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="exercise-3-have-we-made-a-reprex" class="callout-inner">
<h3 class="callout-title">Exercise 3: Have we made a reprex?</h3>
<div class="callout-content">
<p>Mickey is really proud of their efforts to minimize the code! They
email the minimal code snippet to Remy to ask for help. Remy notices
immediately that this code is much easier to read and understand. They
open up the script and try to run it in R.</p>
<ol style="list-style-type: decimal">
<li><p>What do you think will happen when Remy tries to run the code
from this reprex script?</p></li>
<li><p>What should Mickey do next to improve the minimal reproducible
example?</p></li>
</ol>
</div>
</div>
</div>
<p>We haven’t yet included enough code to allow a helper, such as Remy,
to run the code on their own computer. If Remy tries to run the reprex
script in its current state, they will encounter errors because they
don’t have access to the same R environment that Mickey does.</p>
<p>That’s why it’s so important to include dependencies in your
reprex.</p>
</div>
<div class="section level3">
<h3 id="include-dependencies">Include dependencies<a class="anchor" aria-label="anchor" href="#include-dependencies"></a>
</h3>
<p>A <strong>dependency</strong> is a piece of code that other pieces of
code <strong>depend on</strong> in order to function properly.</p>
<p>R code consists primarily of <strong>functions</strong> and
<strong>variables</strong>. In order to make our minimal examples truly
<em>reproducible</em>, we have to give our helpers access to all the
functions and all the variables that are necessary to run our code.</p>
<p>First, let’s talk about <strong>functions</strong>. Functions in R
typically come from packages. You can access them by loading the package
into your environment.</p>
<p>To make sure that your helper has access to the packages necessary to
run your reprex, you will need to include calls to
<code>library()</code> for whichever packages are used in the code. For
example, if your code uses the function <code>lmer</code> from the
<a href="https://github.com/lme4/lme4/" class="external-link">lme4</a> package, you would have to include
<code><a href="https://github.com/lme4/lme4/" class="external-link">library(lme4)</a></code> at the top of your reprex script to make sure
your helper has the <a href="https://github.com/lme4/lme4/" class="external-link">lme4</a> package loaded and can run your
code.</p>
<div id="default-packages" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="default-packages" class="callout-inner">
<h3 class="callout-title">Default packages</h3>
<div class="callout-content">
<p>Some packages, such as <code>{base}</code> and <code>{stats}</code>,
are loaded in R by default, so you might not have realized that a lot of
commonly-used functions, such as <code>dim</code>, <code>colSums</code>,
<code>mean</code>, and <code>length</code> actually come from those
packages!</p>
<p>You can see a complete list of the functions that come from the
<code>{base}</code> and <code>{stats}</code> packages by running
<code>library(help = "base")</code> or
<code>library(help = "stats")</code> in your console.</p>
<p>But, you actually don’t need to worry too much about this because
your helpers’ RStudio versions will also have <code>{base}</code> and
<code>{stats}</code> preinstalled!</p>
</div>
</div>
</div>
<p>Let’s do this for our own reprex. We can start by identifying all the
functions used, and then we can figure out where each function comes
from to make sure that we tell our helper to load the right
packages.</p>
<div id="exercise-4-which-packages-should-we-load" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="exercise-4-which-packages-should-we-load" class="callout-inner">
<h3 class="callout-title">Exercise 4: Which packages should we
load?</h3>
<div class="callout-content">
<p>The functions used in our minimal example are
<code>read_csv()</code>, <code>filter()</code>, <code>c()</code>, and
<code>table()</code>.</p>
<p>Identify the package that each of the functions comes from and modify
the minimal example so that it explicitly loads those packages.
:::solution <code><a href="https://dplyr.tidyverse.org" class="external-link">library(dplyr)</a></code> <code><a href="https://readr.tidyverse.org" class="external-link">library(readr)</a></code></p>
<p><code>filter()</code> comes from <a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a>, and
read_csv()<code>comes from</code>{readr}<code>.</code>c()<code>and</code>table()<code>come from</code>{base}`,
which is loaded by default, so we don’t need to include a library() call
for this.</p>
<p>Bonus if you notice that we also use the <code>%&gt;%</code>
operator, which comes from <a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a> too, so we definitely
need to make sure that <a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a> is loaded!</p>
<p><em>Extra challenge: did we use any other operators? Where do they
come from?</em></p>
</div>
</div>
</div>
<p>:::</p>
<p>We can update our minimal code to include those
<code>library()</code> calls.</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">readr</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">dplyr</span><span class="op">)</span></span>
<span></span>
<span><span class="va">surveys</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"data/surveys_complete_77_89.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Filter to known sex</span></span>
<span><span class="va">rodents_subset</span> <span class="op">&lt;-</span> <span class="va">surveys</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">sex</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"F"</span>, <span class="st">"M"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Subsetted dataset</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">rodents_subset</span><span class="op">$</span><span class="va">sex</span>, <span class="va">rodents_subset</span><span class="op">$</span><span class="va">species</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Original dataset</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">sex</span>, <span class="va">surveys</span><span class="op">$</span><span class="va">species</span><span class="op">)</span> <span class="co"># still missing a lot of rows!</span></span></code></pre>
</div>
<div id="installing-vs.-loading-packages" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="installing-vs.-loading-packages" class="callout-inner">
<h3 class="callout-title">Installing vs. loading packages</h3>
<div class="callout-content">
<p>We included calls to <code>library()</code> to load the packages we
need. But what if our helper doesn’t have all of these packages
installed? Won’t the code not be reproducible?</p>
<p>Packages need to be installed one time before they can be loaded with
<code>library()</code>. Typically, we don’t include
<code>install.packages()</code> in our code for each of the packages
that we include in the <code>library()</code> calls, because
<code>install.packages()</code> doesn’t need to be repeated every time
the script is run. We can assume that our helper will see
<code>library(specialpackage)</code> and know that they need to go
install “specialpackage” on their own.</p>
<p>Technically, this does make that part of the code not reproducible!
But it’s also more “polite” than explicitly including
<code>install.packages()</code>. Our helper might have their own way of
managing package versions, and forcing them to install a package when
they run our reprex risks messing up their workflow. It is a common
convention to stick with <code>library()</code> and let the helper
figure it out from there.</p>
</div>
</div>
</div>
<div id="exercise-5-which-packages-are-essential" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="exercise-5-which-packages-are-essential" class="callout-inner">
<h3 class="callout-title">Exercise 5: Which packages are essential?</h3>
<div class="callout-content">
<p>In each of the following code snippets, identify the necessary
packages (or other code) to make the example reproducible.</p>
<ol style="list-style-type: lower-alpha"><li>
</li></ol>
<pre><code><span><span class="va">weight_model</span> <span class="op">&lt;-</span> <span class="fu">lm</span><span class="op">(</span><span class="va">weight</span> <span class="op">~</span> <span class="va">common_name</span> <span class="op">+</span> <span class="va">sex</span>, data <span class="op">=</span> <span class="va">rodents_subset</span><span class="op">)</span></span>
<span><span class="fu">tab_mod</span><span class="op">(</span><span class="va">weight_model</span><span class="op">)</span></span></code></pre>
<ol start="2" style="list-style-type: lower-alpha"><li>
</li></ol>
<pre><code><span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu">lmer</span><span class="op">(</span><span class="va">weight</span> <span class="op">~</span> <span class="va">hindfoot_length</span> <span class="op">+</span> <span class="op">(</span><span class="fl">1</span><span class="op">|</span><span class="va">plot_type</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">rodents</span><span class="op">)</span></span>
<span><span class="fu">summary</span><span class="op">(</span><span class="va">mod</span><span class="op">)</span></span></code></pre>
<ol start="3" style="list-style-type: lower-alpha"><li>
</li></ol>
<pre><code><span><span class="va">rodents_processed</span> <span class="op">&lt;-</span> <span class="fu">process_rodents_data</span><span class="op">(</span><span class="va">rodents</span><span class="op">)</span></span>
<span><span class="fu">glimpse</span><span class="op">(</span><span class="va">rodents_processed</span><span class="op">)</span></span></code></pre>
<p>This exercise should take about 10 minutes. :::solution a.
<code>lm</code> is part of base R, so there’s no package needed for
that. <code>tab_mod</code> comes from the package <code>sjPlot</code>.
You could add <code>libary(sjPlot)</code> to this code to make it
reproducible. b. <code>lmer</code> is a linear mixed modeling function
that comes from the package <code>lme4</code>. <code>summary</code> is
from base R. You could add <code><a href="https://github.com/lme4/lme4/" class="external-link">library(lme4)</a></code> to this code to
make it reproducible. c. <code>process_rodents_data</code> is not from
any package that we know of, so it was probably an originally-created
function. In order to make this example reproducible, you would have to
include the definition of <code>process_rodents_data</code>.
<code>glimpse</code> is probably from <code>dplyr</code>, but it’s worth
noting that there is also a <code>glimpse</code> function in the
<code>pillar</code> package, so this might be ambiguous. This is another
reason it’s important to specify your packages–if you leave your helper
guessing, they might load the wrong package and misunderstand your
error!</p>
</div>
</div>
</div>
<p>:::::::::::::::::::::::::::::::::::::::::::</p>
<p>Including <code>library()</code> calls will definitely help Remy run
the code. But this code still won’t work as written because Remy does
not have access to the same <em>objects</em> that Mickey used in the
code. Along with functions, objects are the second type of dependency we
need to watch out for when writing reprexes.</p>
<p>The code as written relies on <code>rodents_subset</code>, which Remy
will not have access to if they try to run the code. That means that
we’ve succeeded in making our example <em>minimal</em>, but it is not
<em>reproducible</em>: it does not allow someone else to reproduce the
problem!</p>
<p>In the next episode, we will learn how to handle perhaps the most
thorny part of creating reprexes: dealing with datasets.</p>
<div id="exercise-6-reflection" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="exercise-6-reflection" class="callout-inner">
<h3 class="callout-title">Exercise 6: Reflection</h3>
<div class="callout-content">
<p>Let’s take a moment to reflect on this process.</p>
<ul>
<li><p>What’s one thing you learned in this episode? An insight; a new
skill; a process?</p></li>
<li><p>What is one thing you’re still confused about? What questions do
you have?</p></li>
</ul>
<p>This exercise should take about 5 minutes.</p>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>Making a reprex is the next step after trying code first aid.</li>
<li>In order to make a good reprex, it is important to simplify your
code</li>
<li>Simplify code by removing parts not directly related to the
question</li>
<li>Give helpers access to the functions used in your code by loading
all necessary packages</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</div>
</div></section><section id="aio-4-minimal-reproducible-data"><p>Content from <a href="4-minimal-reproducible-data.html">Minimal reproducible data</a></p>
<hr>
<p>Last updated on 2025-08-26 |

        <a href="https://github.com/carpentries-incubator/R-help-reprexes/edit/main/episodes/4-minimal-reproducible-data.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 94 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is a minimal reproducible dataset, and why do I need it?</li>
<li>How do I create a minimal reproducible dataset?</li>
<li>Can I just use my own data?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Describe a minimal reproducible dataset</li>
<li>Appreciate the different approaches and viewpoints on providing
example data</li>
<li>Identify the relevant aspects of your data</li>
<li>Create a suitable reprex dataset from scratch</li>
<li>Share your own dataset in a way that is minimal, accessible, and
reproducible</li>
<li>Subset a built-in dataset to use in your reprex</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="what-is-a-minimal-reproducible-dataset-and-why-do-i-need-it">4.1 What is a minimal reproducible dataset and why do I need
it?<a class="anchor" aria-label="anchor" href="#what-is-a-minimal-reproducible-dataset-and-why-do-i-need-it"></a>
</h2>
<hr class="half-width">
<div id="accordionInstructor1" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor1" aria-expanded="false" aria-controls="collapseInstructor1">
  <h3 class="accordion-header" id="headingInstructor1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor1" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor1" aria-labelledby="headingInstructor1">
<div class="accordion-body">
<p>Development note: Previous episodes should have already introduced
the concept of a minimal reproducible examples, why it is important, and
talked about making the code minimal and reproducible. This data episode
is part of being reproducible and should perhaps be followed-up with
more details on reproducibility if not previously mentioned (e.g.,
reprex needs minimal code - check - dependencies, which include minimal
data - check - and other basic information like your system and R
version as well as contextual information on your data?).</p>
</div>
</div>
</div>
</div>
<p><embed src="4-minimal-reproducible-data.html"></embed></p>
<p>Now that Mickey has narrowed down their problem area and stripped
down their code to make it minimal, they need to ensure it is
<strong>reproducible</strong>; this means it needs to be accessible and
executable such that anyone else can simoly copy-paste the code into
their system and replicate their issue. Importantly, a <strong>code
snippet will usually require data objects</strong> in order to run!
Therefore, <strong>every reprex requires a minimal reproducible dataset
to use with the code</strong>.</p>
<p>Furthermore, as we have seen previously, sometimes the source of the
problem isn’t actually the code, but rather the data! Providing an
appropriate example, or mock dataset <strong>allows a helper to better
investigate and manipulate that data</strong> to fix the problem.</p>
<div id="remember-your-helper-may-not-have-access-to-your-computer-and-files" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="remember-your-helper-may-not-have-access-to-your-computer-and-files" class="callout-inner">
<h3 class="callout-title">Remember: your helper may not have access to
your computer and files!</h3>
<div class="callout-content">
<p>You might be used to always uploading data from separate files, but
helpers can’t access those files. Even if you sent someone a file, they
would need to put it in the right directory, make sure to load it in
exactly the same way, make sure their computer can open it, etc. Since
the goal is to make everyone’s lives as easy as possible, we need to
think about our data in a different way–as a mock object created in the
script itself.</p>
</div>
</div>
</div>
<div id="accordionInstructor2" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor2" aria-expanded="false" aria-controls="collapseInstructor2">
  <h3 class="accordion-header" id="headingInstructor2">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor2" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor2" aria-labelledby="headingInstructor2">
<div class="accordion-body">
<p>Idea for future edits: the above callout could be rephrased using
Mickey and a narrative example (e.g., Mickey tries to just send their
data to Remy but it doesn’t work out).</p>
</div>
</div>
</div>
</div>
<p>As with the code, a reprex dataset should also be
<strong>minimal–free of unnecessary information</strong>. By removing
extraneous information and only keeping what is required to replicate
the issue, we can ensure our helper will be able to easily see how the
data is structured and where the problem arises. While it may sometimes
feel like unnecessary effort, the process of creating a minimal dataset
will not only help others help you, but also allow you to <strong>better
understand your data</strong> and often <strong>discover the source of
the problem</strong> without the need for external help.</p>
<p>In summary, just like with the code, <strong>a minimal reproducible
dataset must be:</strong></p>
<ul>
<li>
<strong>minimal</strong>: it only contains information required to
run your minimal code. You can also think of this as being
<strong>relevant</strong> to the problem (keep only what is
necessary).</li>
<li>
<strong>reproducible</strong>: it must be
<strong>accessible</strong> to someone without your computer, and it
must consistently <strong>replicate your problem</strong>. This means it
also needs to be <strong>complete</strong>, meaning there are no
dependencies that have been omitted (e.g., packages).</li>
</ul>
<div id="pro-tip" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="pro-tip" class="callout-inner">
<h3 class="callout-title">Pro-tip</h3>
<div class="callout-content">
<p>An example of what minimal reproducible examples look like can also
be found in the <code>?help</code> section, in R Studio. Just scroll all
the way down to where there are examples listed. These will usually be
minimal and reproducible, since they are intended to be directly
copy-pasted and run by anyone.</p>
<p>For example, let’s look at the function <code>mean</code>:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">mean</span></span></code></pre>
</div>
<p>We see examples that can be run directly on the console, with no
additional code.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">50</span><span class="op">)</span></span>
<span><span class="va">xm</span> <span class="op">&lt;-</span> <span class="fu">mean</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="fu">c</span><span class="op">(</span><span class="va">xm</span>, <span class="fu">mean</span><span class="op">(</span><span class="va">x</span>, trim <span class="op">=</span> <span class="fl">0.10</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 8.75 5.50</code></pre>
</div>
<p>In this case, <strong>x is the mock dataset</strong> consisting of
just 1 variable. <strong>Notice how it was created as part of the
example.</strong> This will be your goal with your reprex.</p>
</div>
</div>
</div>
<div id="accordionInstructor3" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor3" aria-expanded="false" aria-controls="collapseInstructor3">
  <h3 class="accordion-header" id="headingInstructor3">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor3" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor3" aria-labelledby="headingInstructor3">
<div class="accordion-body">
<p>Section 4.1, Exercise 1, and the extra practice exercise that follows
are all intended to address the LO “Describe a minimal reproducible
dataset.” The extra practice exercise better targets the learner’s
ability to identify the appropriate reprex dataset.</p>
</div>
</div>
</div>
</div>
<div id="exercise-1-test-your-knowledge-3-mins" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-1-test-your-knowledge-3-mins" class="callout-inner">
<h3 class="callout-title">Exercise 1: Test your knowledge! (3 mins)</h3>
<div class="callout-content">
<p>The datasets listed below are <strong>not</strong> well suited for
use in a reprex. Can you explain why? Copy each one onto your own R
script to check whether they are reproducible. What did you find?</p>
<ol style="list-style-type: upper-alpha">
<li><img src="../fig/data_screenshot.png" alt="Screenshot of the ratdat comple_old dataset." class="figure"></li>
<li><code>sample_data &lt;- read_csv(“/Users/kaija/Desktop/RProjects/ResearchProject/data/sample_dataset.csv”)</code></li>
<li><code>sample_data &lt;- data.frame(species = species_vector, weight = c(10, 25, 14, 26, 30, 17))</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<ol style="list-style-type: upper-alpha">
<li>Not reproducible because it is a screenshot.</li>
<li>Not reproducible because it is a path to a file that only exists on
someone else’s computer and therefore you do not have access to it using
that path.</li>
<li>Not reproducible because we are not given the source for
<code>species_vector</code>.</li>
</ol>
</div>
</div>
</div>
</div>
<div id="accordionInstructor4" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor4" aria-expanded="false" aria-controls="collapseInstructor4">
  <h3 class="accordion-header" id="headingInstructor4">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor4" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor4" aria-labelledby="headingInstructor4">
<div class="accordion-body">
<p>The lesson develoepers recommend you skip the exercise below to stay
within the lesson’s time estimate. You can provide it as extra practice
for quicker learners or during breaks.</p>
</div>
</div>
</div>
</div>
<div id="extra-practice-optional" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="extra-practice-optional" class="callout-inner">
<h3 class="callout-title">Extra Practice (optional)</h3>
<div class="callout-content">
<p>Let’s say we want to know the average weight of all the species in
our <code>rodents</code> dataset. We try to use the following code…</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">mean</span><span class="op">(</span><span class="va">rodents</span><span class="op">$</span><span class="va">weight</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] NA</code></pre>
</div>
<p>…but it returns NA! We don’t know why that is happening and we want
to ask for help.</p>
<p>Which of the following represents a minimal reproducible dataset for
this code? Can you describe why the other ones are not?</p>
<ol style="list-style-type: upper-alpha">
<li><code>sample_data &lt;- data.frame(month = rep(7:9, each = 2), hindfoot_length = c(10, 25, 14, 26, 30, 17))</code></li>
<li><code>sample_data &lt;- data.frame(weight = rnorm(10))</code></li>
<li><code>sample_data &lt;- data.frame(weight = c(100, NA, 30, 60, 40, NA))</code></li>
<li><code>sample_data &lt;- sample(rodents$weight, 10)</code></li>
<li><code>sample_data &lt;- rodents_modified[1:20,]</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>The correct answer is C!</p>
<ol style="list-style-type: upper-alpha">
<li>does not include the variable of interest (weight).</li>
<li>does not produce the same problem (NA result with a warning
message)–the code runs just fine.</li>
<li>minimal and reproducible.</li>
<li>is not reproducible. Sample randomly samples 10 items; sometimes it
may include NAs, sometime it may not (not guaranteed to reproduce the
error). It can be used if a seed is set (see next section for more
info).</li>
<li>uses a dataset that isn’t accessible without previous data wrangling
code–the object rodents_modified doesn’t exist.</li>
</ol>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="can-i-just-use-my-own-data">4.2 Can I just use my own data?<a class="anchor" aria-label="anchor" href="#can-i-just-use-my-own-data"></a>
</h2>
<hr class="half-width">
<p>While Mickey is grateful to Remy for providing them with a roadmap to
follow when they need help, they still feel it would be much easier and
faster to just send Remy their whole dataset rather than creating a
different one. If they give Remy access to everything, can’t he still
help?</p>
<div id="exercise-2-reflect-3-mins" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-2-reflect-3-mins" class="callout-inner">
<h3 class="callout-title">Exercise 2: Reflect (3 mins)</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li><p>When Mickey feels like sharing their own data would be easier,
for whom do you think they are referring? Who would find it easier,
Mickey or Remy?</p></li>
<li><p>Can you think of any reasons why sharing the original data may
not be possible or recommended?</p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>
<p>Mickey is thinking that it would be easier for themselves, not
necessarily for Remy.</p>
<p><strong>Remember:</strong> one of the goals of creating a reprex is
to <strong>help the helpers</strong>. They don’t have to help, they are
volunteering their time. As such, they deserve to be treated with
kindness and respect. If you find yourself getting frustrated at how
much time and effort creating a reprex might be taking, remember that
(1) <strong>trusting the process may reveal the solution along the
way</strong>; and (2) <strong>being kind, clear, and helpful will reward
you with a quicker, more accurate solution</strong>.</p>
</li>
<li><p>There are several reasons why sharing the original data may not
be possible or recommended. The original dataset may be:</p></li>
</ol>
<ul>
<li>too large - the Portal dataset is ~35,000 rows with 13 columns and
contains data for decades. That’s a lot!</li>
<li>private - the dataset might not be published yet, it may not be
yours to share, or maybe it includes protected information such as
personal medical information or the location of endangered species.</li>
<li>hard to send - on most online forums, you can’t attach supplemental
files (more on this later). Even if you are just sending data to a
colleague, file paths can get complicated, the data might be too large
to attach, etc.</li>
<li>complicated - it would be hard to locate the relevant information.
One example to steer away from are needing a ‘data dictionary’ to
understand all the meanings of the columns (e.g. what is “plot type” in
<code>ratdat</code>?) We don’t our helper to waste valuable time to
figure out what everything means.</li>
<li>highly derived/modified from the original file. You may have already
done a bunch of preliminary data wrangling you don’t want to include
when you send the example, so you would need to provide the intermediate
dataset directly to your helper.</li>
</ul>
</div>
</div>
</div>
</div>
<p>Mickey is not entirely wrong. While there are instances when it is
not possible or advisable to share original data, there are also many
ways around such challenges and some instances may indeed benefit from
keeping the original data. However, it is still important to provide
helpers with data that is minimal and reproducible. Therefore, while
Mickey does not have to create a brand new example dataset, they should
at least work to make their original data minimal and accessible (see
the above reflection exercise), and this may not end up being easier or
faster than creating a mock dataset from scratch.</p>
<p>In summary, there are multiple ways to provide a minimal,
reproducible dataset for a reprex, including using a simplified version
of the original dataset. In the following section we will highlight 3
common approaches.</p>
</section><section><h2 class="section-heading" id="three-different-approaches">4.3 Three different approaches<a class="anchor" aria-label="anchor" href="#three-different-approaches"></a>
</h2>
<hr class="half-width">
<p>In general, there are 3 common ways to provide minimal reproducible
data for a reprex.</p>
<ul>
<li><p>Add a few lines of code to create a mock dataset with the same
key characteristics as the original data.</p></li>
<li><p>Subset the original data to be minimal and reproducible.</p></li>
<li><p>Subset a dataset that is already provided by R (e.g.,
<code>cars</code>, <code>npk</code>, <code>penguins</code>, etc.). For a
complete list, use <code>library(help = "datasets")</code>.</p></li>
</ul>
<div id="accordionInstructor5" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor5" aria-expanded="false" aria-controls="collapseInstructor5">
  <h3 class="accordion-header" id="headingInstructor5">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor5" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor5" aria-labelledby="headingInstructor5">
<div class="accordion-body">
<p>It would be nice if we could toggle the callout below or at least the
table so that it doesn’t take so much room since it is not an essential
part of the lesson.</p>
</div>
</div>
</div>
</div>
<div id="pros-and-cons" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="pros-and-cons" class="callout-inner">
<h3 class="callout-title">Pros and Cons</h3>
<div class="callout-content">
<p>The developers of this lesson believe everyone is entitled to use any
option they prefer, therefore the rest of this episode will expand on
each of the 3 approaches listed above. However, within the data science
community, opinions differ on which method is best recommended. Below is
a summary table of advantages and disadvantages of each approach based
on many conversations with several data science groups.</p>
<table style="width:100%;" class="table">
<colgroup>
<col width="6%">
<col width="57%">
<col width="35%">
</colgroup>
<tbody>
<tr class="odd">
<td></td>
<td><strong>Advantages</strong></td>
<td><strong>Disadvantages</strong></td>
</tr>
<tr class="even">
<td><strong>Data from Scratch</strong></td>
<td><ul>
<li><p>Often the most concise</p></li>
<li><p>Easiest for helpers</p></li>
<li><p>Helps problem-solve along the way (e.g., identify what data
aspects are generating the problem)</p></li>
<li><p>More universally applicable: Easy to share, collaborate, teach,
and understand</p></li>
<li><p>Avoids privacy/security concerns</p></li>
<li><p>Lets you clearly illustrate the sought outcome</p></li>
<li><p>Uses important-to-learn skills</p></li>
<li><p>Easier with practice</p></li>
</ul></td>
<td>
<ul>
<li>Can be intimidating</li>
</ul>
<!-- --><ul>
<li><p>Requires good understanding of your data</p></li>
<li><p>Harder to generate if the error is idiosyncratic or dependent on
having a large dataset</p></li>
<li><p>Time-consuming if unpracticed</p></li>
<li><p>Iterative (you may need to trial and error a few times to
replicate the problem)</p></li>
<li><p>More likely to require analogies, less interpretable/concrete,
more likely to require greater context</p></li>
<li><p>Risks generating XY problems–make sure you are asking the right
question/replicating the right problem</p></li>
</ul>
</td>
</tr>
<tr class="odd">
<td><strong>R-built Data</strong></td>
<td><ul>
<li><p>Simple and easy to share–no need to provide additional
data</p></li>
<li><p>Familiar–helpers already know the data structure</p></li>
<li><p>Potentially faster than starting from scratch (i.e. faster than
generating rows/columns de novo).</p></li>
<li><p>No privacy/security concerns</p></li>
<li><p>Can easily be manipulated or simplified</p></li>
<li><p>Generalizes the problem</p></li>
</ul></td>
<td><ul>
<li><p>May require a good mental model of the problem</p></li>
<li><p>Harder if the error is idiosyncratic</p></li>
<li><p>Greatest risk of generating XY problems–make sure you are asking
the right question/replicating the right problem</p></li>
<li><p>Iterative (you may need to trial and error a few times to
replicate the problem)</p></li>
<li><p>Need to re-think the question so it matches a different dataset
and context–mental gymnastics</p></li>
<li><p>Still need to choose which dataset and variables are more
appropriate</p></li>
</ul></td>
</tr>
<tr class="even">
<td><strong>Your Data</strong></td>
<td><ul>
<li><p>Can require the least mental effort</p></li>
<li><p>Problem is easy to replicate even if you don’t understand it at
all</p></li>
<li><p>Accurately represents the actual problem; avoids XY
problems.</p></li>
<li><p>Richer context may intrigue/motivate helpers</p></li>
<li><p>Can be quicker if dataset is small</p></li>
<li><p>May be required for idiosyncratic problems that are based on
aspects of the data itself that you don’t know about (e.g.  when the
data itself, rather than the code per se, is central to the
problem)</p></li>
<li><p>Captures data structures that are difficult or time-consuming to
replicate if you are a novice</p></li>
</ul></td>
<td><ul>
<li><p>Less growth-minded if chosen as an “easy way out”–skips the
learning process and any insights you could have gained.</p></li>
<li><p>Easy to do poorly and think that you’re doing it well; perceived
“easiness” leads to overcomplication/confusion</p></li>
<li><p>Leaves all the work to the helpers if you don’t also work to
minimize it–less motivation for harder work</p></li>
<li><p>Could obfuscate the problem if not minimized–less likely to find
a quick answer</p></li>
<li><p>More difficult to share–may be large/messy</p></li>
<li><p>Security/privacy/sanitizeation problems</p></li>
</ul></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="creating-a-mock-dataset-from-scratch">4.4 Creating a mock dataset from scratch<a class="anchor" aria-label="anchor" href="#creating-a-mock-dataset-from-scratch"></a>
</h2>
<hr class="half-width">
<p>While starting from scratch can be daunting at first, it becomes
easier and faster with practice. Once you are familiar with the basic
building blocks, it is a very straight-forward method of creating a
minimal reproducible dataset. This is also the preferred method for
other activities that require a reprex (e.g., teaching, collaborating,
developing, etc.), and it often provides valuable problem-solving
insights. So let’s breakdown this process to be more digestible!</p>
<p>Mickey is still new at this and has 2 pressing questions:</p>
<ol style="list-style-type: decimal">
<li>How do I create a dataset from scratch?</li>
<li>How do I know which key aspects of my data to recreate?</li>
</ol>
<p>Let’s start with the first.</p>
<p>There are many ways one can create a dataset in R (these should be
familiar if you took the Carpentries lesson <a href="https://datacarpentry.org/R-ecology-lesson/" class="external-link">Data Analysis and
Visualization in R for Ecologists</a>).</p>
<p>You can start by creating vectors using <code>c()</code></p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vector</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span><span class="op">)</span> </span>
<span><span class="va">vector</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1 2 3 4</code></pre>
</div>
<p>You can also add some randomness by sampling from a vector using
<code>sample()</code>.</p>
<p>For example you can sample numbers 1 through 10 in a random order</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">sample</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="va">x</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> [1]  1  5  7  4 10  3  2  9  6  8</code></pre>
</div>
<p>Or you can randomly sample from a normal distribution</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">rnorm</span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="va">x</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> [1] -0.59669040  2.09573757  0.05709885 -0.49334833  0.27124331  0.47614501
 [7] -0.82785885 -0.68234008 -0.12234170  1.00905239</code></pre>
</div>
<p>You can also use <code>letters</code> to create factors.</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">sample</span><span class="op">(</span><span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>, <span class="fl">20</span>, replace<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span>
<span><span class="va">x</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> [1] "a" "a" "a" "c" "a" "b" "b" "b" "a" "d" "b" "d" "d" "b" "c" "a" "b" "a" "c"
[20] "c"</code></pre>
</div>
<p>Remember that <strong>a data frame is just a collection of
vectors</strong>. You can create a data frame using
<code>data.frame</code> (or <code>tibble</code> in the
<code>dplyr</code> package), and then define a vector for each
variable.</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span> <span class="op">(</span>x <span class="op">=</span> <span class="fu">sample</span><span class="op">(</span><span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>, <span class="fl">20</span>, replace<span class="op">=</span><span class="cn">T</span><span class="op">)</span>, </span>
<span>                    y <span class="op">=</span> <span class="fu">rnorm</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">20</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">head</span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  x          y
1 c  0.9563593
2 c -1.5044673
3 c -0.8386642
4 b  0.8507054
5 a -0.9841233
6 a -0.8668617</code></pre>
</div>
<p><strong>However</strong>, when sampling at random you must remember
to <code>set.seed()</code> before sending it to someone to make sure you
both get the same numbers!</p>
<div id="callout4" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div class="callout-inner">
<div class="callout-content">
<p>For more handy functions for creating data frames and variables, see
the [<strong>cheatsheet</strong>]. Some questions may require specific
formats. For these, you can use any of the provided
<code>as.someType</code> functions: <code>as.factor</code>,
<code>as.integer</code>, <code>as.numeric</code>,
<code>as.character</code>, <code>as.Date</code>,
<code>as.xts</code>.</p>
</div>
</div>
</div>
<div id="accordionInstructor6" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor6" aria-expanded="false" aria-controls="collapseInstructor6">
  <h3 class="accordion-header" id="headingInstructor6">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor6" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor6" aria-labelledby="headingInstructor6">
<div class="accordion-body">
<p>You can skip the challenge below if short on time. The exercise
assesses the LO: “Create a dataset from scratch.” There will not be
another exercise to practice this, but you will walk through creating
the main reprex dataset together, so that may be enough. <strong>Do not
spend too much time on this</strong>. Students can work in pairs, or you
can work all together. Don’t wait for everyone to be done before going
through solutions, maybe have them alert you when they finish each one,
they can then keep going while they wait. You can skip giving the
solution for C, expecting quicker learners to have tried it for practice
while slower learners may not have gotten to it, that’s ok!</p>
</div>
</div>
</div>
</div>
<div id="exercise-3-you-try-5-mins" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="exercise-3-you-try-5-mins" class="callout-inner">
<h3 class="callout-title">Exercise 3: You try! (5 mins)</h3>
<div class="callout-content">
<p>Create a data frame with:</p>
<p>A. One categorical variable with 2 levels and one continuous
variable.</p>
<p>B. One continuous variable that is normally distributed.</p>
<p>C. Name, sex, age, and treatment type.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="identifying-the-relevant-aspects-of-your-data">4.5 Identifying the relevant aspects of your data<a class="anchor" aria-label="anchor" href="#identifying-the-relevant-aspects-of-your-data"></a>
</h2>
<hr class="half-width">
<p>No matter which approach you choose to take for providing a dataset,
they key is always to identify which elements of the original data are
necessary, or relevant, to replicate the problem. To do so, here are a
few guiding questions:</p>
<ol style="list-style-type: decimal">
<li>Which variables are necessary to replicate the problem?</li>
<li>What data type (discrete or continuous) is each variable?</li>
<li>How many levels and/or observations are necessary?</li>
<li>Do the values need to be distributed in a specific way?</li>
<li>Are there any NAs that could be relevant?</li>
</ol>
<p>Let’s check back with Mickey and the minimal code they settled
on:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Mickey's minimal code [ UPDATE AS NEEDED ]</span></span>
<span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">dplyr</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">ggplot2</span><span class="op">)</span></span>
<span></span>
<span><span class="va">rodents</span><span class="op">&lt;-</span><span class="fu">read.csv</span><span class="op">(</span><span class="st">'data/surveys_complete_77_89.csv'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">rodents_subset</span> <span class="op">&lt;-</span> <span class="va">rodents</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">species</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"ordii"</span>, <span class="st">"spectabilis"</span><span class="op">)</span>,</span>
<span>         <span class="va">sex</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"F"</span>, <span class="st">"M"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">rodents_subset</span><span class="op">$</span><span class="va">sex</span>, <span class="va">rodents_subset</span><span class="op">$</span><span class="va">species</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
    ordii spectabilis
  F   333           0
  M     0         610</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">table</span><span class="op">(</span><span class="va">rodents</span><span class="op">$</span><span class="va">sex</span>, <span class="va">rodents</span><span class="op">$</span><span class="va">species</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
    albigula audubonii bilineata brunneicapillus chlorurus clarki eremicus
          62        69       223              23        11      1       14
  F      474         0         0               0         0      0      372
  M      368         0         0               0         0      0      468

    flavus fulvescens fulviventer fuscus gramineus harrisi hispidus leucogaster
        15          0           0      2         3     136        2          16
  F    222         46           3      0         0       0       68         373
  M    302         16           2      0         0       0       42         397

    leucophrys maniculatus megalotis melanocorys merriami ordii penicillatus
             2           9        33          13       45     3            6
  F          0         160       637           0     2522   690          221
  M          0         248       680           0     3108   792          155

    scutalatus  sp. spectabilis spilosoma squamata taylori torridus viridis
             1   18          42       149       16       0       28       1
  F          0    4        1135         1        0       0      390       0
  M          0    5        1232         1        0       3      441       0</code></pre>
</div>
<p>To make sure Remy can work on this anywhere, Mickey needs to ensure
he has the required dataset to run the code.</p>
<div id="exercise-4-quick-think-2-mins" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-4-quick-think-2-mins" class="callout-inner">
<h3 class="callout-title">Exercise 4: Quick, think! (2 mins)</h3>
<div class="callout-content">
<p>Based on the current minimal code, which dataset does Mickey need to
recreate? Hint: they currently have two datasets, <code>rodents</code>
and <code>rodents_subset</code>.</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<p>Mickey needs to provide a mock dataset to replace the original
<code>rodents</code> dataset.</p>
</div>
</div>
</div>
</div>
<div id="accordionInstructor7" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor7" aria-expanded="false" aria-controls="collapseInstructor7">
  <h3 class="accordion-header" id="headingInstructor7">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor7" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor7" aria-labelledby="headingInstructor7">
<div class="accordion-body">
<p>Make sure participants understand the distinction we are trying to
make and why it matters. It may not be straightforward. While it does
not address a specific LO, it is relevant to being able to create a
dataset for a given reprex.</p>
</div>
</div>
</div>
</div>
<p>Let’s take a closer look at the dataset we need to substitute and
then answer the questions outlined earlier.</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">head</span><span class="op">(</span><span class="va">rodents</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  record_id month day year plot_id species_id sex hindfoot_length weight
1         1     7  16 1977       2         NL   M              32     NA
2         2     7  16 1977       3         NL   M              33     NA
3         3     7  16 1977       2         DM   F              37     NA
4         4     7  16 1977       7         DM   M              36     NA
5         5     7  16 1977       3         DM   M              35     NA
6         6     7  16 1977       1         PF   M              14     NA
        genus  species   taxa                plot_type
1     Neotoma albigula Rodent                  Control
2     Neotoma albigula Rodent Long-term Krat Exclosure
3   Dipodomys merriami Rodent                  Control
4   Dipodomys merriami Rodent         Rodent Exclosure
5   Dipodomys merriami Rodent Long-term Krat Exclosure
6 Perognathus   flavus Rodent        Spectab exclosure</code></pre>
</div>
<div id="exercise-5-your-turn-5-mins" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="exercise-5-your-turn-5-mins" class="callout-inner">
<h3 class="callout-title">Exercise 5: Your turn! (5 mins)</h3>
<div class="callout-content">
<p>Try to answer the following questions on your own to determine what
we need to include in our minimal reproducible dataset:</p>
<ol style="list-style-type: decimal">
<li>Which variables does Mickey need to replicate their problem?</li>
<li>What data type (discrete or continuous) is each variable?</li>
<li>How many levels and/or observations are necessary?</li>
<li>Do the values need to be distributed in a specific way?</li>
<li>Are there any NAs that could be relevant?</li>
</ol>
</div>
</div>
</div>
<div id="accordionInstructor8" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor8" aria-expanded="false" aria-controls="collapseInstructor8">
  <h3 class="accordion-header" id="headingInstructor8">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor8" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor8" aria-labelledby="headingInstructor8">
<div class="accordion-body">
<p>Give them some time to think it through, maybe in pairs or small
groups, but <strong>focus on working through the answers together, even
if not everyone has finished</strong>. Go one question at a time (time
to answer the first -&gt; walk through solution -&gt; time to answer the
second -&gt; etc.).</p>
</div>
</div>
</div>
</div>
<p>Let’s go over the answers together and help Mickey build a dataset as
we go along!</p>
<div id="accordionInstructor9" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor9" aria-expanded="false" aria-controls="collapseInstructor9">
  <h3 class="accordion-header" id="headingInstructor9">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor9" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor9" aria-labelledby="headingInstructor9">
<div class="accordion-body">
<p>Begin creating the dataset with the information gained from each
question, then you can put it all together.</p>
</div>
</div>
</div>
</div>
<ol style="list-style-type: decimal">
<li>How many variables does Mickey need to reproduce their problem?</li>
</ol>
<p>They need species, sex, and maybe a third identifier like record_id.
This means they potentially need 3 vectors (remember, each column in a
dataframe is essentially a vector, and in “tidy data” should correspond
with a variable; each row is then an observation).</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create 3 variables: species, sex, and maybe record_id</span></span>
<span></span>
<span><span class="co"># a vector for species:</span></span>
<span></span>
<span><span class="co"># a vector for sex:</span></span>
<span></span>
<span><span class="co"># a vector for record_id:</span></span></code></pre>
</div>
<ol start="2" style="list-style-type: decimal">
<li>What data type (discrete or continuous) is each variable?</li>
</ol>
<p>Species and sex are both discrete (categorical) variables, while
record ID would be more continuous.</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create 3 variables: species, sex, and maybe record_id</span></span>
<span></span>
<span><span class="co"># a vector for species: categorical </span></span>
<span></span>
<span><span class="co"># a vector for sex: categorical</span></span>
<span></span>
<span><span class="co"># a vector for record_id: continuous</span></span></code></pre>
</div>
<ol start="3" style="list-style-type: decimal">
<li>How many levels and/or observations are necessary?</li>
</ol>
<p>Since Mickey is filtering their dataset down to 2 categories for both
species and sex, that means they need at least 3 levels in each to start
with. In terms of number of observations there don’t seem to be specific
restrictions other than they probably want at least 1 observation per
original category, so 2*3=6, or they can just pick a generally nice
number like 10. This is where creating a reprex dataset becomes a bit
more of an art than a science; it is common to use trial and error until
the problem is replicated accurately.</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create 3 variables: species, sex, and maybe record_id</span></span>
<span></span>
<span><span class="co"># a vector for species: categorical with 3 levels </span></span>
<span></span>
<span><span class="co"># a vector for sex: categorical with 3 levels </span></span>
<span></span>
<span><span class="co"># a vector for record_id: continuous, ~10</span></span></code></pre>
</div>
<ol start="4" style="list-style-type: decimal">
<li>Do the values need to be distributed in a specific way?</li>
</ol>
<p>This question probably isn’t going to be relevant most of the time,
but certainly worth considering. If Mickey needed a longer dataset of
measurements they may have wanted to make sure it was normally
distributed. If they needed a longer dataset of counts they may have
wanted to make sure it was Poisson distributed. Or maybe they had binary
data. But in this case, Mickey has a fairly short dataset and the code
doesn’t include anything that should vary depending on the distribution,
so it probably doesn’t matter. Again, this process can be one of trial
and error. They can always come back to this question if they are unable
to replicate their problem (hint: in which case the distribution may be
related to the problem they are having!).</p>
<ol start="5" style="list-style-type: decimal">
<li>Are there any NAs that could be relevant?</li>
</ol>
<p>Mickey’s data does have NAs for the sex variable. It might not matter
or it could be important, so let’s have them put in NAs in the mock
dataset just in case.</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create 3 variables: species, sex, and maybe record_id</span></span>
<span></span>
<span><span class="co"># a vector for species: categorical with 3 levels</span></span>
<span><span class="va">species</span> <span class="op">&lt;-</span> <span class="fu">sample</span><span class="op">(</span><span class="va">letters</span>, <span class="fl">3</span>, replace<span class="op">=</span><span class="cn">F</span><span class="op">)</span> </span>
<span>          <span class="co"># or name 3 categories like we do with sex below</span></span>
<span><span class="va">species</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "i" "h" "a"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># a vector for sex: categorical with 3 levels, one of which is NA </span></span>
<span><span class="va">sex</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">'M'</span>,<span class="st">'F'</span>,<span class="cn">NA</span><span class="op">)</span></span>
<span><span class="va">sex</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "M" "F" NA </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># a vector for record_id: continuous, ~10 </span></span>
<span><span class="va">record_id</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span> </span>
<span><span class="va">record_id</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Now let's go "sampling" and put our "obervations" in a dataframe</span></span>
<span><span class="va">sample_data</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span></span>
<span>  <span class="co"># record_id stays the same, since these are our 10 "observations"</span></span>
<span>  record_id <span class="op">=</span> <span class="va">record_id</span>,</span>
<span>  <span class="co"># randomly select 10 observations from our list of species</span></span>
<span>  species <span class="op">=</span> <span class="fu">sample</span><span class="op">(</span><span class="va">species</span>, <span class="fl">10</span>, replace<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,</span>
<span>  <span class="co"># randomly select 10 observations from our list of sexes</span></span>
<span>  sex <span class="op">=</span> <span class="fu">sample</span><span class="op">(</span><span class="va">sex</span>, <span class="fl">10</span>, replace<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Look at our new dataset</span></span>
<span><span class="va">sample_data</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   record_id species  sex
1          1       a    M
2          2       a    M
3          3       i    M
4          4       h &lt;NA&gt;
5          5       h    F
6          6       i &lt;NA&gt;
7          7       h    F
8          8       a    M
9          9       a &lt;NA&gt;
10        10       h &lt;NA&gt;</code></pre>
</div>
<p>And just like that we helped Mickey create a mock dataset from
scratch! Notice that they could also have compiled the same type of
dataset in a single line by creating each vector within
<code>data.frame()</code></p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sample2_data</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span></span>
<span>  record_id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,</span>
<span>  species <span class="op">=</span> <span class="fu">sample</span><span class="op">(</span><span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>, <span class="fl">10</span>, replace<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,</span>
<span>  sex <span class="op">=</span> <span class="fu">sample</span><span class="op">(</span><span class="fu">c</span><span class="op">(</span><span class="st">'M'</span>,<span class="st">'F'</span>, <span class="cn">NA</span><span class="op">)</span>, <span class="fl">10</span>, replace<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">sample2_data</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   record_id species  sex
1          1       a    M
2          2       a    F
3          3       a &lt;NA&gt;
4          4       c    F
5          5       c &lt;NA&gt;
6          6       c    M
7          7       a    M
8          8       c &lt;NA&gt;
9          9       b    M
10        10       b    F</code></pre>
</div>
<p><strong>Important</strong>: Notice that the outputs of the two
datasets are not the same. If you want the outputs to be EXACTLY the
same each time, but you are using <code>sample()</code> which is an
inherently random process, you must first use <code>set.seed()</code>
and share that with your helper too.</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">set.seed</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span> <span class="co"># set seed before recreating the sample</span></span>
<span><span class="va">sample_data</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span></span>
<span>  record_id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,</span>
<span>  species <span class="op">=</span> <span class="fu">sample</span><span class="op">(</span><span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>, <span class="fl">10</span>, replace<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,</span>
<span>  sex <span class="op">=</span> <span class="fu">sample</span><span class="op">(</span><span class="fu">c</span><span class="op">(</span><span class="st">'M'</span>,<span class="st">'F'</span>, <span class="cn">NA</span><span class="op">)</span>, <span class="fl">10</span>, replace<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">sample_data</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   record_id species  sex
1          1       a &lt;NA&gt;
2          2       c    M
3          3       a    M
4          4       b    M
5          5       a    F
6          6       c    F
7          7       c    F
8          8       b    F
9          9       b &lt;NA&gt;
10        10       c    M</code></pre>
</div>
<div id="callout5" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div class="callout-inner">
<div class="callout-content">
<p>Adding a <code>set.seed()</code> at the start of your reprex will
ensure anyone else who runs the same code <strong>in the same
order</strong> will always get the same results. However, if using it
more generally, you may want to read more about it. For example, in the
example below we set a seed of 2 and then run <code>sample(10)</code>
twice. You will notice that the output of each sample run is not the
same. However, if you run the whole code again, you will see that each
of the outputs actually do stay the same.</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">set.seed</span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu">sample</span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> [1]  5  6  9  1 10  7  4  8  3  2</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">sample</span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> [1]  1  3  6  2  9 10  7  5  4  8</code></pre>
</div>
</div>
</div>
</div>
<p>Great! Now we need to check whether the mock dataset works with the
minimal code Mickey created earlier. Does it run? Does it replicate the
problem they were having?</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Minimal code [or whatever we end up with] </span></span>
<span><span class="va">sample_subset</span> <span class="op">&lt;-</span> <span class="va">sample_data</span> <span class="op">%&gt;%</span> <span class="co"># replace rodents with our sample dataset</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">species</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span><span class="op">)</span>, <span class="co"># replace species with those from our sample dataset</span></span>
<span>         <span class="va">sex</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"F"</span>, <span class="st">"M"</span><span class="op">)</span><span class="op">)</span> <span class="co"># this can stay the same because we recreated it the same</span></span>
<span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">sample_subset</span><span class="op">$</span><span class="va">sex</span>, <span class="va">sample_subset</span><span class="op">$</span><span class="va">species</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
    a b
  F 1 0
  M 0 1</code></pre>
</div>
<p>It works! The sample size has unexpectedly been reduced to just 2
observations, when we would have expected a sample of 8, based on the
sample_data output above. Wherever the issue may lie, we were able to
successfully replicate it in this minimal reproducible example.</p>
</section><section><h2 class="section-heading" id="using-the-original-data-set">4.6 Using the original data set<a class="anchor" aria-label="anchor" href="#using-the-original-data-set"></a>
</h2>
<hr class="half-width">
<p>Even if you master the art of creating mock datasets, there may be
occasions in which your data or problem is too complex and you can’t
seem to replicate the issue. Or maybe you still think using your
original data would just be easier.</p>
<p>In cases when you want to make your own data minimal and
reproducible, you will want to take a similar approach to what we did in
Episode 3 when making the code minimal. Keep what is essential, get rid
of the rest. In other words, we will want to subset our data into a
smaller, more digestible chunk.</p>
<p>The question still arises: how do I know what is essential?</p>
<p>Use the same guiding questions that we used earlier!</p>
<ol style="list-style-type: decimal">
<li>Which variables are necessary to replicate the problem?</li>
<li>What data type (discrete or continuous) is each variable? (perhaps
less necessary, since you are keeping the original variables)</li>
<li>How many levels and/or observations are necessary? (we don’t want to
get rid of more than we need)</li>
<li>Do the values need to be distributed in a specific way? (worth
keeping in mind in terms of how we are removing observations)</li>
<li>Are there any NAs that could be relevant?</li>
</ol>
<div id="accordionInstructor10" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor10" aria-expanded="false" aria-controls="collapseInstructor10">
  <h3 class="accordion-header" id="headingInstructor10">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor10" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor10" aria-labelledby="headingInstructor10">
<div class="accordion-body">
<p>You can give them time to answer those questions on their own first,
like in Exercise 5, or just go through them together.</p>
</div>
</div>
</div>
</div>
<p>Based on our previous answers we end up with:</p>
<ol style="list-style-type: decimal">
<li>We need species, sex, and maybe record_id</li>
<li>Species and sex are categorical, record_id is a continuous count of
our observations.</li>
<li>As we said earlier, we want 3 each for species and sex, which
happens to already be the case. And we could reduce our record_id size
to ~10.</li>
<li>Not really, but we want to make sure that when we reduce the number
of observations we still have observations in each of the 3 levels in
species and sex.</li>
<li>NA’s are present in the sex variable, so let’s make sure we keep at
least one.</li>
</ol>
<p>Now that we have a clearer goal, let’s subset the data.</p>
<p>Useful functions for subsetting a dataset include
<code>subset()</code>, <code>head()</code>, <code>tail()</code>, and
indexing with [] (e.g., iris[1:4,]). Alternatively, you can use
tidyverse functions like <code>select()</code>, and
<code>filter()</code> from the tidyverse. You can also use the same
<code>sample()</code> functions we covered earlier.</p>
<p><strong><em>Note</em>:</strong> you should already have an
understanding of how to subset or wrangle data using the tidyverse from
the <a href="https://datacarpentry.org/R-ecology-lesson/" class="external-link">Data Analysis
and Visualization in R for Ecologists</a>. If not, go check it out!</p>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Mickey's minimal code [ UPDATE AS NEEDED ]</span></span>
<span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">dplyr</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">ggplot2</span><span class="op">)</span></span>
<span></span>
<span><span class="va">rodents</span><span class="op">&lt;-</span><span class="fu">read.csv</span><span class="op">(</span><span class="st">'data/surveys_complete_77_89.csv'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">rodents_subset</span> <span class="op">&lt;-</span> <span class="va">rodents</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">species</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"ordii"</span>, <span class="st">"spectabilis"</span><span class="op">)</span>,</span>
<span>         <span class="va">sex</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"F"</span>, <span class="st">"M"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">rodents_subset</span><span class="op">$</span><span class="va">sex</span>, <span class="va">rodents_subset</span><span class="op">$</span><span class="va">species</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
    ordii spectabilis
  F   333           0
  M     0         610</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">table</span><span class="op">(</span><span class="va">rodents</span><span class="op">$</span><span class="va">sex</span>, <span class="va">rodents</span><span class="op">$</span><span class="va">species</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
    albigula audubonii bilineata brunneicapillus chlorurus clarki eremicus
          62        69       223              23        11      1       14
  F      474         0         0               0         0      0      372
  M      368         0         0               0         0      0      468

    flavus fulvescens fulviventer fuscus gramineus harrisi hispidus leucogaster
        15          0           0      2         3     136        2          16
  F    222         46           3      0         0       0       68         373
  M    302         16           2      0         0       0       42         397

    leucophrys maniculatus megalotis melanocorys merriami ordii penicillatus
             2           9        33          13       45     3            6
  F          0         160       637           0     2522   690          221
  M          0         248       680           0     3108   792          155

    scutalatus  sp. spectabilis spilosoma squamata taylori torridus viridis
             1   18          42       149       16       0       28       1
  F          0    4        1135         1        0       0      390       0
  M          0    5        1232         1        0       3      441       0</code></pre>
</div>
<p>Given that the code that is going wrong is that which creates
rodents_subset, we need to create a minimal reproducible version of
rodents! We can then insert our new_rodents dataset in place of the
original rodents one.</p>
<p><strong>Step 1: select the variables of interest</strong></p>
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># subset rodent into new_rodent to make it minimal</span></span>
<span><span class="co"># Note: there are many ways you could do this!</span></span>
<span><span class="va">new_rodents</span> <span class="op">&lt;-</span> <span class="va">rodents</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># 1. select the variables of interest</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">record_id</span>, <span class="va">species</span>, <span class="va">sex</span><span class="op">)</span></span>
<span>  <span class="co"># PAUSE. Does this work so far?</span></span>
<span><span class="va">new_rodents</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   record_id      species sex
1          1     albigula   M
2          2     albigula   M
3          3     merriami   F
4          4     merriami   M
5          5     merriami   M
6          6       flavus   M
7          7     eremicus   F
8          8     merriami   M
9          9     merriami   F
10        10       flavus   F
11        11  spectabilis   F
12        12     merriami   M
13        13     merriami   M
14        14     merriami
15        15     merriami   F
16        16     merriami   F
17        17  spectabilis   F
18        18 penicillatus   M
19        19       flavus
20        20  spectabilis   F
21        21     merriami   F
22        22     albigula   F
23        23     merriami   M
24        24     hispidus   M
25        25     merriami   M
26        26     merriami   M
27        27     merriami   M
28        28     merriami   M
29        29 penicillatus   M
30        30  spectabilis   F
31        31     merriami   F
32        32     merriami   F
33        33     merriami   F
 [ reached 'max' / getOption("max.print") -- omitted 16845 rows ]</code></pre>
</div>
<p><strong>Step 2-5: reduce the number of observations to ~10 while
making sure the dataset still contains at least 3 species and at least 3
sexes</strong></p>
<p>While the rest is just one step, it is the trickiest, because this is
where we want to ensure the key elements of our original dataset, as
defined earlier, are preserved.</p>
<div id="exercise-6-your-turn-5-mins" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="exercise-6-your-turn-5-mins" class="callout-inner">
<h3 class="callout-title">Exercise 6: Your Turn! (5 mins)</h3>
<div class="callout-content">
<p>How would you continue the subsetting pipeline? How could you reduce
the number of observations while <strong>making sure you still have at
least 3 species and 3 sexes left</strong>? Hint: there is no single
right answer! Trial and error works wonders.</p>
</div>
</div>
</div>
<div class="codewrapper sourceCode" id="cb49">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">set.seed</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">new_rodents</span> <span class="op">&lt;-</span> <span class="va">rodents</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># 1. select the variables of interest</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">record_id</span>, <span class="va">species</span>, <span class="va">sex</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">slice_sample</span><span class="op">(</span>n<span class="op">=</span><span class="fl">4</span>, replace <span class="op">=</span> <span class="cn">F</span>, by<span class="op">=</span><span class="st">'sex'</span><span class="op">)</span></span>
<span><span class="va">new_rodents</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   record_id     species sex
1       2359    merriami   M
2      16335    albigula   M
3       9910       ordii   M
4       8278       ordii   M
5      12038    merriami   F
6       7862   megalotis   F
7       9221    albigula   F
8       1335 spectabilis   F
9       3320 melanocorys
10       343      flavus
11     14482        &lt;NA&gt;
12      9376   spilosoma    </code></pre>
</div>
<p>The code ran without issues, hooray! But do we end up with what we
were looking for?</p>
<ol style="list-style-type: decimal">
<li>Do we have ~10 observations? Yes! 9 seems good enough</li>
<li>Do we have at least 3 species? Yes! We have 7 (we could choose to
reduce this further)</li>
<li>Do we have at least 3 sexes? Yes! M, F, and blank</li>
</ol>
<p>Great! All of our requirements are fulfilled. Now let’s see if it
replicates Mickey’s problem when we add it to their minimal code.</p>
<p><strong><em>Note:</em></strong> <code>slice_sample()</code> and
similar functions allow you to specify and customize how exactly you
want that sample to be taken (check the documentation!). For example,
you can specify a proportion of rows to select, specify how to order
variables, whether ties <strong>[may require more explanation]</strong>
should be kept together, or even whether to weigh certain variables. All
of this allows you to keep aspects of your dataset that may be relevant
and hard to replicate otherwise.</p>
<p>Remember the minimal code:</p>
<div class="codewrapper sourceCode" id="cb51">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rodents_subset</span> <span class="op">&lt;-</span> <span class="va">rodents</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">species</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"ordii"</span>, <span class="st">"spectabilis"</span><span class="op">)</span>,</span>
<span>         <span class="va">sex</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"F"</span>, <span class="st">"M"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">rodents_subset</span><span class="op">$</span><span class="va">sex</span>, <span class="va">rodents_subset</span><span class="op">$</span><span class="va">species</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
    ordii spectabilis
  F   333           0
  M     0         610</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb53">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">table</span><span class="op">(</span><span class="va">rodents</span><span class="op">$</span><span class="va">sex</span>, <span class="va">rodents</span><span class="op">$</span><span class="va">species</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
    albigula audubonii bilineata brunneicapillus chlorurus clarki eremicus
          62        69       223              23        11      1       14
  F      474         0         0               0         0      0      372
  M      368         0         0               0         0      0      468

    flavus fulvescens fulviventer fuscus gramineus harrisi hispidus leucogaster
        15          0           0      2         3     136        2          16
  F    222         46           3      0         0       0       68         373
  M    302         16           2      0         0       0       42         397

    leucophrys maniculatus megalotis melanocorys merriami ordii penicillatus
             2           9        33          13       45     3            6
  F          0         160       637           0     2522   690          221
  M          0         248       680           0     3108   792          155

    scutalatus  sp. spectabilis spilosoma squamata taylori torridus viridis
             1   18          42       149       16       0       28       1
  F          0    4        1135         1        0       0      390       0
  M          0    5        1232         1        0       3      441       0</code></pre>
</div>
<p>We now want to replace <code>rodents</code> with our
<code>new_rodents</code>. Do we need to change anything else?</p>
<p>We actually still have ordii and spectabilis as species in our list,
so we can keep it as is. Same for sex. So we’re all set!</p>
<div class="codewrapper sourceCode" id="cb55">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">new_subset</span> <span class="op">&lt;-</span> <span class="va">new_rodents</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">species</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"ordii"</span>, <span class="st">"spectabilis"</span><span class="op">)</span>,</span>
<span>         <span class="va">sex</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"F"</span>, <span class="st">"M"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>The code ran without any errors! But does it replicate Mickey’s
problem?</p>
<div id="accordionInstructor11" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor11" aria-expanded="false" aria-controls="collapseInstructor11">
  <h3 class="accordion-header" id="headingInstructor11">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor11" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor11" aria-labelledby="headingInstructor11">
<div class="accordion-body">
<p><strong><em>Note:</em></strong> if the new dataset had an odd number
of rows it would spit out a warning giving you a hint as to what the
source of the problem may be.</p>
</div>
</div>
</div>
</div>
<p>Take a step back to remind yourself of what you are looking for. What
was the problem we had identified?</p>
<ul>
<li>The number of rows that remain after the filter is lower than
expected.</li>
</ul>
<p>So what would we expect to see with this new dataset? Since it is
nice and short, this makes it a lot easier to predict the outcome.</p>
<ul>
<li>We are asking for the 2 ordii rows, both males, and the 1
spectabilis row, which is female.</li>
</ul>
<div class="codewrapper sourceCode" id="cb56">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">table</span><span class="op">(</span><span class="va">new_subset</span><span class="op">$</span><span class="va">sex</span>, <span class="va">new_subset</span><span class="op">$</span><span class="va">species</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&lt; table of extent 0 x 0 &gt;</code></pre>
</div>
<p>Instead we end up with nothing! Why aren’t we getting the rows we are
asking for?</p>
<p>Maybe our table is just wrong, let’s look at the actual dataset we
end up with</p>
<div class="codewrapper sourceCode" id="cb58">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">new_subset</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] record_id species   sex
&lt;0 rows&gt; (or 0-length row.names)</code></pre>
</div>
<p>Still nothing! What is going on?? We don’t have an answer, but we
certainly replicated a problem that occurs when we filter the data. Time
to ask for help!</p>
<div id="accordionInstructor12" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor12" aria-expanded="false" aria-controls="collapseInstructor12">
  <h3 class="accordion-header" id="headingInstructor12">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor12" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor12" aria-labelledby="headingInstructor12">
<div class="accordion-body">
<p>I love that the <code>filter {dplyr}</code> documentation is
thoroughly unhelpful on this</p>
</div>
</div>
</div>
</div>
<p>But wait, Mickey’s dataset is now minimal and relevant, but is it
reproducible (accessible outside their device)? Not yet. We created a
subset of their original dataset <code>rodents</code> but this came from
a file on their computer. They could share the csv file and add a line
of code that uploads it… but we already said this is not good practice
for a reprex, and it makes it hard to ask for help on a community
website. Remember, the more steps required, the less likely someone will
want to help.</p>
<p>Thankfully, there is a nifty function <code>dput()</code> that can
help us out. Let’s try it and see what happens.</p>
<div class="codewrapper sourceCode" id="cb60">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dput</span><span class="op">(</span><span class="va">new_rodents</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fu">structure</span><span class="op">(</span><span class="fu">list</span><span class="op">(</span>record_id <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">2359L</span>, <span class="fl">16335L</span>, <span class="fl">9910L</span>, <span class="fl">8278L</span>, <span class="fl">12038L</span>,</span>
<span><span class="fl">7862L</span>, <span class="fl">9221L</span>, <span class="fl">1335L</span>, <span class="fl">3320L</span>, <span class="fl">343L</span>, <span class="fl">14482L</span>, <span class="fl">9376L</span><span class="op">)</span>, species <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"merriami"</span>,</span>
<span><span class="st">"albigula"</span>, <span class="st">"ordii"</span>, <span class="st">"ordii"</span>, <span class="st">"merriami"</span>, <span class="st">"megalotis"</span>, <span class="st">"albigula"</span>,</span>
<span><span class="st">"spectabilis"</span>, <span class="st">"melanocorys"</span>, <span class="st">"flavus"</span>, <span class="cn">NA</span>, <span class="st">"spilosoma"</span><span class="op">)</span>, sex <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"M"</span>,</span>
<span><span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span><span class="op">)</span><span class="op">)</span>, class <span class="op">=</span> <span class="st">"data.frame"</span>, row.names <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="cn">NA</span>,</span>
<span><span class="op">-</span><span class="fl">12L</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>It spit out a hard-to-read but not excessively long chunk of code.
This code, when run, will recreate the <code>new_rodents</code> dataset!
We can also break it down and label it further to help the reader.</p>
<div class="codewrapper sourceCode" id="cb62">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">reprex_data</span> <span class="op">&lt;-</span> <span class="fu">structure</span><span class="op">(</span><span class="fu">list</span><span class="op">(</span></span>
<span>  </span>
<span><span class="co"># a unique identifier</span></span>
<span>record_id <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">2359L</span>, <span class="fl">16335L</span>, <span class="fl">9910L</span>, <span class="fl">8278L</span>, <span class="fl">12038L</span>, <span class="fl">7862L</span>, <span class="fl">9221L</span>, <span class="fl">1335L</span>, <span class="fl">9862L</span>, <span class="fl">14979L</span>, <span class="fl">11333L</span>, <span class="fl">351L</span><span class="op">)</span>, </span>
<span></span>
<span><span class="co"># a list of species</span></span>
<span>species <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"merriami"</span>, <span class="st">"albigula"</span>, <span class="st">"ordii"</span>, <span class="st">"ordii"</span>, <span class="st">"merriami"</span>, <span class="st">"megalotis"</span>, <span class="st">"albigula"</span>, <span class="st">"spectabilis"</span>, <span class="st">"harrisi"</span>, <span class="st">"merriami"</span>, <span class="st">"spilosoma"</span>, <span class="st">"leucogaster"</span><span class="op">)</span>, </span>
<span></span>
<span><span class="co"># a list of sexes. Note: this includes some blanks!</span></span>
<span>sex <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span>, <span class="st">""</span><span class="op">)</span><span class="op">)</span>,</span>
<span></span>
<span>class <span class="op">=</span> <span class="st">"data.frame"</span>, row.names <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="cn">NA</span>, <span class="op">-</span><span class="fl">12L</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">print</span><span class="op">(</span><span class="va">reprex_data</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   record_id     species sex
1       2359    merriami   M
2      16335    albigula   M
3       9910       ordii   M
4       8278       ordii   M
5      12038    merriami   F
6       7862   megalotis   F
7       9221    albigula   F
8       1335 spectabilis   F
9       9862     harrisi
10     14979    merriami
11     11333   spilosoma
12       351 leucogaster    </code></pre>
</div>
<p>Ta-da! Now anyone can easily recreate Mickey’s minimal dataset and
use it to run the minimal code. Now, was that <em>really</em> easier
than creating a dataset from scratch?</p>
<p>Some of you may still be thinking that you could just use
<code>dput()</code> on the original dataset. And it would work. But that
wouldn’t be very considerate to those who are trying to help.</p>
<div id="exercise-7-try-it-1-min" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="exercise-7-try-it-1-min" class="callout-inner">
<h3 class="callout-title">Exercise 7: Try it! (1 min)</h3>
<div class="callout-content">
<p>Try running <code>dput(rodents)</code> in your script.</p>
</div>
</div>
</div>
<p>It becomes a huge chunk of code! When clearly we don’t need all of
that.</p>
<p>Remember, we want to keep everything minimal for many reasons:</p>
<ul>
<li>to make it easy for our helpers to understand our data and code</li>
<li>to allow helpers to quickly focus their efforts on the right
factors</li>
<li>to make the problem-solving process as easy and painless as
possible</li>
<li>bonus: to help <em>us</em> better understand and zero-in on the
source of our problem, often stumbling upon a solution along the
way</li>
</ul>
<p>Nevertheless, it remains an option for when your data appears too
complex or you are not quite sure where your problem lies and therefore
are not sure what minimal components are needed to reproduce the
example. In other words, when you don’t have a good mental model of what
the problem is even after going through the initial steps we outlined
earlier in the lesson.</p>
</section><section><h2 class="section-heading" id="using-an-r-built-dataset">4.7 Using an R-built dataset<a class="anchor" aria-label="anchor" href="#using-an-r-built-dataset"></a>
</h2>
<hr class="half-width">
<p>The last approach we mentioned is to build a minimal reproducible
dataset based on the datasets that already exist within R (and therefore
everyone would have access to).</p>
<p>A list of readily available datasets can be found using
<code>library(help="datasets")</code>. You can then use <code>?</code>
in front of the dataset name to get more information about the contents
of the dataset.</p>
<p>For a more detailed discussion of the benefits of using this approach
see the Pros and Cons callout in section 4.3.</p>
<p>This approach essentially blends the skills you already learned in
the first two. You need to identify a dataset with appropriate variables
that match the “key elements” of the original dataset. You then need to
further reduce that dataset to a minimal, relevant, number or rows. Once
again, you can use the previously learned functions such as
<code>select()</code>, <code>filter()</code>, or
<code>sample()</code>.</p>
<p>Since you already learned everything you need, why not try it
yourself?</p>
<div id="exercise-8-extra-challenge-10-mins" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-8-extra-challenge-10-mins" class="callout-inner">
<h3 class="callout-title">Exercise 8: Extra Challenge (10 mins)</h3>
<div class="callout-content">
<p>Using the “HairEyeColor” dataset, create a minimal reproducible
dataset for the same issue and minimal code we have been exploring.</p>
<ol style="list-style-type: decimal">
<li><p>Start by using <code>?HairEyeColor</code> to read a description
of the dataset and <code>View(HairEyeColor)</code> to see the actual
dataset.</p></li>
<li><p>Which variables would be a good match for our situation? What are
our requirements?</p></li>
<li><p>How can we subset this dataset to make it minimal and still
replicate our issue?</p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Show me the solution </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" data-bs-parent="#accordionSolution5" aria-labelledby="headingSolution5">
<div class="accordion-body">
<p>Remember, there are many possible solutions! The most important
feature is that the example dataset can replicate the issue when used
within our minimal code.</p>
<p>The following is 1 possible solution:</p>
<p>We selected Hair and Eye as replacements for species and sex because
they are both categorical and have at least 3 levels. We don’t strictly
need anything else. We will call our new <code>rodents</code>
replacement <code>hyc</code>. We set a seed because we want a random
sample.</p>
<div class="codewrapper sourceCode" id="cb64">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">set.seed</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># the dummy dataset</span></span>
<span><span class="va">hyc</span> <span class="op">&lt;-</span> <span class="fu">as.data.frame</span><span class="op">(</span><span class="va">HairEyeColor</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="co"># oh no! Needs to be converted to df -- might need to change example or have them figure that one out... or we can give them this first line.</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">Hair</span>, <span class="va">Eye</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">slice_sample</span><span class="op">(</span>n<span class="op">=</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="fu">print</span><span class="op">(</span><span class="va">hyc</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>    Hair   Eye
1  Black Hazel
2  Blond Brown
3    Red  Blue
4  Black Brown
5  Brown Brown
6    Red  Blue
7    Red Hazel
8  Brown Green
9  Brown Brown
10   Red Brown</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb66">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># the minimal code</span></span>
<span><span class="va">hyc_subset</span> <span class="op">&lt;-</span> <span class="va">hyc</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">Hair</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">'Red'</span>,<span class="st">'Blonde'</span><span class="op">)</span>,</span>
<span>         <span class="va">Eye</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">'Blue'</span>, <span class="st">'Brown'</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># illustrating the issue</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">hyc_subset</span><span class="op">$</span><span class="va">Hair</span>, <span class="va">hyc_subset</span><span class="op">$</span><span class="va">Eye</span><span class="op">)</span> </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
        Brown Blue Hazel Green
  Black     0    0     0     0
  Brown     0    0     0     0
  Red       0    1     0     0
  Blond     0    0     0     0</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb68">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># the whole subset</span></span>
<span><span class="fu">print</span><span class="op">(</span><span class="va">hyc_subset</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  Hair  Eye
1  Red Blue</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb70">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># But we know there are more!</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">hyc</span><span class="op">$</span><span class="va">Hair</span>, <span class="va">hyc</span><span class="op">$</span><span class="va">Eye</span><span class="op">)</span> <span class="co"># Reds have 2 Blue and 1 Brown, and Blonds have 1 Brown!</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
        Brown Blue Hazel Green
  Black     1    0     1     0
  Brown     2    0     0     1
  Red       1    2     1     0
  Blond     1    0     0     0</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="what-about-nas" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="what-about-nas" class="callout-inner">
<h3 class="callout-title"><em>What about NAs?</em></h3>
<div class="callout-content">
<p>If your data has NAs and they may be causing the problem, it is
important to include them in your example dataset. You can find where
there are NAs in your dataset by using <code>is.na</code>, for example:
<code>is.na(krats$weight)</code>. This will return a logical vector or
TRUE if the cell contains an NA and FALSE if not. The simplest way to
include NAs in your dummy dataset is to directly include it in vectors:
<code>x &lt;- c(1,2,3,NA)</code>. You can also subset a dataset that
already contains NAs, or change some of the values to NAs using
<code>mutate(ifelse())</code> or substitute all the values in a column
by sampling from within a vector that contains NAs.</p>
<p>One important thing to note when subsetting a dataset with NAs is
that subsetting methods that use a condition to match rows won’t
necessarily match NA values in the way you expect. For example</p>
<div class="codewrapper sourceCode" id="cb72">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">test</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span>x <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NA</span>, <span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu">rnorm</span><span class="op">(</span><span class="fl">4</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">test</span> <span class="op">%&gt;%</span> <span class="fu">filter</span><span class="op">(</span><span class="va">x</span> <span class="op">!=</span> <span class="fl">3</span><span class="op">)</span> </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  x          y
1 1 -0.3053884</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb74">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># you might expect that the NA values would be included, since “NA is not equal to 3”. But actually, the expression NA != 3 evaluates to NA, not TRUE. So the NA rows will be dropped!</span></span>
<span><span class="co"># Instead you should use is.na() to match NAs</span></span>
<span><span class="va">test</span> <span class="op">%&gt;%</span> <span class="fu">filter</span><span class="op">(</span><span class="va">x</span> <span class="op">!=</span> <span class="fl">3</span> <span class="op">|</span> <span class="fu">is.na</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   x          y
1 NA  0.4874291
2 NA  0.7383247
3  1 -0.3053884</code></pre>
</div>
</div>
</div>
</div>
<p>Great work! You created a minimal reproducible example. In the next
episode, you will learn about <a href="https://reprex.tidyverse.org" class="external-link">reprex</a>, a package that can
help you double-check that your example is properly reproducible by
running it in a clean environment. (As an added bonus,
<a href="https://reprex.tidyverse.org" class="external-link">reprex</a> will format your example nicely so it’s easy to
post to places like Slack, GitHub, and StackOverflow.)</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>A minimal reproducible dataset (a) contains the minimum number of
lines, variables, and categories, in the correct format, to replicate
your problem; and (b) must be fully reproducible, meaning that someone
else can run the same code from anywhere without additional steps.</li>
<li>To make it accessible, you can create a dataset from scratch using
<code>as.data.frame</code>, you can use an R-built dataset like
<code>cars</code>, or you can use a subset of your own dataset and then
use <code>dput()</code> to generate reproducible code.</li>
</ul>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="bonus-additional-practice">Bonus: Additional Practice<a class="anchor" aria-label="anchor" href="#bonus-additional-practice"></a>
</h2>
<hr class="half-width">
<p>Here are some more practice exercises if you wish to test your
knowledge</p>
<div id="extra-practice-would-need-to-change-from-mpg-since-thats-from-ggplot" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="extra-practice-would-need-to-change-from-mpg-since-thats-from-ggplot" class="callout-inner">
<h3 class="callout-title">Extra Practice? Would need to change from mpg,
since that’s from ggplot</h3>
<div class="callout-content">
<p>For each of the following, identify which data are necessary to
create a minimal reproducible dataset using <code>mpg</code>.</p>
<ol style="list-style-type: upper-alpha">
<li>We want to know how the highway mpg has changed over the years<br>
</li>
<li>We need a list of all “types” of cars and their fuel type for each
manufacturer<br>
</li>
<li>We want to compare the average city mpg for a compact car from each
manufacturer<br>
</li>
</ol>
</div>
</div>
</div>
<p><strong>(I copied these from excercise 6 in the google doc… but I’m
not sure that they are getting at the point of the lesson…)</strong></p>
<div id="another-excercise" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="another-excercise" class="callout-inner">
<h3 class="callout-title">Another Excercise</h3>
<div class="callout-content">
<p>Each of the following examples needs your help to create a dataset
that will correctly reproduce the given result and/or warning message
when the code is run. Fix the dataset shown or fill in the blanks so it
reproduces the problem.</p>
<ol style="list-style-type: upper-alpha">
<li>
<code>set.seed(1)</code>
<code>sample_data &lt;- data.frame(fruit = rep(c(“apple”, “banana”), 6), weight = rnorm(12))</code>
<code>ggplot(sample_data, aes(x = fruit, y = weight)) + geom_boxplot()</code>
<strong>HELP: how do I insert an image from clipboard?? Is it even
possible?</strong>
</li>
<li>bodyweight &lt;- c(12, 13, 14, <strong>,</strong> ) max(bodyweight)
[1] NA</li>
<li>sample_data &lt;- data.frame(x = 1:3, y = 4:6) mean(sample_data<span class="math inline">\(x)
[1] NA
Warning message:
In mean.default(sample_data\)</span>x): argument is not numeric or
logical: returning NA</li>
<li>sample_data &lt;- ____ dim(sample_data) NULL</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6"> Show me the solution </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" data-bs-parent="#accordionSolution6" aria-labelledby="headingSolution6">
<div class="accordion-body">
<ol style="list-style-type: upper-alpha">
<li>“fruit” needs to be a factor and the order of the levels must be
specified:
<code>sample_data &lt;- data.frame(fruit = factor(rep(c("apple", "banana"), 6), levels = c("banana",          "apple")), weight = rnorm(12))</code>
</li>
<li>one of the blanks must be an NA</li>
<li><strong>?? + what’s really the point of this one?</strong></li>
<li><code>sample_data &lt;- data.frame(x = factor(1:3), y = 4:6)</code></li>
</ol>
</div>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-5-asking-your-question"><p>Content from <a href="5-asking-your-question.html">Asking your question</a></p>
<hr>
<p>Last updated on 2025-08-26 |

        <a href="https://github.com/carpentries-incubator/R-help-reprexes/edit/main/episodes/5-asking-your-question.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 12 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I verify that my example is reproducible?</li>
<li>How can I easily share a reproducible example with a mentor or
helper, or online?</li>
<li>How do I ask a good question?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Use the reprex package to test whether an example is
reproducible.</li>
<li>Use the reprex package to format reprexes for posting online.</li>
<li>Understand the benefits and drawbacks of different help forums.</li>
<li>Have a road map to follow when posting a question to make sure it’s
a good question.</li>
<li>Understand what the {reprex} package does and doesn’t do.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Congratulations on finishing your reprex! In this episode, we will
introduce a tool, the <a href="https://reprex.tidyverse.org" class="external-link">reprex</a> package. This package will
help you check that your example is truly reproducible and format it
nicely to make it easy to present to a helper, either in person or
online.</p>
<p><embed src="5-asking-your-question.html"></embed></p>
<p>There are three principles to remember when you think about sharing
your reprex with other people: <strong>Reproducibility</strong>,
<strong>formatting</strong>, and <strong>context</strong>.</p>
<section><h2 class="section-heading" id="reproducibility">1. Reproducibility<a class="anchor" aria-label="anchor" href="#reproducibility"></a>
</h2>
<hr class="half-width">
<p>Haven’t we already talked a lot about reproducibility?</p>
<p>Yes! We have discussed variables and packages, minimal datasets, and
making sure that the problem is meaningfully reproduced by the data that
you choose. But there are some reasons that a code snippet that appears
reproducible in your own R session might not actually be runnable by
someone else.</p>
<ul>
<li><p>You forgot to account for the origins of some functions and/or
variables. We went through our code methodically, but what if we missed
something? It would be nice to confirm that the code is as
self-contained as we thought it was.</p></li>
<li><p>Your code accidentally relies on objects in your R environment
that won’t exist for other people. For example, imagine you defined a
function <code>my_awesome_custom_function()</code> in a project-specific
<code>functions.R</code> script, and your code calls that
function.</p></li>
</ul>
<figure><img src="../fig/custom_function.png" alt='A function called "my_awesome_custom_function" is lurking in my R environment. I must have defined it a while ago and forgotten! Code that includes this function will not run for someone else unless the function definition is also included in the reprex.' class="figure mx-auto d-block"><div class="figcaption">A function called
<code>"my_awesome_custom_function"</code> is lurking in my R
environment. I must have defined it a while ago and forgotten! Code that
includes this function will not run for someone else unless the function
definition is also included in the reprex.</div>
</figure><div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">my_awesome_custom_function</span><span class="op">(</span><span class="st">"the kangaroo rat dataset"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in my_awesome_custom_function("the kangaroo rat dataset"): could not find function "my_awesome_custom_function"</code></pre>
</div>
<p>I might conclude that this code is reproducible–after all, it works
when I run it! But unless I remembered to include the function
definition in the reprex itself, nobody will be able to run the
code.</p>
<p>A corrected reprex would look like this:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_awesome_custom_function</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">{</span><span class="fu">print</span><span class="op">(</span><span class="fu">paste0</span><span class="op">(</span><span class="va">x</span>, <span class="st">" is awesome!"</span><span class="op">)</span><span class="op">)</span><span class="op">}</span></span>
<span><span class="fu">my_awesome_custom_function</span><span class="op">(</span><span class="st">"the kangaroo rat dataset"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "the kangaroo rat dataset is awesome!"</code></pre>
</div>
<ul>
<li>Your code depends on some particular characteristic of your R or
RStudio environment that is not the same as your helper’s environment.
[more details here]</li>
</ul>
<p>There are so many components to remember when thinking about
reproducibility, especially for more complex problems. Wouldn’t it be
nice if we had a way to double check our examples? Luckily, the
<code>reprex</code> package will help you test your reprexes in a clean,
isolated environment to make sure they’re actually reproducible.</p>
<p>The most important function in the <code>reprex</code> package is
called <code>reprex()</code>. Here’s how to use it.</p>
<p>First, install and load the <code>reprex</code> package.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#install.packages("reprex")</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">reprex</span><span class="op">)</span></span></code></pre>
</div>
<p>Second, write some code. This is your reproducible example.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1 2 3 4</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">mean</span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 2.5</code></pre>
</div>
<p>Third, highlight that code and copy it to your clipboard
(e.g. <code>Cmd + C</code> on Mac, or <code>Ctrl + C</code> on
Windows).</p>
<p>Finally, type <code>reprex()</code> into your console.</p>
<pre><code><span><span class="co"># (with the target code snippet copied to your clipboard already...)</span></span>
<span><span class="co"># In the console:</span></span>
<span><span class="fu">reprex</span><span class="op">(</span><span class="op">)</span></span></code></pre>
<p><code>reprex</code> will grab the code that you copied to your
clipboard and run that code in an <em>isolated environment</em>. It will
return a nicely formatted reproducible example that includes your code
and and any results, plots, warnings, or errors generated.</p>
<p>The generated output will be on your computer’s clipboard by default.
Then, you can paste it into GitHub, StackOverflow, Slack, or another
venue.</p>
<div id="callout-the-reprex-package-workflow" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="callout-the-reprex-package-workflow" class="callout-inner">
<h3 class="callout-title">Callout: The <code>reprex</code> package
workflow</h3>
<div class="callout-content">
<p>The <code>reprex</code> package workflow takes some getting used to.
Instead of copying your code <em>into</em> the function, you simply copy
it to the clipboard (a mysterious, invisible place to most of us) and
then let the blank, empty <code>reprex()</code> function go over to the
clipboard by itself and find it.</p>
<p>And then the completed, rendered reprex replaces the original code on
the clipboard and all you need to do is paste, not copy and paste.</p>
</div>
</div>
</div>
<p>Let’s practice this one more time. Here’s some very simple code:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">ggplot2</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">dplyr</span><span class="op">)</span></span>
<span><span class="va">mpg</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu">factor</span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">displ</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu">geom_boxplot</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/5-asking-your-question-rendered-unnamed-chunk-5-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Let’s highlight the code snippet, copy it to the clipboard, and then
run <code>reprex()</code> in the console.</p>
<pre><code><span><span class="co"># In the console:</span></span>
<span><span class="fu">reprex</span><span class="op">(</span><span class="op">)</span></span></code></pre>
<p>The result, which was automatically placed onto my clipboard and
which I pasted here, looks like this:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">ggplot2</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">dplyr</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span><span class="va">mpg</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu">factor</span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">displ</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu">geom_boxplot</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="https://i.imgur.com/bOA0BAS.png" class="figure mx-auto d-block"><!-- --></figure><p><sup>Created on 2024-12-29 with <a href="https://reprex.tidyverse.org" class="external-link">reprex v2.1.1</a></sup></p>
<p>Nice and neat! It even includes the plot produced, so I don’t have to
take screenshots and figure out how to attach them to an email or
something.</p>
<p>The formatting is great, but <code>reprex</code> really shines when
you treat it as a helpful collaborator in your process of building a
reproducible example (including all dependencies, providing minimal
data, etc.)</p>
<p>Let’s see what happens if we forget to include
<code><a href="https://ggplot2.tidyverse.org" class="external-link">library(ggplot2)</a></code> in our small reprex above.</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">dplyr</span><span class="op">)</span></span>
<span><span class="va">mpg</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu">factor</span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">displ</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu">geom_boxplot</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/5-asking-your-question-rendered-unnamed-chunk-6-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>As before, let’s copy that code to the clipboard, run
<code>reprex()</code> in the console, and paste the result here.</p>
<pre><code><span><span class="co"># In the console:</span></span>
<span><span class="fu">reprex</span><span class="op">(</span><span class="op">)</span></span></code></pre>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">dplyr</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span><span class="va">mpg</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu">factor</span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">displ</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu">geom_boxplot</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in ggplot(., aes(x = factor(cyl), y = displ)): could not find function "ggplot"</span></span></code></pre>
</div>
<p><sup>Created on 2024-12-29 with <a href="https://reprex.tidyverse.org" class="external-link">reprex v2.1.1</a></sup></p>
<p>Now we get an error message indicating that R cannot find the
function <code>ggplot</code>! That’s because we forgot to load the
<code>ggplot2</code> package in the reprex.</p>
<p>This happened even though we had <code>ggplot2</code> already loaded
in our own current RStudio session. <code>reprex</code> deliberately
ignores any packages already loaded, running the code in a clean,
isolated R session that’s <em>different from the R session we’ve been
working in</em>. This simulates the experience of someone else trying to
run your reprex on their own computer.</p>
<p>Let’s return to our previous example with the custom function.</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">my_awesome_custom_function</span><span class="op">(</span><span class="st">"the kangaroo rat dataset"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "the kangaroo rat dataset is awesome!"</code></pre>
</div>
<pre><code><span><span class="co"># In the console:</span></span>
<span><span class="fu">reprex</span><span class="op">(</span><span class="op">)</span></span></code></pre>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">my_awesome_custom_function</span><span class="op">(</span><span class="st">"the kangaroo rat dataset"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in my_awesome_custom_function("the kangaroo rat dataset"): could not find function "my_awesome_custom_function"</span></span></code></pre>
</div>
<p><sup>Created on 2024-12-29 with <a href="https://reprex.tidyverse.org" class="external-link">reprex v2.1.1</a></sup></p>
<p>By contrast, if we include the function definition:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_awesome_custom_function</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">{</span><span class="fu">print</span><span class="op">(</span><span class="fu">paste0</span><span class="op">(</span><span class="va">x</span>, <span class="st">" is awesome!"</span><span class="op">)</span><span class="op">)</span><span class="op">}</span></span>
<span><span class="fu">my_awesome_custom_function</span><span class="op">(</span><span class="st">"the kangaroo rat dataset"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "the kangaroo rat dataset is awesome!"</code></pre>
</div>
<pre><code><span><span class="co"># In the console:</span></span>
<span><span class="fu">reprex</span><span class="op">(</span><span class="op">)</span></span></code></pre>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_awesome_custom_function</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">{</span><span class="fu">print</span><span class="op">(</span><span class="fu">paste0</span><span class="op">(</span><span class="va">x</span>, <span class="st">" is awesome!"</span><span class="op">)</span><span class="op">)</span><span class="op">}</span></span>
<span><span class="fu">my_awesome_custom_function</span><span class="op">(</span><span class="st">"the kangaroo rat dataset"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "the kangaroo rat dataset is awesome!"</span></span></code></pre>
</div>
<p><sup>Created on 2024-12-29 with <a href="https://reprex.tidyverse.org" class="external-link">reprex v2.1.1</a></sup></p>
</section><section><h2 class="section-heading" id="testing-it-out">Testing it out<a class="anchor" aria-label="anchor" href="#testing-it-out"></a>
</h2>
<hr class="half-width">
<p>Now that we’ve met our new reprex-making collaborator, let’s use it
to test out the reproducible example we created in the previous
episode.</p>
<p>Here’s the code we wrote:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Mickey's reprex script</span></span>
<span><span class="co"># XXX THIS IS NOT FINISHED--NEED TO INSERT FINAL DATA EXAMPLE!</span></span>
<span></span>
<span><span class="co"># Load necessary packages to run the code</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">ggplot2</span><span class="op">)</span></span>
<span></span>
<span><span class="va">rodents_subset</span> <span class="op">%&gt;%</span> <span class="co"># XXX replace with simulated dataset</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">weight</span>, x <span class="op">=</span> <span class="va">common_name</span>, fill <span class="op">=</span> <span class="va">sex</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_boxplot</span><span class="op">(</span><span class="op">)</span> <span class="co"># wait, why does this look weird?</span></span>
<span></span>
<span><span class="co"># Investigate</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">rodents_subset</span><span class="op">$</span><span class="va">sex</span>, <span class="va">rodents_subset</span><span class="op">$</span><span class="va">species</span><span class="op">)</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">rodents</span><span class="op">$</span><span class="va">sex</span>, <span class="va">rodents</span><span class="op">$</span><span class="va">species</span><span class="op">)</span></span></code></pre>
</div>
<p>Time to find out if our example is actually reproducible! Let’s copy
it to the clipboard and run <code>reprex()</code>. Since we want to give
Jordan a runnable R script, we can use <code>venue = "r"</code>.</p>
<pre><code><span><span class="co"># In the console:</span></span>
<span><span class="fu">reprex</span><span class="op">(</span>venue <span class="op">=</span> <span class="st">"r"</span><span class="op">)</span></span></code></pre>
<p>It worked!</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#replace with final output</span></span></code></pre>
</div>
<p>Now we have a beautifully-formatted reprex that includes runnable
code and all the context needed to reproduce the problem.</p>
<div id="callout-including-information-about-your-r-session" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="callout-including-information-about-your-r-session" class="callout-inner">
<h3 class="callout-title">Callout: Including information about your R
session</h3>
<div class="callout-content">
<p>Another nice thing about <code>reprex</code> is that you can choose
to include information about your R session, in case your error has
something to do with your R settings rather than the code itself. You
can do that using the <code>session_info</code> argument to
<code>reprex()</code>.</p>
<p>For example, try running the following reprex, setting session_info =
TRUE, and observe what happens.</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">ggplot2</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">dplyr</span><span class="op">)</span></span>
<span><span class="va">mpg</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu">factor</span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">displ</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu">geom_boxplot</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/5-asking-your-question-rendered-unnamed-chunk-11-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><pre><code><span><span class="co"># In the console:</span></span>
<span><span class="fu">reprex</span><span class="op">(</span>session_info <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
<div class="section level3">
<h3 id="formatting">Formatting<a class="anchor" aria-label="anchor" href="#formatting"></a>
</h3>
<p>The output of <code>reprex()</code> is markdown, which can easily be
copied and pasted into many sites/apps. However, different places have
slightly different formatting conventions for markdown.
<a href="https://reprex.tidyverse.org" class="external-link">reprex</a> lets you customize the output of your reprex
according to where you’re planning to post it.</p>
<p>The default, <code>venue = "gh"</code>, gives you “<a href="https://github.github.com/gfm/" class="external-link">GitHub-Flavored Markdown</a>”,
which is a particular type of markdown that works well when posted on
GitHub. Another format you might want is “r”, which gives you a runnable
R script, with commented output interleaved with pieces of code.</p>
<p>Check out the formatting options in the help file with
<code>?reprex</code>, and try out a few depending on the destination of
your reprex!</p>
<div id="callout-reprex-cant-do-everything-for-you" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="callout-reprex-cant-do-everything-for-you" class="callout-inner">
<h3 class="callout-title">Callout: <code>reprex</code> can’t do
everything for you</h3>
<div class="callout-content">
<p>People often mention <code>reprex</code> as a useful tool for
creating reproducible examples, but it can’t do the work of crafting the
example for you! The package doesn’t locate the problem, pare down the
code, create a minimal dataset, or automatically include package
dependencies.</p>
<p>A better way to think of <code>reprex</code> is as a tool to check
your work as you go through the process of creating a reproducible
example, and to help you polish up the result.</p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="context">Context<a class="anchor" aria-label="anchor" href="#context"></a>
</h3>
<p>The final thing to consider when preparing your reproducible example
is adding some context so that helpers know a little about your problem
and what you’re trying to achieve.</p>
<p>Some context to include: 1. Tell us <em>a little bit</em> about your
problem. One sentence should be enough. What domain are you working in?
What are these data about? What do the relevant variables mean?</p>
<p>This is particularly important if you have provided a subset of your
own data instead of creating a minimal dataset from scratch. Your helper
will need to interpret the column names and understand what type of data
they are looking at.</p>
<ol start="2" style="list-style-type: decimal">
<li>Explain <em>what you expected to happen</em>, or what you were
trying to achieve, and how it is different from <em>what happened
instead</em>.</li>
</ol>
<p>The contrast between what happened and what was supposed to happen is
particularly important for semantic errors, in which the “error” is not
always obvious when running the code. The code ran–but you have decided
that the output is “wrong” somehow, or that it “didn’t work”. Why? How
do you know that? Your helper needs to know that what you got was not
what you expected, and they need to know what you expected in order to
help you achieve that outcome.</p>
<p>For example, let’s say you made the following plot:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rodents</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">plot_type</span>, y <span class="op">=</span> <span class="va">hindfoot_length</span>, color <span class="op">=</span> <span class="va">plot_type</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu">geom_boxplot</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">WARNING<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="warning" tabindex="0"><code>Warning: Removed 2003 rows containing non-finite outside the scale range
(`stat_boxplot()`).</code></pre>
</div>
<figure><img src="../fig/5-asking-your-question-rendered-unnamed-chunk-13-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>This plot doesn’t look the way you want it to look, and you’re not
sure why, so you decide to make a reprex. You load the required packages
(<code>ggplot2</code> and <code>dplyr</code>), and you substitute an
existing dataset, <code>mtcars</code>, instead of <code>rodents</code>,
which you know your helpers won’t have access to. Your reprex looks like
this:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">ggplot2</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">dplyr</span><span class="op">)</span></span>
<span><span class="va">mpg</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">class</span>, y <span class="op">=</span> <span class="va">displ</span>, color <span class="op">=</span> <span class="va">class</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu">geom_boxplot</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p><img src="../fig/5-asking-your-question-rendered-unnamed-chunk-14-1.png" style="display: block; margin: auto;" class="figure">
It’s minimal! It’s reproducible! But… what is the problem? This is a
perfectly reasonable plot, so without context, your helper won’t know
what’s wrong. Let’s explain it to them.</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">ggplot2</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">dplyr</span><span class="op">)</span></span>
<span><span class="va">mpg</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">class</span>, y <span class="op">=</span> <span class="va">displ</span>, color <span class="op">=</span> <span class="va">class</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu">geom_boxplot</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/5-asking-your-question-rendered-unnamed-chunk-15-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># I want to make a boxplot where each of the categories has its own color. But even though I set color = class here, only the outlines of the boxplots got colored in, and the inside is still white. How do I change this so that the whole box is colored in?</span></span></code></pre>
</div>
<div id="exercise-1-what-makes-a-good-description" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="exercise-1-what-makes-a-good-description" class="callout-inner">
<h3 class="callout-title">Exercise 1: What makes a good
description?</h3>
<div class="callout-content">
<p>For each of the following reprexes, improve the description given. a.
I’m trying to plot the displacements of different cars. I made this
boxplot, but the boxes are showing up in the wrong order. How do I fix
this? Here is my minimal reproducible example.</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">ggplot2</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">dplyr</span><span class="op">)</span></span>
<span><span class="va">mpg</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">class</span>, y <span class="op">=</span> <span class="va">displ</span>, color <span class="op">=</span> <span class="va">class</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu">geom_boxplot</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/5-asking-your-question-rendered-unnamed-chunk-16-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><ol start="2" style="list-style-type: lower-alpha">
<li>I’m working with this data about cars. The <code>class</code> column
refers to the type of car–for example, “compact” class means that the
car is quite small, while “pickup” would be a pickup truck. For each
car, I also have information about the city and highway mileage, and the
transmission, and the number of cylinders, as well as the displacement.
This dataset has 234 rows and 11 columns, although this is an example
dataset because my real dataset is much larger and has more like 500,000
rows. Anyway, in this example, I want to make a boxplot of displacement
where each of the categories has its own color. But even though I set
color = class here, only the outlines of the boxplots got colored in,
and the inside is still white. How do I make the inside a different
color? Here’s a reprex.</li>
</ol>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">ggplot2</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">dplyr</span><span class="op">)</span></span>
<span><span class="va">mpg</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">class</span>, y <span class="op">=</span> <span class="va">displ</span>, color <span class="op">=</span> <span class="va">class</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu">geom_boxplot</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/5-asking-your-question-rendered-unnamed-chunk-17-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><ol start="3" style="list-style-type: lower-alpha">
<li>Help, my code isn’t working! It says I have too many elements. I
made a reprex so you can see the data and the error message. I hope
that’s helpful. Thank you so much!</li>
</ol>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">ggplot2</span><span class="op">)</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">mpg</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in table(mpg): attempt to make a table with &gt;= 2^31 elements</code></pre>
</div>
</div>
</div>
</div>
<p>As we wrap up this lesson, let’s work on adding some context for
Mickey’s reprex so they’ll be ready to send it to Remy or post it
online.</p>
<div id="exercise-2-adding-context" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="exercise-2-adding-context" class="callout-inner">
<h3 class="callout-title">Exercise 2: Adding context</h3>
<div class="callout-content">
<p>Working with the person next to you, write a brief description of
Mickey’s problem that they could include with their reprex when they
post it online.</p>
<p>Make sure that the description gives a little bit of background,
describes what Mickey was trying to achieve, and describes what happened
instead.</p>
<p>When you’re done, compare notes between the groups and see if you can
come up with a final reprex for Mickey!</p>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>The <code>reprex</code> package makes it easy to format and share
your reproducible examples.</li>
<li>The <code>reprex</code> package helps you test whether your reprex
is reproducible, and also helps you prepare the reprex to share with
others.</li>
<li>Following a certain set of steps will make your questions clearer
and likelier to get answered.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/carpentries-incubator/R-help-reprexes/edit/main/README.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/carpentries-incubator/R-help-reprexes/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/carpentries-incubator/R-help-reprexes/" class="external-link">Source</a></p>
				<p><a href="https://github.com/carpentries-incubator/R-help-reprexes/blob/main/CITATION.cff" class="external-link">Cite</a> | <a href="mailto:kgahm@ucla.edu">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.17.1" class="external-link">sandpaper (0.17.1)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.9" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.7" class="external-link">varnish (1.0.7)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "@id": "https://carpentries-incubator.github.io/R-help-reprexes/instructor/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/LearningResource/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "R, reprex, help, The Carpentries, error, debug, reproducible example",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://carpentries-incubator.github.io/R-help-reprexes/instructor/aio.html",
  "identifier": "https://carpentries-incubator.github.io/R-help-reprexes/instructor/aio.html",
  "dateCreated": "2024-05-14",
  "dateModified": "2025-08-26",
  "datePublished": "2025-08-26"
}

  </script><script>
		feather.replace();
	</script>
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

