<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>RRRRR, I’m stuck!: Minimal reproducible data</title><meta name="viewport" content="width=device-width, initial-scale=1"><script src="../assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="../assets/styles.css"><script src="../assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../favicons/incubator/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicons/incubator/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="../favicons/incubator/favicon-16x16.png"><link rel="manifest" href="../favicons/incubator/site.webmanifest"><link rel="mask-icon" href="../favicons/incubator/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="black"></head><body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="incubator-logo" alt="Carpentries Incubator" src="../assets/images/incubator-logo.svg"><span class="badge text-bg-danger">
          <abbr title="This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.">
            <a href="https://docs.carpentries.org/resources/curriculum/lesson-life-cycle.html" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
              Pre-Alpha
            </a>
            <span class="visually-hidden">This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text"><li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul></li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='../4-minimal-reproducible-data.html';">Learner View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Carpentries Incubator" src="../assets/images/incubator-logo-sm.svg"></div>
    <div class="lesson-title-md">
      RRRRR, I’m stuck!
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            RRRRR, I’m stuck!
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Instructor Notes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extract All Images</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><hr><li><a class="dropdown-item" href="reference.html">Reference</a></li>
          </ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="../instructor/aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  RRRRR, I’m stuck!
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 62%" class="percentage">
    62%
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: 62%" aria-valuenow="62" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text"><li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul></li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../4-minimal-reproducible-data.html">Learner View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->

            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Schedule</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="1-intro-reproducible-examples.html">1. What is a reprex and why is it useful?</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="2-identify-the-problem.html">2. Identify the problem and make a plan</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="3-minimal-reproducible-code.html">3. Minimal reproducible code</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        4. Minimal reproducible data
        </span>
      </button>
    </div><!--/div.accordion-header-->

    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#what-is-a-minimal-reproducible-dataset-and-why-do-i-need-it">4.1 What is a minimal reproducible dataset and why do I need
it?</a></li>
<li><a href="#three-different-approaches">4.2 Three different approaches</a></li>
<li><a href="#creating-a-mock-dataset-from-scratch">4.3 Creating a mock dataset from scratch</a></li>
<li><a href="#identifying-the-relevant-aspects-of-your-data">4.5 Identifying the relevant aspects of your data</a></li>
<li><a href="#using-the-original-data-set">4.6 Using the original data set</a></li>
<li><a href="#using-an-r-built-dataset">4.7 Using an R-built dataset</a></li>
<li><a href="#bonus-additional-practice">Bonus: Additional Practice</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="5-asking-your-question.html">5. Asking your question</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="../instructor/key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Instructor Notes</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extract All Images</a>
                      </li>
                      <hr><li><a class="dropdown-item" href="reference.html">Reference</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources"><a href="../instructor/aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">

            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="../instructor/3-minimal-reproducible-code.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="../instructor/5-asking-your-question.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="../instructor/3-minimal-reproducible-code.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Minimal reproducible
        </a>
        <a class="chapter-link float-end" href="../instructor/5-asking-your-question.html" rel="next">
          Next: Asking your question...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Minimal reproducible data</h1>
        <p>Last updated on 2025-09-09 |

        <a href="https://github.com/carpentries-incubator/R-help-reprexes/edit/main/episodes/4-minimal-reproducible-data.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>



        <p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 94 minutes</p>

        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>What is a minimal reproducible dataset, and why do I need it?</li>
<li>How do I create a minimal reproducible dataset?</li>
<li>Can I just use my own data?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul><li>Describe a minimal reproducible dataset</li>
<li>Appreciate why it is important to provide example data that is
minimal and reproducible</li>
<li>Recognize that there are different approaches to providing example
data</li>
<li>Identify the relevant aspects of your data</li>
<li>Create a suitable reprex dataset from scratch</li>
<li>Share your original dataset in a way that is minimal and
reproducible</li>
<li>Subset a built-in dataset to use in your reprex</li>
</ul></div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="what-is-a-minimal-reproducible-dataset-and-why-do-i-need-it">4.1 What is a minimal reproducible dataset and why do I need
it?<a class="anchor" aria-label="anchor" href="#what-is-a-minimal-reproducible-dataset-and-why-do-i-need-it"></a></h2>
<hr class="half-width"><div id="accordionInstructor1" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor1" aria-expanded="false" aria-controls="collapseInstructor1">
  <h3 class="accordion-header" id="headingInstructor1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor1" class="accordion-collapse collapse" aria-labelledby="headingInstructor1" data-bs-parent="#accordionInstructor1">
<div class="accordion-body">
<p>Development note: Previous episodes should have already introduced
the concept of a minimal reproducible examples, why it is important, and
talked about making the code minimal and reproducible. This data episode
is part of being reproducible and should perhaps be followed-up with
more details on reproducibility if not previously mentioned (e.g.,
reprex needs minimal code - check - dependencies, which include minimal
data - check - and other basic information like your system and R
version as well as contextual information on your data?).</p>
</div>
</div>
</div>
</div>
<p>Mickey has now (1) narrowed down their problem area <em>(they are
losing observations during filtering)</em>, (2) stripped down their code
to make it minimal, and have been working on making it reproducible by
including all necessary dependencies (so anyone can simply copy-paste
the code into their system to replicate their problem). They have done a
good job so far, but there is still one dependency missing, can you
guess what it is?</p>
<div id="exercise-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-1" class="callout-inner">
<h3 class="callout-title">Exercise 1</h3>
<div class="callout-content">
<p>If Remy received the current script and tried to run it as-is, would
it work? If not, why?</p>
<p>Below is a reminder of what Mickey’s script currently looks like.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Mickey's current minimal code</span></span>
<span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">readr</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">dplyr</span><span class="op">)</span></span>
<span></span>
<span><span class="va">surveys</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"data/surveys_complete_77_89.csv"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Rows: 16878 Columns: 13
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (6): species_id, sex, genus, species, taxa, plot_type
dbl (7): record_id, month, day, year, plot_id, hindfoot_length, weight

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Filter to known sex</span></span>
<span><span class="va">rodents_subset</span> <span class="op">&lt;-</span> <span class="va">surveys</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">sex</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"F"</span>, <span class="st">"M"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Subsetted dataset</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">rodents_subset</span><span class="op">$</span><span class="va">sex</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
   F    M
3656 4145 </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Original dataset</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">sex</span><span class="op">)</span> <span class="co"># the numbers don't match!</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
   F    M
7318 8260 </code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>The code would fail to run because Remy probably doesn’t have the
“surveys_complete_77_89.csv” file, or, more specifically doesn’t have
that file in the specified “data” folder. Indeed, we have no idea what
Remy’s file management system looks like!</p>
</div>
</div>
</div>
</div>
<p>A <strong>reprex code will always require a data object</strong> in
order to run!</p>
<p>To make sure Remy can work on the reprex anywhere, Mickey needs to
ensure Remy has the required dataset to run it.</p>
<p>As with the code, a reprex’s dataset should also be
<strong>minimal–free of unnecessary information</strong> and
<strong>reproducible–such that anyone can recreate it</strong>.</p>
<p>Indeed, Step 3 on the roadmap tells us to create a minimal
reproducible dataset. However, Mickey figures it would be faster and
easier to send Remy the current minimal code along with the original csv
file. After all, the code already includes how to read-in the csv file,
right? There is no need to create another dataset.</p>
<div id="exercise-2-reflect" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-2-reflect" class="callout-inner">
<h3 class="callout-title">Exercise 2: Reflect</h3>
<div class="callout-content">
<p>Mickey feels like sharing the original data file would be easier, but
who would find it easier, Mickey or Remy?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>Mickey is thinking that it would be easier for themselves, not
necessarily for Remy.</p>
<p><strong>Remember:</strong> one of the goals of creating a reprex is
to <strong>help the helpers</strong>. They don’t have to help, they are
volunteering their time. As such, they deserve to be treated with
kindness and respect. If you send a code with a separate file, not only
is the code not reproducible, but you are creating extra work for the
helper. Extra unnecessary and potentially time-consuming steps are more
likely to make helpers frustrated rather than happy to help.</p>
<p>If you find yourself getting frustrated at how much time and effort
creating a reprex might be taking, remember that (1) <strong>trusting
the process may reveal the solution along the way</strong>; and (2)
<strong>being kind, clear, and helpful will reward you with a quicker,
more accurate solution</strong> (and will make it more likely that a
helper will help again in the future).</p>
</div>
</div>
</div>
</div>
<p>Remy’s feelings aside, while this strategy could still work in this
particular instance, there are many reasons why sharing original data
may not be possible or recommended. Can you think of any? See callout
below for examples.</p>
<div id="think-twice-before-sharing-your-data" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="think-twice-before-sharing-your-data" class="callout-inner">
<h3 class="callout-title">Think twice before sharing your data!</h3>
<div class="callout-content">
<p>Even though there are times when sharing your original dataset seems
like the easiest approach, there are several reasons why sharing
original data may not be possible or recommended.</p>
<p>The original dataset may be:</p>
<ul><li>too large - the Portal dataset is ~35,000 rows with 13 columns and
contains data for decades. That’s a lot!</li>
<li>private - the dataset might not be published yet, it may not be
yours to share, or maybe it includes protected information such as
personal medical information or the location of endangered species.</li>
<li>hard to send - on most online forums, you can’t attach supplemental
files (more on this later). Even if you are just sending data to a
colleague, file paths can get complicated, the data might be too large
to attach, etc.</li>
<li>complicated - it would be hard to locate the relevant information.
One example to steer away from are needing a ‘data dictionary’ to
understand all the meanings of the columns (e.g. what is “plot type” in
<code>ratdat</code>?) We don’t our helper to waste valuable time to
figure out what everything means.</li>
<li>highly derived/modified from the original file. You may have already
done a bunch of preliminary data wrangling you don’t want to include
when you send the example, so you would need to provide the intermediate
dataset directly to your helper.</li>
</ul></div>
</div>
</div>
<p>While Mickey does not have to create a brand new example dataset,
they should at least work to make their original data minimal and
reproducible (see the reflection exercise above).</p>
<p>While it may sometimes feel like unnecessary effort, the process of
creating a minimal dataset will not only help others help you, but also
allow you to <strong>better understand your data</strong> and often
<strong>discover the source of the problem</strong> without the need for
external help. By removing extraneous information and only keeping what
is required to replicate the issue, we can ensure both we and our helper
are be able to easily see how the data is structured and where the
problem arises. Furthermore, we have already seen how sometimes the
source of the problem isn’t actually the code, but rather the data!
Providing an appropriate example, or mock dataset <strong>allows a
helper to better investigate and manipulate that data</strong> to fix
the problem (as if they were working directly on your computer).</p>
<p>See what the mock dataset of a reprex can look like in the callout
below.</p>
<div id="accordionInstructor2" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor2" aria-expanded="false" aria-controls="collapseInstructor2">
  <h3 class="accordion-header" id="headingInstructor2">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor2" class="accordion-collapse collapse" aria-labelledby="headingInstructor2" data-bs-parent="#accordionInstructor2">
<div class="accordion-body">
<p>While formatted as a callout, the pro-tip content is critical for
students to develop the right mental model of what an example dataset
looks like.</p>
</div>
</div>
</div>
</div>
<div id="pro-tip-documentation-examples-are-a-reprex" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="pro-tip-documentation-examples-are-a-reprex" class="callout-inner">
<h3 class="callout-title">Pro-tip: documentation examples are a
reprex</h3>
<div class="callout-content">
<p>An example of what minimal reproducible examples look like can be
found in the <code>?help</code> section, in R Studio. When looking at
the documentation for any function, scroll all the way down to where
they list examples. These will usually be minimal and reproducible,
since they are intended to be directly copy-pasted and run by
anyone.</p>
<p>For example, let’s look at the function <code>mean</code>:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">mean</span></span></code></pre>
</div>
<p>When we scroll all the way down, we see examples that can be run
directly on the console, with no additional code. Try to copy-paste the
following in your script. Does it run?</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">xm</span> <span class="op">&lt;-</span> <span class="fu">mean</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'x' not found</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">c</span><span class="op">(</span><span class="va">xm</span>, <span class="fu">mean</span><span class="op">(</span><span class="va">x</span>, trim <span class="op">=</span> <span class="fl">0.10</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'xm' not found</code></pre>
</div>
<p>It is missing the first line which actually creates the dataset
<code>x</code>. Try again with the new line.</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">50</span><span class="op">)</span></span>
<span><span class="va">xm</span> <span class="op">&lt;-</span> <span class="fu">mean</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="fu">c</span><span class="op">(</span><span class="va">xm</span>, <span class="fu">mean</span><span class="op">(</span><span class="va">x</span>, trim <span class="op">=</span> <span class="fl">0.10</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 8.75 5.50</code></pre>
</div>
<p>Now it should run as intended!</p>
<p>In this example, <strong>x is the mock dataset</strong> consisting of
just 1 variable. <strong>Notice how it was created as part of the
example.</strong> This will be your goal with your reprex.</p>
<p>When your data is uploaded from a separate file, that file becomes a
dependency in your code–it cannot run without it. Since a reprex needs
to be reproducible by anyone, <strong>we need to think about our data in
a different way–as a mock object created in the script
itself</strong>.</p>
</div>
</div>
</div>
<p>In summary, just like with the code, <strong>a minimal reproducible
dataset must be:</strong></p>
<ul><li>
<strong>minimal</strong>: it only contains information required to
run your minimal code and replicate the problem. You can also think of
this as being <strong>relevant</strong> to the problem.</li>
<li>
<strong>reproducible</strong>: it must be
<strong>accessible</strong> to someone without your computer, and it
must consistently <strong>replicate your problem</strong>. This means it
also needs to be <strong>complete</strong>, meaning there are no
dependencies that have been omitted (e.g., packages).</li>
</ul><div id="accordionInstructor3" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor3" aria-expanded="false" aria-controls="collapseInstructor3">
  <h3 class="accordion-header" id="headingInstructor3">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor3" class="accordion-collapse collapse" aria-labelledby="headingInstructor3" data-bs-parent="#accordionInstructor3">
<div class="accordion-body">
<p>This exercise is intended to address the LO “Describe a minimal
reproducible dataset” although it better targets the learner’s ability
to <em>identify</em> an appropriate reprex dataset.</p>
</div>
</div>
</div>
</div>
<div id="ecercise-3-test-your-knowledge" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="ecercise-3-test-your-knowledge" class="callout-inner">
<h3 class="callout-title">Ecercise 3: Test your knowledge!</h3>
<div class="callout-content">
<p>Let’s say we want to know the average weight of all the species in
our <code>rodents</code> dataset from episode 2 (also below if you no
longer have it). We try to use the following code…</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The previously created "rodents" dataset</span></span>
<span><span class="va">rodents</span> <span class="op">&lt;-</span> <span class="va">surveys</span> <span class="op">%&gt;%</span> <span class="fu">filter</span><span class="op">(</span><span class="va">taxa</span> <span class="op">==</span> <span class="st">"Rodent"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Mean rodent weight</span></span>
<span><span class="fu">mean</span><span class="op">(</span><span class="va">rodents</span><span class="op">$</span><span class="va">weight</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] NA</code></pre>
</div>
<p>…but it returns NA! We don’t know why that is happening and we want
to ask for help.</p>
<p>Which of the following represents a minimal reproducible dataset for
the minimal code <code>mean(rodents$weight)</code>? Can you describe why
the other ones are not?</p>
<ol style="list-style-type: upper-alpha"><li><code>sample_data &lt;- data.frame(month = rep(7:9, each = 2), hindfoot_length = c(10, 25, 14, 26, 30, 17))</code></li>
<li><code>sample_data &lt;- data.frame(weight = rnorm(10))</code></li>
<li><code>sample_data &lt;- data.frame(weight = c(100, NA, 30, 60, 40, NA))</code></li>
<li><code>sample_data &lt;- rodents_modified[1:20,]</code></li>
</ol><p><strong>Hint:</strong> the data needs to (1) run within your code,
and (2) replicate the problem. To test whether each new
<code>sample_data</code> works, try inputting it back into the function
that is giving you problems. E.g., use
<code>mean(sample_data$weight)</code></p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>The correct answer is C!</p>
<ol style="list-style-type: upper-alpha"><li>does not include the variable of interest (weight).</li>
<li>does not replicate the problem (NA result with a warning
message)–the code runs just fine.</li>
<li>minimal and reproducible.</li>
<li>is not reproducible. Sample randomly samples 10 items; sometimes it
may include NAs, sometime it may not (not guaranteed to replicate the
error). It can be used if a seed is set (see next section for more
info).</li>
<li>uses a dataset that isn’t accessible without previous data wrangling
code–the object rodents_modified doesn’t exist.</li>
<li>Inaccessible data. It provides the path to a file on someone else’s
computer.</li>
</ol></div>
</div>
</div>
</div>
<div id="dont-use-screenshots" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="dont-use-screenshots" class="callout-inner">
<h3 class="callout-title">Don’t use screenshots</h3>
<div class="callout-content">
<p>Screenshots are another example of an inappropriate and unhelpful way
to share your data with a helper. While they can be used as a quick
snapshot of what the data looks like, the data within a screenshot
cannot be manipulated and a helper would have to create their own mock
dataset to run the code.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="three-different-approaches">4.2 Three different approaches<a class="anchor" aria-label="anchor" href="#three-different-approaches"></a></h2>
<hr class="half-width"><p>In general, there are 3 common ways to provide minimal reproducible
data for a reprex.</p>
<ul><li><p>Add a few lines of code to create a mock dataset with the same
key characteristics as the original data (like in the example sections
of documentations).</p></li>
<li><p>Subset the original data to be minimal and reproducible, then use
function like <code>dput()</code>.</p></li>
<li><p>Subset a dataset that is already provided by R (e.g.,
<code>cars</code>, <code>npk</code>, <code>penguins</code>, etc.). For a
complete list, use <code>library(help = "datasets")</code>.</p></li>
</ul><div id="accordionInstructor4" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor4" aria-expanded="false" aria-controls="collapseInstructor4">
  <h3 class="accordion-header" id="headingInstructor4">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor4" class="accordion-collapse collapse" aria-labelledby="headingInstructor4" data-bs-parent="#accordionInstructor4">
<div class="accordion-body">
<p>It would be nice if we could toggle the callout below or at least the
table so that it doesn’t take so much room since it is not an essential
part of the lesson.</p>
</div>
</div>
</div>
</div>
<div id="pros-and-cons" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="pros-and-cons" class="callout-inner">
<h3 class="callout-title">Pros and Cons</h3>
<div class="callout-content">
<p>The developers of this lesson believe everyone is entitled to use any
option they prefer, therefore the rest of this episode will expand on
each of the 3 approaches listed above. However, within the data science
community, opinions differ on which method is best recommended. Below is
a summary table of advantages and disadvantages of each approach based
on many conversations with several data science groups.</p>
<table style="width:100%;" class="table"><colgroup><col width="6%"><col width="57%"><col width="35%"></colgroup><tbody><tr class="odd"><td></td>
<td><strong>Advantages</strong></td>
<td><strong>Disadvantages</strong></td>
</tr><tr class="even"><td><strong>Data from Scratch</strong></td>
<td><ul><li><p>Often the most concise</p></li>
<li><p>Easiest for helpers</p></li>
<li><p>Helps problem-solve along the way (e.g., identify what data
aspects are generating the problem)</p></li>
<li><p>More universally applicable: Easy to share, collaborate, teach,
and understand</p></li>
<li><p>Avoids privacy/security concerns</p></li>
<li><p>Lets you clearly illustrate the sought outcome</p></li>
<li><p>Uses important-to-learn skills</p></li>
<li><p>Easier with practice</p></li>
</ul></td>
<td>
<ul><li>Can be intimidating</li>
</ul><!-- --><ul><li><p>Requires good understanding of your data</p></li>
<li><p>Harder to generate if the error is idiosyncratic or dependent on
having a large dataset</p></li>
<li><p>Time-consuming if unpracticed</p></li>
<li><p>Iterative (you may need to trial and error a few times to
replicate the problem)</p></li>
<li><p>More likely to require analogies, less interpretable/concrete,
more likely to require greater context</p></li>
<li><p>Risks generating XY problems–make sure you are asking the right
question/replicating the right problem</p></li>
</ul></td>
</tr><tr class="odd"><td><strong>R-built Data</strong></td>
<td><ul><li><p>Simple and easy to share–no need to provide additional
data</p></li>
<li><p>Familiar–helpers already know the data structure</p></li>
<li><p>Potentially faster than starting from scratch (i.e. faster than
generating rows/columns de novo).</p></li>
<li><p>No privacy/security concerns</p></li>
<li><p>Can easily be manipulated or simplified</p></li>
<li><p>Generalizes the problem</p></li>
</ul></td>
<td><ul><li><p>May require a good mental model of the problem</p></li>
<li><p>Harder if the error is idiosyncratic</p></li>
<li><p>Greatest risk of generating XY problems–make sure you are asking
the right question/replicating the right problem</p></li>
<li><p>Iterative (you may need to trial and error a few times to
replicate the problem)</p></li>
<li><p>Need to re-think the question so it matches a different dataset
and context–mental gymnastics</p></li>
<li><p>Still need to choose which dataset and variables are more
appropriate</p></li>
</ul></td>
</tr><tr class="even"><td><strong>Your Data</strong></td>
<td><ul><li><p>Can require the least mental effort</p></li>
<li><p>Problem is easy to replicate even if you don’t understand it at
all</p></li>
<li><p>Accurately represents the actual problem; avoids XY
problems.</p></li>
<li><p>Richer context may intrigue/motivate helpers</p></li>
<li><p>Can be quicker if dataset is small</p></li>
<li><p>May be required for idiosyncratic problems that are based on
aspects of the data itself that you don’t know about (e.g.  when the
data itself, rather than the code per se, is central to the
problem)</p></li>
<li><p>Captures data structures that are difficult or time-consuming to
replicate if you are a novice</p></li>
</ul></td>
<td><ul><li><p>Less growth-minded if chosen as an “easy way out”–skips the
learning process and any insights you could have gained.</p></li>
<li><p>Easy to do poorly and think that you’re doing it well; perceived
“easiness” leads to overcomplication/confusion</p></li>
<li><p>Leaves all the work to the helpers if you don’t also work to
minimize it–less motivation for harder work</p></li>
<li><p>Could obfuscate the problem if not minimized–less likely to find
a quick answer</p></li>
<li><p>More difficult to share–may be large/messy</p></li>
<li><p>Security/privacy/sanitizeation problems</p></li>
</ul></td>
</tr></tbody></table></div>
</div>
</div>
</section><section><h2 class="section-heading" id="creating-a-mock-dataset-from-scratch">4.3 Creating a mock dataset from scratch<a class="anchor" aria-label="anchor" href="#creating-a-mock-dataset-from-scratch"></a></h2>
<hr class="half-width"><p>While starting from scratch can be daunting at first, it becomes
easier and faster with practice. Once you are familiar with the basic
building blocks, it is a straight-forward method of creating a minimal
reproducible dataset. This is also the preferred method for other
activities that require a reprex (e.g., teaching, collaborating,
developing, etc.), and it often provides valuable problem-solving
insights. So let’s breakdown this process to be more digestible!</p>
<p>Mickey is still new at this and has 2 pressing questions:</p>
<ol style="list-style-type: decimal"><li>How do I create a dataset from scratch?</li>
<li>How do I know which key aspects of my data to recreate?</li>
</ol><p>Let’s start with the first.</p>
<p>There are many ways one can create a dataset in R (these should be
familiar if you took the Carpentries lesson <a href="https://datacarpentry.org/R-ecology-lesson/" class="external-link">Data Analysis and
Visualization in R for Ecologists</a>).</p>
<p>You can start by creating vectors using <code>c()</code></p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vector</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span><span class="op">)</span> </span>
<span><span class="va">vector</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1 2 3 4</code></pre>
</div>
<p>You can also add some randomness by sampling from a vector using
<code>sample()</code>.</p>
<p>For example you can sample numbers 1 through 10 in a random order</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">sample</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">5</span><span class="op">)</span></span>
<span><span class="va">x</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1]  6 10  4  9  7</code></pre>
</div>
<p>Or you can randomly sample from a normal distribution</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">rnorm</span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="va">x</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> [1]  0.5771296 -0.5422908 -0.6440283  0.5940126 -0.6223443  0.5940153
 [7] -0.6682587  0.7865710 -0.7313907  1.6156361</code></pre>
</div>
<p>You can also use built-in vectors like <code>letters</code> to create
factors.</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">sample</span><span class="op">(</span><span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>, <span class="fl">20</span>, replace<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span>
<span><span class="va">x</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> [1] "a" "d" "b" "a" "d" "c" "a" "c" "c" "a" "a" "b" "b" "a" "d" "d" "d" "d" "c"
[20] "a"</code></pre>
</div>
<p>Remember that <strong>a data frame is just a collection of
vectors</strong>. You can create a data frame using
<code>data.frame</code> (or <code>tibble</code> in the
<code>dplyr</code> package), and then define a vector for each
variable.</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span> <span class="op">(</span>x <span class="op">=</span> <span class="fu">sample</span><span class="op">(</span><span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>, <span class="fl">20</span>, replace<span class="op">=</span><span class="cn">T</span><span class="op">)</span>, </span>
<span>                    y <span class="op">=</span> <span class="fu">rnorm</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">20</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">head</span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  x          y
1 a -0.6027609
2 c -0.3735196
3 b  0.3942844
4 b  0.6527062
5 b  1.1802225
6 a  2.7977413</code></pre>
</div>
<p><strong>However</strong>, when sampling at random you must remember
to <code>set.seed()</code> before sending it to someone to make sure you
both get the same numbers!</p>
<div id="callout5" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div class="callout-inner">
<div class="callout-content">
<p>For more handy functions for creating data frames and variables, see
the [<strong>cheatsheet</strong>]. Some questions may require specific
formats. For these, you can use any of the provided
<code>as.someType</code> functions: <code>as.factor</code>,
<code>as.integer</code>, <code>as.numeric</code>,
<code>as.character</code>, <code>as.Date</code>,
<code>as.xts</code>.</p>
</div>
</div>
</div>
<div id="accordionInstructor5" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor5" aria-expanded="false" aria-controls="collapseInstructor5">
  <h3 class="accordion-header" id="headingInstructor5">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor5" class="accordion-collapse collapse" aria-labelledby="headingInstructor5" data-bs-parent="#accordionInstructor5">
<div class="accordion-body">
<p>You can skip the challenge below if short on time. The exercise
assesses the LO: “Create a dataset from scratch.” There will not be
another exercise to practice this, but you will walk through creating
the main reprex dataset together, so that may be enough. <strong>Do not
spend too much time on this</strong>. Students can work in pairs, or you
can work all together. Don’t wait for everyone to be done before going
through solutions, maybe have them alert you when they finish each one,
they can then keep going while they wait. You can skip giving the
solution for C, expecting quicker learners to have tried it for practice
while slower learners may not have gotten to it, that’s ok!</p>
</div>
</div>
</div>
</div>
<div id="exercise-4-you-try" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="exercise-4-you-try" class="callout-inner">
<h3 class="callout-title">Exercise 4: You try!</h3>
<div class="callout-content">
<p>Create a data frame with:</p>
<p>A. One categorical variable with 2 levels and one continuous
variable.</p>
<p>B. One continuous variable that is normally distributed.</p>
<p>C. Name, sex, age, and treatment type.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="identifying-the-relevant-aspects-of-your-data">4.5 Identifying the relevant aspects of your data<a class="anchor" aria-label="anchor" href="#identifying-the-relevant-aspects-of-your-data"></a></h2>
<hr class="half-width"><p>No matter which approach you choose to take for providing a dataset,
they key is always to identify which elements of the original data are
necessary, or relevant, to replicate the problem. To do so, here are a
few guiding questions:</p>
<ol style="list-style-type: decimal"><li>Which variables are necessary to replicate the problem?</li>
<li>What data type (discrete or continuous) is each variable?</li>
<li>How many levels and/or observations are necessary?</li>
<li>Do the values need to be distributed in a specific way?</li>
<li>Are there any NAs that could be relevant?</li>
</ol><p>Let’s check back with Mickey and the minimal code they settled
on:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Mickey's current minimal code</span></span>
<span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">readr</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">dplyr</span><span class="op">)</span></span>
<span></span>
<span><span class="va">surveys</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"data/surveys_complete_77_89.csv"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Rows: 16878 Columns: 13
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (6): species_id, sex, genus, species, taxa, plot_type
dbl (7): record_id, month, day, year, plot_id, hindfoot_length, weight

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Filter to known sex</span></span>
<span><span class="va">rodents_subset</span> <span class="op">&lt;-</span> <span class="va">surveys</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">sex</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"F"</span>, <span class="st">"M"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Subsetted dataset</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">rodents_subset</span><span class="op">$</span><span class="va">sex</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
   F    M
3656 4145 </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Original dataset</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">sex</span><span class="op">)</span> <span class="co"># the numbers don't match!</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
   F    M
7318 8260 </code></pre>
</div>
<p>Let’s take a closer look at the dataset we need to substitute and
then answer the questions outlined earlier.</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">head</span><span class="op">(</span><span class="va">surveys</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 6 × 13
  record_id month   day  year plot_id species_id sex   hindfoot_length weight
      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;           &lt;dbl&gt;  &lt;dbl&gt;
1         1     7    16  1977       2 NL         M                  32     NA
2         2     7    16  1977       3 NL         M                  33     NA
3         3     7    16  1977       2 DM         F                  37     NA
4         4     7    16  1977       7 DM         M                  36     NA
5         5     7    16  1977       3 DM         M                  35     NA
6         6     7    16  1977       1 PF         M                  14     NA
# ℹ 4 more variables: genus &lt;chr&gt;, species &lt;chr&gt;, taxa &lt;chr&gt;, plot_type &lt;chr&gt;</code></pre>
</div>
<div id="exercise-5-your-turn" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="exercise-5-your-turn" class="callout-inner">
<h3 class="callout-title">Exercise 5: Your turn!</h3>
<div class="callout-content">
<p>Try to answer the following questions on your own to determine what
we need to include in our minimal reproducible dataset:</p>
<ol style="list-style-type: decimal"><li>Which variables does Mickey need to replicate their problem?</li>
<li>What data type (discrete or continuous) is each variable?</li>
<li>How many levels and/or observations are necessary?</li>
<li>Do the values need to be distributed in a specific way?</li>
<li>Are there any NAs that could be relevant?</li>
</ol></div>
</div>
</div>
<div id="accordionInstructor6" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor6" aria-expanded="false" aria-controls="collapseInstructor6">
  <h3 class="accordion-header" id="headingInstructor6">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor6" class="accordion-collapse collapse" aria-labelledby="headingInstructor6" data-bs-parent="#accordionInstructor6">
<div class="accordion-body">
<p>Give them some time to think it through, maybe in pairs or small
groups, but <strong>focus on working through the answers together, even
if not everyone has finished</strong>. Go one question at a time (time
to answer the first -&gt; walk through solution -&gt; time to answer the
second -&gt; etc.).</p>
</div>
</div>
</div>
</div>
<p>Let’s go over the answers together and help Mickey build a dataset as
we go along!</p>
<div id="accordionInstructor7" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor7" aria-expanded="false" aria-controls="collapseInstructor7">
  <h3 class="accordion-header" id="headingInstructor7">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor7" class="accordion-collapse collapse" aria-labelledby="headingInstructor7" data-bs-parent="#accordionInstructor7">
<div class="accordion-body">
<p>Begin creating the dataset with the information gained from each
question, then you can put it all together.</p>
</div>
</div>
</div>
</div>
<ol style="list-style-type: decimal"><li>How many variables does Mickey need to reproduce their problem?</li>
</ol><p>They really just sex, and maybe an identifier like record_id. This
means they potentially only need 1 vector, maybe 2 (remember, each
column in a dataframe is essentially a vector, and in “tidy data” should
correspond with a variable; each row is then an observation).</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create 2 variables: sex, and maybe record_id</span></span>
<span></span>
<span><span class="co"># a vector for sex:</span></span>
<span></span>
<span><span class="co"># a vector for record_id:</span></span></code></pre>
</div>
<ol start="2" style="list-style-type: decimal"><li>What data type (discrete or continuous) is each variable?</li>
</ol><p>Sex is a discrete (categorical) variable, while record ID would be
continuous.</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create 2 variables: sex, and maybe record_id</span></span>
<span></span>
<span><span class="co"># a vector for sex: categorical</span></span>
<span></span>
<span><span class="co"># a vector for record_id: continuous</span></span></code></pre>
</div>
<ol start="3" style="list-style-type: decimal"><li>How many levels and/or observations are necessary?</li>
</ol><p>Since Mickey is filtering their dataset down to 2 categories for sex,
that means they need at least 3 levels to start with. In terms of number
of observations there don’t seem to be specific restrictions so they can
just pick a generally nice number like 10. This is where creating a
reprex dataset becomes a bit more of an art than a science; it is common
to use trial and error until the problem is replicated accurately.</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create 2 variables: sex, and maybe record_id</span></span>
<span></span>
<span><span class="co"># a vector for sex: categorical with 3 levels </span></span>
<span></span>
<span><span class="co"># a vector for record_id: continuous, ~10</span></span></code></pre>
</div>
<ol start="4" style="list-style-type: decimal"><li>Do the values need to be distributed in a specific way?</li>
</ol><p>This question probably isn’t going to be relevant most of the time,
but certainly worth considering. If Mickey needed a longer dataset of
measurements they may have wanted to make sure it was normally
distributed. If they needed a longer dataset of counts they may have
wanted to make sure it was Poisson distributed. Or maybe they had binary
data. But in this case, Mickey has a fairly short dataset and the code
doesn’t include anything that should vary depending on the distribution,
so it probably doesn’t matter. Again, this process can be one of trial
and error. They can always come back to this question if they are unable
to replicate their problem (hint: in which case the distribution may be
related to the problem they are having!).</p>
<ol start="5" style="list-style-type: decimal"><li>Are there any NAs that could be relevant?</li>
</ol><p>Mickey’s data does have NAs for the sex variable. It might not matter
or it could be important, so let’s have them put in NAs in the mock
dataset just in case.</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create 2 variables: sex, and maybe record_id</span></span>
<span></span>
<span><span class="co"># a vector for sex: categorical with 3 levels, one of which is NA </span></span>
<span><span class="va">sex</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">'M'</span>,<span class="st">'F'</span>,<span class="cn">NA</span><span class="op">)</span></span>
<span><span class="va">sex</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "M" "F" NA </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># a vector for record_id: continuous, ~10 </span></span>
<span><span class="va">record_id</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span> </span>
<span><span class="va">record_id</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Now let's go "sampling" and put our "obervations" in a dataframe</span></span>
<span><span class="va">sample_data</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span></span>
<span>  <span class="co"># record_id stays the same, since these are our 10 "observations"</span></span>
<span>  record_id <span class="op">=</span> <span class="va">record_id</span>,</span>
<span>  <span class="co"># randomly select 10 observations from our list of sexes</span></span>
<span>  sex <span class="op">=</span> <span class="fu">sample</span><span class="op">(</span><span class="va">sex</span>, <span class="fl">10</span>, replace<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Look at our new dataset</span></span>
<span><span class="va">sample_data</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   record_id  sex
1          1 &lt;NA&gt;
2          2 &lt;NA&gt;
3          3    F
4          4 &lt;NA&gt;
5          5    M
6          6    M
7          7    F
8          8    F
9          9    M
10        10    F</code></pre>
</div>
<p>And just like that we helped Mickey create a mock dataset from
scratch! Notice that they could also have compiled the same type of
dataset in a single line by creating each vector within
<code>data.frame()</code></p>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sample2_data</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span></span>
<span>  record_id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,</span>
<span>  sex <span class="op">=</span> <span class="fu">sample</span><span class="op">(</span><span class="fu">c</span><span class="op">(</span><span class="st">'M'</span>,<span class="st">'F'</span>, <span class="cn">NA</span><span class="op">)</span>, <span class="fl">10</span>, replace<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">sample2_data</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   record_id  sex
1          1    F
2          2    M
3          3    F
4          4    F
5          5 &lt;NA&gt;
6          6    F
7          7    M
8          8 &lt;NA&gt;
9          9    F
10        10    F</code></pre>
</div>
<p><strong>Important</strong>: Notice that the outputs of the two
datasets are not the same. If you want the outputs to be EXACTLY the
same each time, but you are using <code>sample()</code> which is an
inherently random process, you must first use <code>set.seed()</code>
and share that with your helper too.</p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">set.seed</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span> <span class="co"># set seed before recreating the sample</span></span>
<span><span class="va">sample_data</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span></span>
<span>  record_id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,</span>
<span>  sex <span class="op">=</span> <span class="fu">sample</span><span class="op">(</span><span class="fu">c</span><span class="op">(</span><span class="st">'M'</span>,<span class="st">'F'</span>, <span class="cn">NA</span><span class="op">)</span>, <span class="fl">10</span>, replace<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">sample_data</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   record_id  sex
1          1    M
2          2 &lt;NA&gt;
3          3    M
4          4    F
5          5    M
6          6 &lt;NA&gt;
7          7 &lt;NA&gt;
8          8    F
9          9    F
10        10 &lt;NA&gt;</code></pre>
</div>
<div id="callout6" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div class="callout-inner">
<div class="callout-content">
<p>Adding a <code>set.seed()</code> at the start of your reprex will
ensure anyone else who runs the same code <strong>in the same
order</strong> will always get the same results. However, if using it
more generally, you may want to read more about it. For example, in the
example below we set a seed of 2 and then run <code>sample(10)</code>
twice. You will notice that the output of each sample run is not the
same. However, if you run the whole code again, you will see that each
of the outputs actually do stay the same.</p>
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">set.seed</span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu">sample</span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> [1]  5  6  9  1 10  7  4  8  3  2</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb49">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">sample</span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> [1]  1  3  6  2  9 10  7  5  4  8</code></pre>
</div>
</div>
</div>
</div>
<p>Great! Now we need to check whether the mock dataset works with the
minimal code Mickey created earlier. Does it run? Does it replicate the
problem they were having?</p>
<div class="codewrapper sourceCode" id="cb51">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Mickey's reprex (1 approach) </span></span>
<span></span>
<span><span class="co"># Required packages to run the code</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">readr</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">dplyr</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">set.seed</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span> <span class="co"># ensures accurate data replication</span></span>
<span></span>
<span><span class="co"># Create a mock dataset</span></span>
<span><span class="va">sample_data</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span></span>
<span>  record_id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,</span>
<span>  sex <span class="op">=</span> <span class="fu">sample</span><span class="op">(</span><span class="fu">c</span><span class="op">(</span><span class="st">'M'</span>,<span class="st">'F'</span>, <span class="cn">NA</span><span class="op">)</span>, <span class="fl">10</span>, replace<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The problematic code snippet</span></span>
<span><span class="va">sample_subset</span> <span class="op">&lt;-</span> <span class="va">sample_data</span> <span class="op">%&gt;%</span> <span class="co"># replace rodents with our sample dataset</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">sex</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"F"</span>, <span class="st">"M"</span><span class="op">)</span><span class="op">)</span> <span class="co"># this can stay the same because we recreated it the same</span></span>
<span></span>
<span><span class="co"># Subsetted sample dataset - how many individuals for each sex?</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">sample_subset</span><span class="op">$</span><span class="va">sex</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span></span>
<span><span class="cn">F</span></span>
<span><span class="fl">1</span> </span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb53">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Original sample dataset - how many individuals for each sex?</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">sample_data</span><span class="op">$</span><span class="va">sex</span><span class="op">)</span> <span class="co"># the numbers don't match!</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
F M
3 3 </code></pre>
</div>
<p>It works! The sample size has unexpectedly been reduced to just 2
observations, when we would have expected a sample of 8, based on the
sample_data output above. Wherever the issue may lie, we were able to
successfully replicate it in this minimal reproducible example.</p>
</section><section><h2 class="section-heading" id="using-the-original-data-set">4.6 Using the original data set<a class="anchor" aria-label="anchor" href="#using-the-original-data-set"></a></h2>
<hr class="half-width"><p>Even if you master the art of creating mock datasets, there may be
occasions in which your data or problem is too complex and you can’t
seem to replicate the issue. Or maybe you still think using your
original data would just be easier.</p>
<p>In cases when you want to make your own data minimal and
reproducible, you will want to take a similar approach to what we did in
Episode 3 when making the code minimal. Keep what is essential, get rid
of the rest. In other words, we will want to subset our data into a
smaller, more digestible chunk.</p>
<p>The question still arises: how do I know what is essential?</p>
<p>Use the same guiding questions that we used earlier!</p>
<ol style="list-style-type: decimal"><li>Which variables are necessary to replicate the problem?</li>
<li>What data type (discrete or continuous) is each variable? (perhaps
less necessary, since you are keeping the original variables)</li>
<li>How many levels and/or observations are necessary? (we don’t want to
get rid of more than we need)</li>
<li>Do the values need to be distributed in a specific way? (worth
keeping in mind in terms of how we are removing observations)</li>
<li>Are there any NAs that could be relevant?</li>
</ol><div id="accordionInstructor8" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor8" aria-expanded="false" aria-controls="collapseInstructor8">
  <h3 class="accordion-header" id="headingInstructor8">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor8" class="accordion-collapse collapse" aria-labelledby="headingInstructor8" data-bs-parent="#accordionInstructor8">
<div class="accordion-body">
<p>You can give them time to answer those questions on their own first,
like in Exercise 5, or just go through them together.</p>
</div>
</div>
</div>
</div>
<p>Based on our previous answers we end up with:</p>
<ol style="list-style-type: decimal"><li>We need species, sex, and maybe record_id</li>
<li>Species and sex are categorical, record_id is a continuous count of
our observations.</li>
<li>As we said earlier, we want 3 each for species and sex, which
happens to already be the case. And we could reduce our record_id size
to ~10.</li>
<li>Not really, but we want to make sure that when we reduce the number
of observations we still have observations in each of the 3 levels in
species and sex.</li>
<li>NA’s are present in the sex variable, so let’s make sure we keep at
least one.</li>
</ol><p>Now that we have a clearer goal, let’s subset the data.</p>
<p>Useful functions for subsetting a dataset include
<code>subset()</code>, <code>head()</code>, <code>tail()</code>, and
indexing with [] (e.g., iris[1:4,]). Alternatively, you can use
tidyverse functions like <code>select()</code>, and
<code>filter()</code> from the tidyverse. You can also use the same
<code>sample()</code> functions we covered earlier.</p>
<p><strong><em>Note</em>:</strong> you should already have an
understanding of how to subset or wrangle data using the tidyverse from
the <a href="https://datacarpentry.org/R-ecology-lesson/" class="external-link">Data Analysis
and Visualization in R for Ecologists</a>. If not, go check it out!</p>
<div class="codewrapper sourceCode" id="cb55">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Mickey's current script</span></span>
<span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">readr</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">dplyr</span><span class="op">)</span></span>
<span></span>
<span><span class="va">surveys</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"data/surveys_complete_77_89.csv"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Rows: 16878 Columns: 13
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (6): species_id, sex, genus, species, taxa, plot_type
dbl (7): record_id, month, day, year, plot_id, hindfoot_length, weight

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb57">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Filter to known sex</span></span>
<span><span class="va">rodents_subset</span> <span class="op">&lt;-</span> <span class="va">surveys</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">sex</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"F"</span>, <span class="st">"M"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Subsetted dataset</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">rodents_subset</span><span class="op">$</span><span class="va">sex</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
   F    M
3656 4145 </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb59">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Original dataset</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">sex</span><span class="op">)</span> <span class="co"># the numbers don't match!</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
   F    M
7318 8260 </code></pre>
</div>
<p>Given that the code that is going wrong is that which creates
rodents_subset, we need to create a minimal reproducible version of
surveys! We can then insert our new_surveys dataset in place of the
original rodents one.</p>
<p><strong>Step 1: select the variables of interest</strong></p>
<div class="codewrapper sourceCode" id="cb61">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># subset rodent into new_rodent to make it minimal</span></span>
<span><span class="co"># Note: there are many ways you could do this!</span></span>
<span><span class="va">new_surveys</span> <span class="op">&lt;-</span> <span class="va">surveys</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># 1. select the variables of interest</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">record_id</span>, <span class="va">sex</span><span class="op">)</span></span>
<span>  <span class="co"># PAUSE. Does this work so far?</span></span>
<span><span class="va">new_surveys</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 16,878 × 2
   record_id sex
       &lt;dbl&gt; &lt;chr&gt;
 1         1 M
 2         2 M
 3         3 F
 4         4 M
 5         5 M
 6         6 M
 7         7 F
 8         8 M
 9         9 F
10        10 F
# ℹ 16,868 more rows</code></pre>
</div>
<p><strong>Step 2-5: reduce the number of observations to ~10 while
making sure the dataset still contains at least 3 species and at least 3
sexes</strong></p>
<p>While the rest is just one step, it is the trickiest, because this is
where we want to ensure the key elements of our original dataset, as
defined earlier, are preserved.</p>
<div id="exercise-6-your-turn-5-mins" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="exercise-6-your-turn-5-mins" class="callout-inner">
<h3 class="callout-title">Exercise 6: Your Turn! (5 mins)</h3>
<div class="callout-content">
<p>How would you continue the subsetting pipeline? How could you reduce
the number of observations while <strong>making sure you still have at
least 3 sexes left</strong>? Hint: there is no single right answer!
Trial and error works wonders.</p>
</div>
</div>
</div>
<div class="codewrapper sourceCode" id="cb63">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">set.seed</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">new_surveys</span> <span class="op">&lt;-</span> <span class="va">surveys</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># select the variables of interest</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">record_id</span>, <span class="va">sex</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># randomly select 4 rows from each sex category</span></span>
<span>  <span class="fu">slice_sample</span><span class="op">(</span>n<span class="op">=</span><span class="fl">4</span>, replace <span class="op">=</span> <span class="cn">F</span>, by<span class="op">=</span><span class="st">'sex'</span><span class="op">)</span> <span class="co"># use ?slice_sample to check the documentation</span></span>
<span><span class="va">new_surveys</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 12 × 2
   record_id sex
       &lt;dbl&gt; &lt;chr&gt;
 1      2359 M
 2     16335 M
 3      9910 M
 4      8278 M
 5     12038 F
 6      7862 F
 7      9221 F
 8      1335 F
 9      3320 &lt;NA&gt;
10       343 &lt;NA&gt;
11     14482 &lt;NA&gt;
12      9376 &lt;NA&gt; </code></pre>
</div>
<p>The code ran without issues, hooray! But do we end up with what we
were looking for?</p>
<ol style="list-style-type: decimal"><li>Do we have ~10 observations? Yes! 12 sounds good</li>
<li>Do we have at least 3 sexes? Yes! M, F, and NA</li>
</ol><p>Great! All of our requirements are fulfilled. Now let’s see if it
replicates Mickey’s problem when we add it to their minimal code.</p>
<p><strong><em>Note:</em></strong> <code>slice_sample()</code> and
similar functions allow you to specify and customize how exactly you
want that sample to be taken (check the documentation!). For example,
you can specify a proportion of rows to select, specify how to order
variables, whether ties <strong>[may require more explanation]</strong>
should be kept together, or even whether to weigh certain variables. All
of this allows you to keep aspects of your dataset that may be relevant
and hard to replicate otherwise.</p>
<p>Remember the problematic code snippet:</p>
<div class="codewrapper sourceCode" id="cb65">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Filter to known sex</span></span>
<span><span class="va">rodents_subset</span> <span class="op">&lt;-</span> <span class="va">surveys</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">sex</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"F"</span>, <span class="st">"M"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>We now want replace <code>surveys</code> with
<code>new_surveys</code>, and let’s change the name of the
<code>rodents_subset</code> too so we can compare them. Does that
problematic code snippet work or do we need to change anything else?</p>
<div class="codewrapper sourceCode" id="cb66">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Filter to known sex</span></span>
<span><span class="va">new_subset</span> <span class="op">&lt;-</span> <span class="va">new_surveys</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">sex</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"F"</span>, <span class="st">"M"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>The code ran without any errors! But does it replicate Mickey’s
problem?</p>
<div id="accordionInstructor9" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor9" aria-expanded="false" aria-controls="collapseInstructor9">
  <h3 class="accordion-header" id="headingInstructor9">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor9" class="accordion-collapse collapse" aria-labelledby="headingInstructor9" data-bs-parent="#accordionInstructor9">
<div class="accordion-body">
<p><strong><em>Note:</em></strong> if the new dataset had an odd number
of rows it would spit out a warning giving you a hint as to what the
source of the problem may be.</p>
</div>
</div>
</div>
</div>
<p>Take a step back to remind yourself of what you are looking for. What
was the problem we had identified?</p>
<ul><li>The number of rows that remain after the filter is lower than
expected.</li>
</ul><p>So what would we expect to see with this new dataset? Since it is
nice and short, this makes it a lot easier to predict the outcome.</p>
<ul><li>We should find that both tables list 4 females and 4 males.</li>
</ul><div class="codewrapper sourceCode" id="cb67">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Before the filter</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">new_surveys</span><span class="op">$</span><span class="va">sex</span><span class="op">)</span> <span class="co"># as expected!</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
F M
4 4 </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb69">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># After the filter</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">new_subset</span><span class="op">$</span><span class="va">sex</span><span class="op">)</span> <span class="co"># oh no! The numbers listed are not what we expect...</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
F M
2 2 </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb71">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ...which is exactly the problem we were trying to replicate!</span></span></code></pre>
</div>
<p>Why aren’t we getting the rows we are asking for?</p>
<p>Maybe our table is just wrong, let’s look at the actual dataset we
end up with</p>
<div class="codewrapper sourceCode" id="cb72">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">new_subset</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 4 × 2
  record_id sex
      &lt;dbl&gt; &lt;chr&gt;
1     16335 M
2      8278 M
3     12038 F
4      9221 F    </code></pre>
</div>
<p>Still wrong! What is going on?? We don’t have an answer, but we
certainly replicated a problem that occurs when we filter the data. Time
to ask for help!</p>
<div id="accordionInstructor10" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor10" aria-expanded="false" aria-controls="collapseInstructor10">
  <h3 class="accordion-header" id="headingInstructor10">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor10" class="accordion-collapse collapse" aria-labelledby="headingInstructor10" data-bs-parent="#accordionInstructor10">
<div class="accordion-body">
<p>I love that the <code>filter {dplyr}</code> documentation is
thoroughly unhelpful on this</p>
</div>
</div>
</div>
</div>
<p>But wait, Mickey’s dataset is now minimal and relevant, but is it
reproducible (accessible outside their device)? Not yet. We created a
subset of their original dataset <code>rodents</code> but this came from
a file on their computer. They could share the csv file and add a line
of code that uploads it… but we already said this is not good practice
for a reprex, and it makes it hard to ask for help on a community
website. Remember, the more steps required, the less likely someone will
want to help.</p>
<p>Thankfully, there is a nifty function <code>dput()</code> that can
help us out. Let’s try it and see what happens.</p>
<div class="codewrapper sourceCode" id="cb74">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dput</span><span class="op">(</span><span class="va">new_surveys</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fu">structure</span><span class="op">(</span><span class="fu">list</span><span class="op">(</span>record_id <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">2359</span>, <span class="fl">16335</span>, <span class="fl">9910</span>, <span class="fl">8278</span>, <span class="fl">12038</span>,</span>
<span><span class="fl">7862</span>, <span class="fl">9221</span>, <span class="fl">1335</span>, <span class="fl">3320</span>, <span class="fl">343</span>, <span class="fl">14482</span>, <span class="fl">9376</span><span class="op">)</span>, sex <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"M"</span>, <span class="st">"M"</span>,</span>
<span><span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span>, row.names <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="cn">NA</span>,</span>
<span><span class="op">-</span><span class="fl">12L</span><span class="op">)</span>, class <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"tbl_df"</span>, <span class="st">"tbl"</span>, <span class="st">"data.frame"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>It spit out a hard-to-read but not excessively long chunk of code.
This code, when run, will recreate the <code>new_rodents</code> dataset!
We can also break it down and label it further to help the reader.</p>
<div class="codewrapper sourceCode" id="cb76">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">reprex_data</span> <span class="op">&lt;-</span> <span class="fu">structure</span><span class="op">(</span><span class="fu">list</span><span class="op">(</span></span>
<span></span>
<span>  <span class="co"># a unique identifier (not actually necessary)</span></span>
<span>record_id <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">2359</span>, <span class="fl">16335</span>, <span class="fl">9910</span>, <span class="fl">8278</span>, <span class="fl">12038</span>, </span>
<span><span class="fl">7862</span>, <span class="fl">9221</span>, <span class="fl">1335</span>, <span class="fl">3320</span>, <span class="fl">343</span>, <span class="fl">14482</span>, <span class="fl">9376</span><span class="op">)</span>, </span>
<span></span>
<span><span class="co"># A list of sexes. Note: this includes NAs!</span></span>
<span>sex <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"M"</span>, <span class="st">"M"</span>, </span>
<span><span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span>, </span>
<span></span>
<span><span class="co"># no row names</span></span>
<span>row.names <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="cn">NA</span>, <span class="op">-</span><span class="fl">12L</span><span class="op">)</span>, </span>
<span></span>
<span><span class="co"># type of data</span></span>
<span>class <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"tbl_df"</span>, <span class="st">"tbl"</span>, <span class="st">"data.frame"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># see the dataset</span></span>
<span><span class="fu">print</span><span class="op">(</span><span class="va">reprex_data</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 12 × 2
   record_id sex
       &lt;dbl&gt; &lt;chr&gt;
 1      2359 M
 2     16335 M
 3      9910 M
 4      8278 M
 5     12038 F
 6      7862 F
 7      9221 F
 8      1335 F
 9      3320 &lt;NA&gt;
10       343 &lt;NA&gt;
11     14482 &lt;NA&gt;
12      9376 &lt;NA&gt; </code></pre>
</div>
<p>Ta-da! Now anyone can easily recreate Mickey’s minimal dataset and
use it to run the minimal code. Now, was that <em>really</em> easier
than creating a dataset from scratch?</p>
<p>Some of you may still be thinking that you could just use
<code>dput()</code> on the original dataset. And it would work. But that
wouldn’t be very considerate to those who are trying to help.</p>
<div id="exercise-7-try-it-1-min" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="exercise-7-try-it-1-min" class="callout-inner">
<h3 class="callout-title">Exercise 7: Try it! (1 min)</h3>
<div class="callout-content">
<p>Try running <code>dput(surveys)</code> in your script.</p>
</div>
</div>
</div>
<p>It becomes a huge chunk of code! When clearly we don’t need all of
that.</p>
<p>Remember, we want to keep everything minimal for many reasons:</p>
<ul><li>to make it easy for our helpers to understand our data and code</li>
<li>to allow helpers to quickly focus their efforts on the right
factors</li>
<li>to make the problem-solving process as easy and painless as
possible</li>
<li>bonus: to help <em>us</em> better understand and zero-in on the
source of our problem, often stumbling upon a solution along the
way</li>
</ul><p>Nevertheless, it remains an option for when your data appears too
complex or you are not quite sure where your problem lies and therefore
are not sure what minimal components are needed to reproduce the
example. In other words, when you don’t have a good mental model of what
the problem is even after going through the initial steps we outlined
earlier in the lesson.</p>
</section><section><h2 class="section-heading" id="using-an-r-built-dataset">4.7 Using an R-built dataset<a class="anchor" aria-label="anchor" href="#using-an-r-built-dataset"></a></h2>
<hr class="half-width"><p>The last approach we mentioned is to build a minimal reproducible
dataset based on the datasets that already exist within R (and therefore
everyone would have access to).</p>
<p>A list of readily available datasets can be found using
<code>library(help="datasets")</code>. You can then use <code>?</code>
in front of the dataset name to get more information about the contents
of the dataset.</p>
<p>For a more detailed discussion of the benefits of using this approach
see the Pros and Cons callout in section 4.3.</p>
<p>This approach essentially blends the skills you already learned in
the first two. You need to identify a dataset with appropriate variables
that match the “key elements” of the original dataset. You then need to
further reduce that dataset to a minimal, relevant, number or rows. Once
again, you can use the previously learned functions such as
<code>select()</code>, <code>filter()</code>, or
<code>sample()</code>.</p>
<p>Since you already learned everything you need, why not try it
yourself?</p>
<div id="exercise-8-extra-challenge-10-mins" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-8-extra-challenge-10-mins" class="callout-inner">
<h3 class="callout-title">Exercise 8: Extra Challenge (10 mins)</h3>
<div class="callout-content">
<p>Using the “HairEyeColor” dataset, create a minimal reproducible
dataset for the same issue and minimal code we have been exploring.</p>
<ol style="list-style-type: decimal"><li><p>Start by using <code>?HairEyeColor</code> to read a description
of the dataset and <code>View(HairEyeColor)</code> to see the actual
dataset.</p></li>
<li><p>Which variables would be a good match for our situation? What are
our requirements?</p></li>
<li><p>How can we subset this dataset to make it minimal and still
replicate our issue?</p></li>
</ol></div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<p>Remember, there are many possible solutions! The most important
feature is that the example dataset can replicate the issue when used
within our minimal code.</p>
<p>The following is 1 possible solution:</p>
<p>We selected Hair and Eye as replacements for species and sex because
they are both categorical and have at least 3 levels. We don’t strictly
need anything else. We will call our new <code>survyes</code>
replacement <code>hyc</code>. We set a seed because we want a random
sample.</p>
<div class="codewrapper sourceCode" id="cb78">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">set.seed</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># the dummy dataset</span></span>
<span><span class="va">hyc</span> <span class="op">&lt;-</span> <span class="fu">as.data.frame</span><span class="op">(</span><span class="va">HairEyeColor</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="co"># oh no! Needs to be converted to df -- might need to change example or have them figure that one out... or we can give them this first line.</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">Hair</span>, <span class="va">Eye</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">slice_sample</span><span class="op">(</span>n<span class="op">=</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="fu">print</span><span class="op">(</span><span class="va">hyc</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>    Hair   Eye
1  Black Hazel
2  Blond Brown
3    Red  Blue
4  Black Brown
5  Brown Brown
6    Red  Blue
7    Red Hazel
8  Brown Green
9  Brown Brown
10   Red Brown</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb80">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># the minimal code</span></span>
<span><span class="va">hyc_subset</span> <span class="op">&lt;-</span> <span class="va">hyc</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">Hair</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">'Red'</span>,<span class="st">'Blonde'</span><span class="op">)</span>,</span>
<span>         <span class="va">Eye</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">'Blue'</span>, <span class="st">'Brown'</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># illustrating the issue</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">hyc_subset</span><span class="op">$</span><span class="va">Hair</span>, <span class="va">hyc_subset</span><span class="op">$</span><span class="va">Eye</span><span class="op">)</span> </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
        Brown Blue Hazel Green
  Black     0    0     0     0
  Brown     0    0     0     0
  Red       0    1     0     0
  Blond     0    0     0     0</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb82">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># the whole subset</span></span>
<span><span class="fu">print</span><span class="op">(</span><span class="va">hyc_subset</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  Hair  Eye
1  Red Blue</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb84">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># But we know there are more!</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">hyc</span><span class="op">$</span><span class="va">Hair</span>, <span class="va">hyc</span><span class="op">$</span><span class="va">Eye</span><span class="op">)</span> <span class="co"># Reds have 2 Blue and 1 Brown, and Blonds have 1 Brown!</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
        Brown Blue Hazel Green
  Black     1    0     1     0
  Brown     2    0     0     1
  Red       1    2     1     0
  Blond     1    0     0     0</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="what-about-nas" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="what-about-nas" class="callout-inner">
<h3 class="callout-title"><em>What about NAs?</em></h3>
<div class="callout-content">
<p>If your data has NAs and they may be causing the problem, it is
important to include them in your example dataset. You can find where
there are NAs in your dataset by using <code>is.na</code>, for example:
<code>is.na(krats$weight)</code>. This will return a logical vector or
TRUE if the cell contains an NA and FALSE if not. The simplest way to
include NAs in your dummy dataset is to directly include it in vectors:
<code>x &lt;- c(1,2,3,NA)</code>. You can also subset a dataset that
already contains NAs, or change some of the values to NAs using
<code>mutate(ifelse())</code> or substitute all the values in a column
by sampling from within a vector that contains NAs.</p>
<p>One important thing to note when subsetting a dataset with NAs is
that subsetting methods that use a condition to match rows won’t
necessarily match NA values in the way you expect. For example</p>
<div class="codewrapper sourceCode" id="cb86">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">test</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span>x <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NA</span>, <span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu">rnorm</span><span class="op">(</span><span class="fl">4</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">test</span> <span class="op">%&gt;%</span> <span class="fu">filter</span><span class="op">(</span><span class="va">x</span> <span class="op">!=</span> <span class="fl">3</span><span class="op">)</span> </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  x          y
1 1 -0.3053884</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb88">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># you might expect that the NA values would be included, since “NA is not equal to 3”. But actually, the expression NA != 3 evaluates to NA, not TRUE. So the NA rows will be dropped!</span></span>
<span><span class="co"># Instead you should use is.na() to match NAs</span></span>
<span><span class="va">test</span> <span class="op">%&gt;%</span> <span class="fu">filter</span><span class="op">(</span><span class="va">x</span> <span class="op">!=</span> <span class="fl">3</span> <span class="op">|</span> <span class="fu">is.na</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   x          y
1 NA  0.4874291
2 NA  0.7383247
3  1 -0.3053884</code></pre>
</div>
</div>
</div>
</div>
<p>Great work! You created a minimal reproducible example. In the next
episode, you will learn about <a href="https://reprex.tidyverse.org" class="external-link">reprex</a>, a package that can
help you double-check that your example is properly reproducible by
running it in a clean environment. (As an added bonus,
<a href="https://reprex.tidyverse.org" class="external-link">reprex</a> will format your example nicely so it’s easy to
post to places like Slack, GitHub, and StackOverflow.)</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul><li>A minimal reproducible dataset (a) contains the minimum number of
lines, variables, and categories, in the correct format, to replicate
your problem; and (b) must be fully reproducible, meaning that someone
else can run the same code from anywhere without additional steps.</li>
<li>To make it accessible, you can create a dataset from scratch using
<code>as.data.frame</code>, you can use an R-built dataset like
<code>cars</code>, or you can use a subset of your own dataset and then
use <code>dput()</code> to generate reproducible code.</li>
</ul></div>
</div>
</div>
</section><section><h2 class="section-heading" id="bonus-additional-practice">Bonus: Additional Practice<a class="anchor" aria-label="anchor" href="#bonus-additional-practice"></a></h2>
<hr class="half-width"><p>Here are some more practice exercises if you wish to test your
knowledge</p>
<div id="extra-practice-would-need-to-change-from-mpg-since-thats-from-ggplot" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="extra-practice-would-need-to-change-from-mpg-since-thats-from-ggplot" class="callout-inner">
<h3 class="callout-title">Extra Practice? Would need to change from mpg,
since that’s from ggplot</h3>
<div class="callout-content">
<p>For each of the following, identify which data are necessary to
create a minimal reproducible dataset using <code>mpg</code>.</p>
<ol style="list-style-type: upper-alpha"><li>We want to know how the highway mpg has changed over the years<br></li>
<li>We need a list of all “types” of cars and their fuel type for each
manufacturer<br></li>
<li>We want to compare the average city mpg for a compact car from each
manufacturer<br></li>
</ol></div>
</div>
</div>
<p><strong>(I copied these from excercise 6 in the google doc… but I’m
not sure that they are getting at the point of the lesson…)</strong></p>
<div id="another-excercise" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="another-excercise" class="callout-inner">
<h3 class="callout-title">Another Excercise</h3>
<div class="callout-content">
<p>Each of the following examples needs your help to create a dataset
that will correctly reproduce the given result and/or warning message
when the code is run. Fix the dataset shown or fill in the blanks so it
reproduces the problem.</p>
<ol style="list-style-type: upper-alpha"><li>
<code>set.seed(1)</code>
<code>sample_data &lt;- data.frame(fruit = rep(c(“apple”, “banana”), 6), weight = rnorm(12))</code>
<code>ggplot(sample_data, aes(x = fruit, y = weight)) + geom_boxplot()</code>
<strong>HELP: how do I insert an image from clipboard?? Is it even
possible?</strong>
</li>
<li>bodyweight &lt;- c(12, 13, 14, <strong>,</strong> ) max(bodyweight)
[1] NA</li>
<li>sample_data &lt;- data.frame(x = 1:3, y = 4:6) mean(sample_data<span class="math inline">\(x)
[1] NA
Warning message:
In mean.default(sample_data\)</span>x): argument is not numeric or
logical: returning NA</li>
<li>sample_data &lt;- ____ dim(sample_data) NULL</li>
</ol></div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Show me the solution </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<ol style="list-style-type: upper-alpha"><li>“fruit” needs to be a factor and the order of the levels must be
specified:
<code>sample_data &lt;- data.frame(fruit = factor(rep(c("apple", "banana"), 6), levels = c("banana",          "apple")), weight = rnorm(12))</code>
</li>
<li>one of the blanks must be an NA</li>
<li><strong>?? + what’s really the point of this one?</strong></li>
<li><code>sample_data &lt;- data.frame(x = factor(1:3), y = 4:6)</code></li>
</ol></div>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="../instructor/3-minimal-reproducible-code.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="../instructor/5-asking-your-question.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="../instructor/3-minimal-reproducible-code.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Minimal reproducible
        </a>
        <a class="chapter-link float-end" href="../instructor/5-asking-your-question.html" rel="next">
          Next: Asking your question...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/carpentries-incubator/R-help-reprexes/edit/main/episodes/4-minimal-reproducible-data.Rmd" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/carpentries-incubator/R-help-reprexes/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/carpentries-incubator/R-help-reprexes/" class="external-link">Source</a></p>
				<p><a href="https://github.com/carpentries-incubator/R-help-reprexes/blob/main/CITATION.cff" class="external-link">Cite</a> | <a href="mailto:kgahm@ucla.edu">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.17.1" class="external-link">sandpaper (0.17.1)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.9" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.7" class="external-link">varnish (1.0.7)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "@id": "https://carpentries-incubator.github.io/R-help-reprexes/instructor/4-minimal-reproducible-data.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/LearningResource/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "R, reprex, help, The Carpentries, error, debug, reproducible example",
  "name": "Minimal reproducible data",
  "creativeWorkStatus": "active",
  "url": "https://carpentries-incubator.github.io/R-help-reprexes/instructor/4-minimal-reproducible-data.html",
  "identifier": "https://carpentries-incubator.github.io/R-help-reprexes/instructor/4-minimal-reproducible-data.html",
  "dateCreated": "2024-05-14",
  "dateModified": "2025-09-09",
  "datePublished": "2025-09-09"
}

  </script><script>
		feather.replace();
	</script></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

