<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>RRRRR, I’m stuck!: Identify the problem and make a plan</title><meta name="viewport" content="width=device-width, initial-scale=1"><script src="../assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="../assets/styles.css"><script src="../assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../favicons/incubator/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicons/incubator/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="../favicons/incubator/favicon-16x16.png"><link rel="manifest" href="../favicons/incubator/site.webmanifest"><link rel="mask-icon" href="../favicons/incubator/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="black"></head><body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="incubator-logo" alt="Carpentries Incubator" src="../assets/images/incubator-logo.svg"><span class="badge text-bg-danger">
          <abbr title="This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.">
            <a href="https://docs.carpentries.org/resources/curriculum/lesson-life-cycle.html" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
              Pre-Alpha
            </a>
            <span class="visually-hidden">This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text"><li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul></li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='../2-identify-the-problem.html';">Learner View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Carpentries Incubator" src="../assets/images/incubator-logo-sm.svg"></div>
    <div class="lesson-title-md">
      RRRRR, I’m stuck!
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            RRRRR, I’m stuck!
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Instructor Notes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extract All Images</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><hr><li><a class="dropdown-item" href="reference.html">Reference</a></li>
          </ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="../instructor/aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  RRRRR, I’m stuck!
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 9%" class="percentage">
    9%
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: 9%" aria-valuenow="9" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text"><li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul></li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../2-identify-the-problem.html">Learner View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->

            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Schedule</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="1-intro-reproducible-examples.html">1. What is a reprex and why is it useful?</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        2. Identify the problem and make a plan
        </span>
      </button>
    </div><!--/div.accordion-header-->

    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#strategy-1-interpret-error-messages-and-change-function-inputs">Strategy 1: Interpret error messages and change function inputs</a></li>
<li><a href="#strategy-2-read-function-documentation">Strategy 2: Read function documentation</a></li>
<li><a href="#semantic-errors">Semantic errors</a></li>
<li><a href="#identifying-the-problem">Identifying the problem</a></li>
<li><a href="#strategy-4-using-print-to-show-information">Strategy 4: Using <code>print()</code> to show information</a></li>
<li><a href="#summary-code-first-aid">Summary: Code first aid</a></li>
<li><a href="#when-should-i-prepare-my-code-for-a-reprex">When should I prepare my code for a reprex?</a></li>
<li><a href="#back-to-our-analysis-mickey-tries-to-get-unstuck">Back to our analysis: Mickey tries to get unstuck</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="3-minimal-reproducible-code.html">3. Minimal reproducible code</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="4-minimal-reproducible-data.html">4. Minimal reproducible data</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="5-asking-your-question.html">5. Asking your question</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="../instructor/key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Instructor Notes</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extract All Images</a>
                      </li>
                      <hr><li><a class="dropdown-item" href="reference.html">Reference</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources"><a href="../instructor/aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">

            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="../instructor/1-intro-reproducible-examples.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="../instructor/3-minimal-reproducible-code.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="../instructor/1-intro-reproducible-examples.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: What is a reprex and
        </a>
        <a class="chapter-link float-end" href="../instructor/3-minimal-reproducible-code.html" rel="next">
          Next: Minimal reproducible...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Identify the problem and make a plan</h1>
        <p>Last updated on 2025-09-16 |

        <a href="https://github.com/carpentries-incubator/R-help-reprexes/edit/main/episodes/2-identify-the-problem.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>



        <p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 70 minutes</p>

        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>What do I do when I encounter an error?</li>
<li>What do I do when my code outputs something I don’t expect?</li>
<li>Why do errors and warnings appear in R?</li>
<li>How can I find which areas of code are responsible for errors?</li>
<li>How can I fix my code? What other options exist if I can’t fix
it?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<p>After completing this episode, participants should be able to…</p>
<ul><li>Describe how the desired code output differs from the actual
output</li>
<li>Categorize an error message (e.g. syntax error, semantic errors,
package-specific errors, etc.)</li>
<li>Describe what an error message is trying to communicate</li>
<li>Identify specific lines and/or functions generating the error
message</li>
<li>Use R Documentation to look up function syntax and examples</li>
<li>Quickly fix commonly-encountered R errors using ‘code first
aid’</li>
<li>Identify when a problem is better suited for asking for further
help, including making a <code>reprex</code>
</li>
</ul></div>
</div>
</div>
</div>
</div>
<p>Let’s take a look in more detail at the first step of the
roadmap.</p>
<figure><img src="../fig/01_identify_problem.png" class="figure mx-auto d-block"></figure><p>In this episode, we’ll cover what to do when you first encounter an
error or undesired output from your code. We’ll cover the basics of
identifying errors, fixing them if possible, and determining when to
create a reprex. At the end of the lesson, we’ll return to Mickey’s
analysis.</p>
<p>The first step in solving a problem is understanding what is going
wrong. Sometimes R will help you out by displaying an error message when
it is unable to run your code. This is a helpful diagnostic tool that,
when interpreted correctly, can quickly lead you to a solution. Other
times, R doesn’t encounter any problems running your code, but the
output is not what you expected. These problems may require a few extra
steps to properly diagnose. We will start with easier scenarios and
provide helpful “code first aid” steps as we build up to harder
challenges.</p>
<section><h2 class="section-heading" id="strategy-1-interpret-error-messages-and-change-function-inputs">Strategy 1: Interpret error messages and change function inputs<a class="anchor" aria-label="anchor" href="#strategy-1-interpret-error-messages-and-change-function-inputs"></a></h2>
<hr class="half-width"><p>R will often let us know there’s a problem by displaying an error
message. An error that generates an error message is called a
<strong>syntax error</strong>. Error messages happen when R is not able
to run your code (this is in contrast to a <strong>warning</strong>
message, which gives a hint that something could be wrong while the code
keeps running). Error messages are sometimes straightforward, but other
times they can be very tricky to decipher. In this lesson, will teach
some tools for interpreting syntax errors for yourself.</p>
<p>Here’s an example error message. In the last episode, we saw that the
<code>taxa</code> column contains information about the higher-level
taxon of each organism caught, such as “Rodent” or “Bird”. We decide to
look at the distribution of taxa by creating a frequency table.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">table</span><span class="op">(</span><span class="va">taxa</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'taxa' not found</code></pre>
</div>
<p>This code produces an error. What’s going on?</p>
<p>R is telling us that it can’t find <code>taxa</code> in the local
environment. That’s because we haven’t told it where to look–recall that
<code>taxa</code> is the name of a column in the <code>surveys</code>
dataset.</p>
<p>The information from the error message doesn’t specifically tell us
how to solve the error, but it can help us realize what went wrong. In
this case, we can look back at our previous code and see that we were
able to point R to the column using the <code>$</code> operator:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">table</span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">taxa</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
   Bird  Rabbit Reptile  Rodent
    300      69       4   16148 </code></pre>
</div>
<p>That’s better! Now, let’s make a barplot of this column to show this
same information.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Make a plot of the different taxa in the rodents dataset</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">surveys</span><span class="op">$</span><span class="va">taxa</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu">geom_bar</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in `fortify()`:
! `data` must be a &lt;data.frame&gt;, or an object coercible by `fortify()`,
  or a valid &lt;data.frame&gt;-like object coercible by `as.data.frame()`, not a
  &lt;uneval&gt; object.
ℹ Did you accidentally pass `aes()` to the `data` argument?</code></pre>
</div>
<p>It seems like that should have worked, but we got another error
message, and this one seems harder to interpret. Once again, let’s go
over each part of the error message and see if it provides any
clues.</p>
<p>First, we see an error from a function called <code>fortify</code>,
which we didn’t even use! Then, there’s a more helpful informational
message: “Did you accidentally pass <code>aes()</code> to the
<code>data</code> argument?” This does seem to relate to our line of
code, as we do pass <code>aes</code> into the <code>ggplot</code>
function. But what is this “<code>data</code> argument?”</p>
</section><section><h2 class="section-heading" id="strategy-2-read-function-documentation">Strategy 2: Read function documentation<a class="anchor" aria-label="anchor" href="#strategy-2-read-function-documentation"></a></h2>
<hr class="half-width"><p>Reading the error message gave us some clues, but it wasn’t enough to
fix the problem. Let’s try another strategy. Reading the function
documentation can improve our understanding of how the function works,
and often that can reveal problems with our code.</p>
<p>Let’s access the documentation for the function
<code>ggplot</code>:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">ggplot</span></span></code></pre>
</div>
<p>A Help window pops up in RStudio. [Add discussion of the different
sections of function documentation, in general terms, here?] The “Usage”
and “Arguments” sections tell us that ggplot takes the argument
<code>data</code>, followed by <code>mapping</code>, which uses
<code>aes()</code>. The “Arguments” section tells us that if the object
passed to that first <code>data</code> argument isn’t already a data
frame, ggplot will try to convert it to a data frame using
<code>fortify</code>. That function, <code>fortify</code>, sounds
familiar from the error message! This gives us an important clue. It
looks like we accidentally passed the <code>mapping</code> argument into
the position where ggplot expected <code>data</code> in the form of a
data frame.</p>
<p>The “Examples” section of the function documentation can be
particularly helpful because it shows how functions are used in context.
The “Examples” section in the <code>ggplot</code> documentation, under
“Pattern 1”, shows exactly how <code>ggplot</code> expects the
<code>data</code> and <code>mapping</code> arguments to be written.</p>
<p>Using this information, we can change our code to put the arguments
in the right order–first the name of the dataset for the
<code>data</code> argument, and then the <code>aes()</code> call for the
<code>mapping</code> argument.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">surveys</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">taxa</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu">geom_bar</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/2-identify-the-problem-rendered-unnamed-chunk-6-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>The error message is gone, and it works! Here we see our desired
plot. What do you notice about the data?</p>
<p><em>- Lots of rodents</em> <em>- Some missing values (NAs)</em></p>
<p>Let’s take a moment to highlight some patterns we’re starting to see
in the course of tinkering with our code.</p>
<p>First, we <strong>noticed a problem</strong>. In this case, the
problem was a <em>syntax error</em>, in which the code failed to run and
we got an error message.</p>
<p>We carefully <strong>read the error message</strong> and took a guess
at what might be wrong. We <strong>changed the inputs to the
function</strong> accordingly and tried again.</p>
<p>When we encountered another error message, we <strong>looked through
the function documentation</strong> to find more clues about how to fix
the error. This helped us see that we were missing an argument.</p>
<p>Another strategy we could have tried would be to copy and paste the
error message into a <strong>search engine or a generative LLM</strong>
for more interpretable explanations. And, when all else fails, we can
prepare our code into a reproducible example for expert help.</p>
<p>Let’s see if we can use the strategies we’ve learned so far to
address a new problem. Here they are, for reference:</p>
<div id="code-first-aid-strategies" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="code-first-aid-strategies" class="callout-inner">
<h3 class="callout-title">Code first aid strategies</h3>
<div class="callout-content">
<ul><li>Interpret error messages and tweak inputs</li>
<li>Look at the function documentation</li>
<li>Put the error message into a search engine or a generative LLM</li>
</ul></div>
</div>
</div>
<div id="exercise-1-applying-code-first-aid" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-1-applying-code-first-aid" class="callout-inner">
<h3 class="callout-title">Exercise 1: Applying code first aid</h3>
<div class="callout-content">
<p>Below we see an error message pop up when trying to quantify the
counts of <code>genus</code> and <code>species</code> in our dataset.
Which of the following interpretations of the error message most aptly
describes the problem (hint: look at the <code>?tally</code>
documentation if you’re stuck!)</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">surveys</span> <span class="op">%&gt;%</span> <span class="fu">tally</span><span class="op">(</span><span class="va">genus</span>, <span class="va">species</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in `tally()`:
ℹ In argument: `n = sum(genus, na.rm = TRUE)`.
Caused by error in `sum()`:
! invalid 'type' (character) of argument</code></pre>
</div>
<ol style="list-style-type: lower-alpha"><li><p><code>tally</code> does not accept
<code>'type' (character)</code> arguments. We should change genus and
species to factors or numbers and run this line again.</p></li>
<li><p><code>tally</code> does not accept
<code>'type' (character)</code> arguments. There is no way to quantify
these data with this function.</p></li>
<li><p><code>tally</code> does not accept
<code>'type' (character)</code> arguments. We need to assign a weight
(e.g. 1) to each row so it knows how much to numerically weigh each
observation.</p></li>
<li><p><code>tally</code> does not accept
<code>'type' (character)</code> arguments. This function is not intended
to <code>group_by</code> two variables and a different function
(<code>count</code>) is required instead.</p></li>
</ol></div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>d is the correct answer!</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">surveys</span> <span class="op">%&gt;%</span> <span class="fu">count</span><span class="op">(</span><span class="va">genus</span>, <span class="va">species</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 36 × 3
   genus            species             n
   &lt;chr&gt;            &lt;chr&gt;           &lt;int&gt;
 1 Ammospermophilus harrisi           136
 2 Amphispiza       bilineata         223
 3 Baiomys          taylori             3
 4 Calamospiza      melanocorys        13
 5 Callipepla       squamata           16
 6 Campylorhynchus  brunneicapillus    23
 7 Chaetodipus      penicillatus      382
 8 Crotalus         scutalatus          1
 9 Crotalus         viridis             1
10 Dipodomys        merriami         5675
# ℹ 26 more rows</code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="semantic-errors">Semantic errors<a class="anchor" aria-label="anchor" href="#semantic-errors"></a></h2>
<hr class="half-width"><p>Let’s go back to our rodent analysis. We would like to subset the
data to include only the <code>Rodent</code> taxon (as opposed to the
other taxa included in the dataset: Bird, Rabbit, Reptile or NA). Let’s
quickly check to see how much data we’d be throwing out by doing so:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">table</span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">taxa</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
   Bird  Rabbit Reptile  Rodent
    300      69       4   16148 </code></pre>
</div>
<p>We’re interested in the rodents, and thankfully it seems like a
majority of our observations will be maintained when subsetting to
rodents. But wait… In the barplot above, we could clearly see that there
were some NA values. Why don’t we see them here?</p>
<p>This is a new type of problem, called a <strong>semantic
error</strong>: the R code ran without any error messages, but it
produced an unexpected output. Because there is no error message,
semantic errors can be sneaky and hard to notice!</p>
<p>We can’t use our first code first aid strategy here, since there is
no error message to read. So let’s jump straight to strategy 2,
<strong>reading the function documentation.</strong></p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">table</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Help on topic 'table' was found in the following packages:

  Package               Library
  vctrs                 /home/runner/.local/share/renv/cache/v5/linux-ubuntu-jammy/R-4.5/x86_64-pc-linux-gnu/vctrs/0.6.5/c03fa420630029418f7e6da3667aac4a
  base                  /home/runner/.cache/R/renv/sandbox/linux-ubuntu-jammy/R-4.5/x86_64-pc-linux-gnu/9a444a72


Using the first match ...</code></pre>
</div>
<p>The documentation for <code>table</code> provides some clues. The
“Usage” and “Arguments” sections show us an argument called
<code>useNA</code> that accepts “no”, “ifany”, and “always”, but it’s
not immediately apparent which one we should use to show our NA values.
When we look at “Examples”, we find something else that looks
helpful:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">table</span><span class="op">(</span><span class="va">a</span><span class="op">)</span>                 <span class="co"># does not report NA's</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">a</span>, exclude <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="co"># reports NA's</span></span></code></pre>
</div>
<p>Aha! So it looks like we can use <code>exclude = NULL</code> to
report NAs in our table. Let’s try that.</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">table</span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">taxa</span>, exclude <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
   Bird  Rabbit Reptile  Rodent    &lt;NA&gt;
    300      69       4   16148     357 </code></pre>
</div>
<p>Problem solved! Now the NA values show up in the table. We see that
by subsetting to the “Rodent” taxa, we would losing about 357 NAs, which
themselves could be rodents! However, in this case, it seems a small
enough portion to safely omit. Let’s subset our data to the rodent
taxon.</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Just rodents</span></span>
<span><span class="va">rodents</span> <span class="op">&lt;-</span> <span class="va">surveys</span> <span class="op">%&gt;%</span> <span class="fu">filter</span><span class="op">(</span><span class="va">taxa</span> <span class="op">==</span> <span class="st">"Rodent"</span><span class="op">)</span></span></code></pre>
</div>
<div id="exercise-2-syntax-vs.-semantic-errors" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-2-syntax-vs.-semantic-errors" class="callout-inner">
<h3 class="callout-title">Exercise 2: Syntax vs. semantic errors</h3>
<div class="callout-content">
<p>There are 3 lines of code below, and each attempts to create the same
plot. Identify which produces a syntax error, which produces a semantic
error, and which correctly creates the plot (hint: this may require you
inferring what type of graph we’re trying to create!)</p>
<ol style="list-style-type: upper-alpha"><li><p><code>ggplot(rodents) + geom_bin_2d(aes(month, plot_type))</code></p></li>
<li><p><code>ggplot(rodents) + geom_tile(aes(month, plot_type), stat = "count")</code></p></li>
<li><p><code>ggplot(rodents) + geom_tile(aes(month, plot_type))</code></p></li>
</ol></div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>In this case, A correctly creates the graph, plotting as colors in
the tile the number of times an observation is seen. It essentially runs
the following lines of code:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rodents_summary</span> <span class="op">&lt;-</span> <span class="va">rodents</span> <span class="op">%&gt;%</span> <span class="fu">group_by</span><span class="op">(</span><span class="va">plot_type</span>, <span class="va">month</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">summarize</span><span class="op">(</span>count<span class="op">=</span><span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`summarise()` has grouped output by 'plot_type'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span><span class="va">rodents_summary</span><span class="op">)</span> <span class="op">+</span> <span class="fu">geom_tile</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">month</span>, <span class="va">plot_type</span>, fill<span class="op">=</span><span class="va">count</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/2-identify-the-problem-rendered-unnamed-chunk-13-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>B is a syntax error, and will produce the following error:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span><span class="va">rodents</span><span class="op">)</span> <span class="op">+</span> <span class="fu">geom_tile</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">month</span>, <span class="va">plot_type</span><span class="op">)</span>, stat <span class="op">=</span> <span class="st">"count"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in `geom_tile()`:
! Problem while computing stat.
ℹ Error occurred in the 1st layer.
Caused by error in `setup_params()`:
! `stat_count()` must only have an x or y aesthetic.</code></pre>
</div>
<p>Finally, C is a semantic error. It does produce a plot, which is
rather meaningless:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span><span class="va">rodents</span><span class="op">)</span> <span class="op">+</span> <span class="fu">geom_tile</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">month</span>, <span class="va">plot_type</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/2-identify-the-problem-rendered-unnamed-chunk-15-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure></div>
</div>
</div>
</div>
<p>The steps to identifying the problem and in <strong>code first
aid</strong> matches what we’ve seen above. However, here seeing the
problem arise in our code may be much more subtle, and comes from us
recognizing output we don’t expect or know to be wrong. Even if the code
is run, R may give us <strong>warning</strong> or informational messages
which pop up when executing your code. Most of the time, however, it’s
up to the coder to be vigilant and be sure steps are running as they
should. Interpreting the problem may also be more difficult as R gives
us little or no indication about how it’s misinterpreting our
intent.</p>
<div id="callout2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div class="callout-inner">
<div class="callout-content">
<p>Generally, the more your code deviates from just using base R
functions, or the more you use specific packages, both the quality of
documentation and online help available from search engines and Googling
gets worse and worse. While base R errors will often be solvable in a
couple of minutes from a quick <code>?help</code> check or a long online
discussion and solutions on a website like Stack Overflow, errors
arising from little-used packages applied in bespoke analyses might
merit isolating your specific problem to a reproducible example for
online help, or even getting in touch with the developers! Such
community input and questions are often the way packages and
documentation improves over time.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="identifying-the-problem">Identifying the problem<a class="anchor" aria-label="anchor" href="#identifying-the-problem"></a></h2>
<hr class="half-width"><p>In the previous section, it was evident which function was causing a
syntax or semantic error. But sometimes, identifying the problem may be
trickier. It may be difficult to determine which lines or sections of
code are producing the error.</p>
<p>Let’s take a look at another code example. Our goal: to see
<strong>which k-rat species appear in different plot types over the
years</strong>.</p>
<div id="accordionInstructor1" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor1" aria-expanded="false" aria-controls="collapseInstructor1">
  <h3 class="accordion-header" id="headingInstructor1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor1" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor1" aria-labelledby="headingInstructor1">
<div class="accordion-body">
<p>The misspelling of “Dipodomys” below is deliberate!</p>
</div>
</div>
</div>
</div>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example: identifying a more complex error</span></span>
<span></span>
<span><span class="co"># Just k-rats</span></span>
<span><span class="va">krats</span> <span class="op">&lt;-</span> <span class="va">rodents</span> <span class="op">%&gt;%</span> <span class="fu">filter</span><span class="op">(</span><span class="va">genus</span> <span class="op">==</span> <span class="st">"Dipadomys"</span><span class="op">)</span> <span class="co">#filter the dataset to just include the kangaroo rat genus</span></span>
<span></span>
<span><span class="co"># plot a histogram of how many observations are seen in each plot type over an x axis of years.</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="va">krats</span>, <span class="fu">aes</span><span class="op">(</span><span class="va">year</span>, fill <span class="op">=</span> <span class="va">plot_type</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_histogram</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span><span class="va">species</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in `combine_vars()`:
! Faceting variables must have at least one value.</code></pre>
</div>
<p>Uh-oh. Another error here, when we try to make a ggplot. But what is
“combine_vars?” And then: “Faceting variables must have at least one
value” What does that mean?</p>
<p>This is not an easily interpretable error message from
<code>ggplot</code>, and our code looks like it <em>should</em> run.
This time we put the <code>data</code> argument in the right place, we
included <code>aes()</code>, and we didn’t misspell anything.</p>
<p>Considering this chunk of code, let’s take a step back. Is it
possible that we’re looking at the wrong code? What if the error isn’t
in the ggplot code itself? Let’s look at the <code>krats</code> dataset
to make sure it looks normal.</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">krats</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="co"># A tibble: 0 × 13</span></span>
<span><span class="co"># ℹ 13 variables: record_id &lt;dbl&gt;, month &lt;dbl&gt;, day &lt;dbl&gt;, year &lt;dbl&gt;,</span></span>
<span><span class="co">#   plot_id &lt;dbl&gt;, species_id &lt;chr&gt;, sex &lt;chr&gt;, hindfoot_length &lt;dbl&gt;,</span></span>
<span><span class="co">#   weight &lt;dbl&gt;, genus &lt;chr&gt;, species &lt;chr&gt;, taxa &lt;chr&gt;, plot_type &lt;chr&gt;</span></span></code></pre>
</div>
<p>It’s empty! Something must have gone wrong not with
<code>ggplot</code>, but with the code we used to create the
<code>krats</code> object.</p>
</section><section><h2 class="section-heading" id="strategy-4-using-print-to-show-information">Strategy 4: Using <code>print()</code> to show information<a class="anchor" aria-label="anchor" href="#strategy-4-using-print-to-show-information"></a></h2>
<hr class="half-width"><p>We can use a <code>print</code> statement to see which genera are
included in the original <code>rodents</code> dataset.</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">print</span><span class="op">(</span><span class="va">rodents</span> <span class="op">%&gt;%</span> <span class="fu">count</span><span class="op">(</span><span class="va">genus</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 12 × 2
   genus                n
   &lt;chr&gt;            &lt;int&gt;
 1 Ammospermophilus   136
 2 Baiomys              3
 3 Chaetodipus        382
 4 Dipodomys         9573
 5 Neotoma            904
 6 Onychomys         1656
 7 Perognathus        553
 8 Peromyscus        1271
 9 Reithrodontomys   1412
10 Rodent               4
11 Sigmodon           103
12 Spermophilus       151</code></pre>
</div>
<p>This tells us two things. For one, we noticed that we have misspelled
<em>Dipodomys</em>, which we can now fix.</p>
<p>Our <code>print()</code> call also tells us that we should expect a
data frame with 9573 values after subsetting to the genus
<em>Dipodomys</em>. This will be useful to check our work after fixing
the misspelling.</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example: identifying a more complex error</span></span>
<span></span>
<span><span class="co"># Just k-rats</span></span>
<span><span class="va">krats</span> <span class="op">&lt;-</span> <span class="va">rodents</span> <span class="op">%&gt;%</span> <span class="fu">filter</span><span class="op">(</span><span class="va">genus</span> <span class="op">==</span> <span class="st">"Dipodomys"</span><span class="op">)</span> <span class="co">#filter the dataset to just include the kangaroo rat genus (fixed misspelling)</span></span>
<span></span>
<span><span class="co"># check dimensions of krats</span></span>
<span><span class="fu">dim</span><span class="op">(</span><span class="va">krats</span><span class="op">)</span> <span class="co"># 9573, as expected!</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 9573   13</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># plot a histogram of how many observations are seen in each plot type over an x axis of years.</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="va">krats</span>, <span class="fu">aes</span><span class="op">(</span><span class="va">year</span>, fill <span class="op">=</span> <span class="va">plot_type</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_histogram</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span><span class="va">species</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<figure><img src="../fig/2-identify-the-problem-rendered-unnamed-chunk-19-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Our improved code here looks good. Checking the dimensions of our
subsetted data frame using <code>dim()</code> function confirms we now
have all the <em>Dipodomys</em> observations, and our plot is looking
better.</p>
<p>Routinely printing out information about your dataset can be a good
way to check that your intermediate results make sense.</p>
</section><section><h2 class="section-heading" id="summary-code-first-aid">Summary: Code first aid<a class="anchor" aria-label="anchor" href="#summary-code-first-aid"></a></h2>
<hr class="half-width"><p>Let’s update our list of code first aid strategies:</p>
<div id="code-first-aid-strategies-detailed-version" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="code-first-aid-strategies-detailed-version" class="callout-inner">
<h3 class="callout-title">Code first aid strategies, detailed
version</h3>
<div class="callout-content">
<ol start="0" style="list-style-type: decimal"><li>Identify the problem area</li>
</ol><ul><li>add print statements immediately upstream or downstream of problem
areas</li>
<li>check the desired output from functions</li>
<li>see whether any intermediate output can be further isolated and
examined separately</li>
</ul><ol style="list-style-type: decimal"><li>Act on parts of the error we can understand</li>
</ol><ul><li>interpreting error messages</li>
<li>changing input to a function</li>
<li>checking on the control flow of code (e.g. for loops, if/else)</li>
</ul><ol start="2" style="list-style-type: decimal"><li>Reading the R documentation for relevant functions</li>
</ol><ul><li>reading the documentation’s <strong>Description</strong>,
<strong>Usage</strong>, <strong>Arguments</strong>,
<strong>Details</strong>
</li>
<li>testing out code from the <strong>Examples</strong> section</li>
</ul><ol start="3" style="list-style-type: decimal"><li>Quick online help with a search engine / generative LLM</li>
</ol><ul><li>Copying error messages for more interpretable explanations</li>
<li>Describing your error in the hopes of an already-solved
solution</li>
<li>Seeing if an LLM generates equivalent error-free code solving the
same goal</li>
</ul></div>
</div>
</div>
<p>We can now understand these steps as a continuous cycle of zeroing in
on the problem more and more precisely. Whenever one of the first aid
steps helps us identify a part of the code that is failing, we can zoom
in on that piece of code and restart the checklist.</p>
<p>If the first aid steps are enough to solve the problem, great! If
not, we can stop trying once we get stuck or don’t understand anymore
how the code is failing. At that point, we can isolate the specific code
area and use it to create a reprex in order to get help from someone
else. <strong>We’ll delve more into the process of creating a reprex in
the next episode.</strong></p>
<div id="exercise-3-isolating-the-problem" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-3-isolating-the-problem" class="callout-inner">
<h3 class="callout-title">Exercise 3: Isolating the problem</h3>
<div class="callout-content">
<p>The following lines of code are not working correctly.</p>
<p>A. What type of error is this? B. Using the toolbox of code first aid
strategies, can you isolate the problem area?</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Goal: run a chi square test to see whether kangaroo rat observations in the `control` plot type differ significantly between different plot_ids (hopefully not!)</span></span>
<span></span>
<span><span class="va">control_plot_data</span> <span class="op">&lt;-</span>  <span class="va">krats</span> <span class="op">%&gt;%</span> <span class="fu">filter</span><span class="op">(</span><span class="va">plot_type</span> <span class="op">==</span> <span class="st">"Control"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">n_control_plots</span> <span class="op">&lt;-</span> <span class="fu">length</span><span class="op">(</span><span class="va">control_plot_data</span><span class="op">$</span><span class="va">plot_id</span><span class="op">)</span></span>
<span><span class="va">exp_proportions</span> <span class="op">&lt;-</span> <span class="fu">rep</span><span class="op">(</span><span class="fl">1</span><span class="op">/</span><span class="va">n_control_plots</span>, <span class="va">n_control_plots</span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot_counts</span> <span class="op">&lt;-</span> <span class="va">control_plot_data</span> <span class="op">%&gt;%</span> <span class="fu">group_by</span><span class="op">(</span><span class="va">plot_id</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">summarize</span><span class="op">(</span>n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Chisq test -- do count values vary significantly by plot id? </span></span>
<span></span>
<span><span class="fu">chisq.test</span><span class="op">(</span><span class="va">plot_counts</span><span class="op">$</span><span class="va">n</span>, p <span class="op">=</span> <span class="va">exp_proportions</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in chisq.test(plot_counts$n, p = exp_proportions): 'x' and 'p' must have the same number of elements</code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<p>An isolated version of the problem area might look like:</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">n_control_plots</span> <span class="op">&lt;-</span> <span class="fu">length</span><span class="op">(</span><span class="va">control_plot_data</span><span class="op">$</span><span class="va">plot_id</span><span class="op">)</span></span>
<span><span class="va">exp_proportions</span> <span class="op">&lt;-</span> <span class="fu">rep</span><span class="op">(</span><span class="fl">1</span><span class="op">/</span><span class="va">n_control_plots</span>, <span class="va">n_control_plots</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Chisq test -- do count values vary significantly by plot id? </span></span>
<span></span>
<span><span class="fu">chisq.test</span><span class="op">(</span><span class="va">plot_counts</span><span class="op">$</span><span class="va">n</span>, p <span class="op">=</span> <span class="va">exp_proportions</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in chisq.test(plot_counts$n, p = exp_proportions): 'x' and 'p' must have the same number of elements</code></pre>
</div>
<p>If we decide to move the plot_counts line right after the first
control_plot_data line, as plot_counts seems to be calculated correctly.
Here, we can see there’s probably something wrong with the
<code>p</code> argument: exp_proportions is very long, much longer than
the number of control plots! Let’s solve the problem.</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">n_control_plots</span> <span class="op">&lt;-</span> <span class="fu">length</span><span class="op">(</span><span class="fu">unique</span><span class="op">(</span><span class="va">control_plot_data</span><span class="op">$</span><span class="va">plot_id</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">exp_proportions</span> <span class="op">&lt;-</span> <span class="fu">rep</span><span class="op">(</span><span class="fl">1</span><span class="op">/</span><span class="va">n_control_plots</span>, <span class="va">n_control_plots</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Chisq test -- do count values vary significantly by plot id? </span></span>
<span></span>
<span><span class="fu">chisq.test</span><span class="op">(</span><span class="va">plot_counts</span><span class="op">$</span><span class="va">n</span>, p <span class="op">=</span> <span class="va">exp_proportions</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
	Chi-squared test for given probabilities

data:  plot_counts$n
X-squared = 79.977, df = 7, p-value = 1.392e-14</code></pre>
</div>
<p>We can see that some plots have significantly more or fewer counts
than others! Observations of kangaroo rats are not random – rather, some
plots seem to attract the kangaroo rats more than others.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="when-should-i-prepare-my-code-for-a-reprex">When should I prepare my code for a reprex?<a class="anchor" aria-label="anchor" href="#when-should-i-prepare-my-code-for-a-reprex"></a></h2>
<hr class="half-width"><p>If you’ve isolated the problem area and tried using <strong>code
first aid</strong> strategies, but the error persists, it may be time to
get some help.</p>
<p>In a classroom setting, we may be used to raising our hand, pointing
at our code, and saying “I’m not sure what’s wrong.” But outside of the
classroom, helpers have limited time, bandwidth, and requisite knowledge
to help. That’s why reproducing the problem with a <strong>reproducible
example</strong> is an essential skill to getting unstuck: it allows you
to ask for expert help with a problem that’s clearly identified,
self-contained, and reproducible, and allows the expert to quickly see
whether they’ve got the requisite skills to answer your question!</p>
</section><section><h2 class="section-heading" id="back-to-our-analysis-mickey-tries-to-get-unstuck">Back to our analysis: Mickey tries to get unstuck<a class="anchor" aria-label="anchor" href="#back-to-our-analysis-mickey-tries-to-get-unstuck"></a></h2>
<hr class="half-width"><p>Back in the lab, Mickey is happily coding along, exploring the data.
Let’s follow their analysis and see how they use code first aid and
prepare the code for a reprex.</p>
<p>Mickey is interested in understanding how kangaroo rat weights differ
across species and sexes, so they create a quick visualization.</p>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Barplot of rodent species by sex</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="va">surveys</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">species</span>, fill <span class="op">=</span> <span class="va">sex</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/2-identify-the-problem-rendered-unnamed-chunk-23-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Whoa, this is really overwhelming! Mickey forgot that the dataset
includes data for a lot of different species, not just kangaroo rats.
Mickey is only interested in two kangaroo rat species: <em>Dipodomys
ordii</em> (Ord’s kangaroo rat) and <em>Dipodomys spectabilis</em>
(Banner-tailed kangaroo rat).</p>
<p>Mickey also notices that there are three categories for sex: F, M,
and what looks like a blank field when there is no sex information
available. For the purposes of comparing weights, Mickey wants to focus
only rodents of known sex.</p>
<p>Mickey filters the data to include only the two focal species and
only rodents whose sex is F or M.</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Filter to focal species and known sex</span></span>
<span><span class="va">rodents_subset</span> <span class="op">&lt;-</span> <span class="va">surveys</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">species</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"ordii"</span>, <span class="st">"spectabilis"</span><span class="op">)</span>,</span>
<span>         <span class="va">sex</span> <span class="op">==</span> <span class="fu">c</span><span class="op">(</span><span class="st">"F"</span>, <span class="st">"M"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>Because these scientific names are long, Mickey also decides to add
common names to the dataset. They start by creating a data frame with
the common names, which they will then join to the
<code>rodents_subset</code> dataset:</p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add common names</span></span>
<span><span class="va">common_names</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span>species <span class="op">=</span> <span class="fu">unique</span><span class="op">(</span><span class="va">rodents_subset</span><span class="op">$</span><span class="va">species</span><span class="op">)</span>, common_name <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"Ord's"</span>, <span class="st">"Banner-tailed"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">common_names</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>      species   common_name
1 spectabilis         Ord's
2       ordii Banner-tailed</code></pre>
</div>
<p>But looking at the <code>common names</code> dataset reveals a
problem! The common names are not properly matched to the scientific
names. For example, the genus <em>Ordii</em> should correspond to Ord’s
kangaroo rat, but currently, it is matched with the Banner-tailed
kangaroo rat instead.</p>
<div id="discussion1" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div class="callout-inner">
<h3 class="callout-title">Challenge</h3>
<div class="callout-content">
<ol style="list-style-type: decimal"><li>Is this a syntax error or a semantic error? Explain why.</li>
<li>What “code first aid” steps might be appropriate here? Which ones
are unlikely to be helpful?</li>
</ol></div>
</div>
</div>
<p>Mickey re-orders the names and tries the code again. This time, it
works! The common names are joined to the correct scientific names.
Mickey joins the common names to <code>rodents_subset</code>.</p>
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Try again, re-ordering the common names</span></span>
<span><span class="va">common_names</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span>species <span class="op">=</span> <span class="fu">sort</span><span class="op">(</span><span class="fu">unique</span><span class="op">(</span><span class="va">rodents_subset</span><span class="op">$</span><span class="va">species</span><span class="op">)</span><span class="op">)</span>, common_name <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"Ord's"</span>, <span class="st">"Banner-Tailed"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">rodents_subset</span> <span class="op">&lt;-</span> <span class="fu">left_join</span><span class="op">(</span><span class="va">rodents_subset</span>, <span class="va">common_names</span>, by <span class="op">=</span> <span class="st">"species"</span><span class="op">)</span></span></code></pre>
</div>
<p>Now, Mickey is ready to start learning about kangaroo rat weights.
They start by running a quick linear regression to predict
<code>weight</code> based on <code>species</code> and
<code>sex</code>.</p>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Explore k-rat weights</span></span>
<span><span class="va">weight_model</span> <span class="op">&lt;-</span> <span class="fu">lm</span><span class="op">(</span><span class="va">weight</span> <span class="op">~</span> <span class="va">species</span> <span class="op">+</span> <span class="va">sex</span>, data <span class="op">=</span> <span class="va">rodents_subset</span><span class="op">)</span></span>
<span><span class="fu">summary</span><span class="op">(</span><span class="va">weight_model</span><span class="op">)</span> </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
Call:
lm(formula = weight ~ species + sex, data = rodents_subset)

Residuals:
     Min       1Q   Median       3Q      Max
-109.531   -7.991    3.239   11.469   48.469

Coefficients: (1 not defined because of singularities)
                   Estimate Std. Error t value Pr(&gt;|t|)
(Intercept)          47.991      1.136   42.23   &lt;2e-16 ***
speciesspectabilis   73.540      1.420   51.79   &lt;2e-16 ***
sexM                     NA         NA      NA       NA
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 20.58 on 910 degrees of freedom
  (31 observations deleted due to missingness)
Multiple R-squared:  0.7466,	Adjusted R-squared:  0.7464
F-statistic:  2682 on 1 and 910 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<p>The negative coefficient for <code>common_nameOrd's</code> tells
Mickey that Ord’s kangaroo rats are significantly less heavy than
Banner-tailed kangaroo rats.</p>
<p>But something is wrong with the coefficients for sex. Why are there
NA values for <code>sexM</code>? Let’s directly visualize weight by
species and sex to see.</p>
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Weight by species and sex</span></span>
<span><span class="va">rodents_subset</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">weight</span>, x <span class="op">=</span> <span class="va">species</span>, fill <span class="op">=</span> <span class="va">sex</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_boxplot</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">WARNING<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="warning" tabindex="0"><code>Warning: Removed 31 rows containing non-finite outside the scale range
(`stat_boxplot()`).</code></pre>
</div>
<figure><img src="../fig/2-identify-the-problem-rendered-unnamed-chunk-28-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>When Mickey visualizes the data, they see a problem in the graph,
too. As the model showed, Ord’s kangaroo rats are significantly smaller
than Banner-tailed kangaroo rats. But something is definitely wrong!
Because the boxes are colored by sex, we can see that all of the
Banner-tailed kangaroo rats are male and all of the Ord’s kangaroo rats
are female. That can’t be right! What are the chances of catching all
one sex for two different species?</p>
<p>To verify that the problem comes from the data, not from the plot
code, Mickey creates a two-way frequency table, which confirms that
there are no observations of female <em>spectabilis</em> or male
<em>ordii</em> in <code>rodents_subset</code>. Something definitely
seems wrong. Those rows should not be missing.</p>
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Subsetted dataset</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">rodents_subset</span><span class="op">$</span><span class="va">sex</span>, <span class="va">rodents_subset</span><span class="op">$</span><span class="va">species</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
    ordii spectabilis
  F   333           0
  M     0         610</code></pre>
</div>
<p>To double check, Mickey looks at the original dataset.</p>
<div class="codewrapper sourceCode" id="cb54">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Original dataset</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="va">rodents</span><span class="op">$</span><span class="va">sex</span>, <span class="va">rodents</span><span class="op">$</span><span class="va">species</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
    albigula eremicus flavus fulvescens fulviventer harrisi hispidus
  F      474      372    222         46           3       0       68
  M      368      468    302         16           2       0       42

    leucogaster maniculatus megalotis merriami ordii penicillatus  sp.
  F         373         160       637     2522   690          221    4
  M         397         248       680     3108   792          155    5

    spectabilis spilosoma taylori torridus
  F        1135         1       0      390
  M        1232         1       3      441</code></pre>
</div>
<p>Not only were there originally males and females present from both
<em>ordii</em> and <em>spectabilis</em>, but the original numbers were
way, way higher! It looks like somewhere along the way, Mickey lost a
lot of observations.</p>
<p>While we don’t have the time today, let’s assume Mickey worked their
way through the code first aid steps, but weren’t able to solve the
problem.</p>
<p>They decide to return to Remy’s road map to figure out what to do
next.</p>
<figure><img src="../fig/Roadmap_Aug25.svg" class="figure mx-auto d-block"></figure><p>Since code first aid was not enough to solve this problem, it looks
like it’s time to ask for help using a <em>reprex</em>.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul><li>The first step to getting unstuck is identifying a problem,
isolating the problem area, and interpreting the problem</li>
<li>Often, using “code first aid” – acting on error messages, looking at
data, inputs, etc., pulling up documentation, asking a search engine or
LLM, can help us to quickly fix the error on our own.</li>
<li>If code first aid doesn’t work, we can ask for help and prepare a
reproducible example (reprex) with a defined problem and isolated
code</li>
<li>We’ll cover future steps to prepare a reproducible example (reprex)
in future episodes.</li>
</ul></div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="../instructor/1-intro-reproducible-examples.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="../instructor/3-minimal-reproducible-code.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="../instructor/1-intro-reproducible-examples.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: What is a reprex and
        </a>
        <a class="chapter-link float-end" href="../instructor/3-minimal-reproducible-code.html" rel="next">
          Next: Minimal reproducible...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/carpentries-incubator/R-help-reprexes/edit/main/episodes/2-identify-the-problem.Rmd" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/carpentries-incubator/R-help-reprexes/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/carpentries-incubator/R-help-reprexes/" class="external-link">Source</a></p>
				<p><a href="https://github.com/carpentries-incubator/R-help-reprexes/blob/main/CITATION.cff" class="external-link">Cite</a> | <a href="mailto:kgahm@ucla.edu">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.17.1" class="external-link">sandpaper (0.17.1)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.9" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.7" class="external-link">varnish (1.0.7)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "@id": "https://carpentries-incubator.github.io/R-help-reprexes/instructor/2-identify-the-problem.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/LearningResource/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "R, reprex, help, The Carpentries, error, debug, reproducible example",
  "name": "Identify the problem and make a plan",
  "creativeWorkStatus": "active",
  "url": "https://carpentries-incubator.github.io/R-help-reprexes/instructor/2-identify-the-problem.html",
  "identifier": "https://carpentries-incubator.github.io/R-help-reprexes/instructor/2-identify-the-problem.html",
  "dateCreated": "2024-05-14",
  "dateModified": "2025-09-16",
  "datePublished": "2025-09-16"
}

  </script><script>
		feather.replace();
	</script></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

